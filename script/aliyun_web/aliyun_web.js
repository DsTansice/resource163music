/*
new Env('阿里云社区');
@Author: Leiyiyan
@Date: 2024-05-06 11:00

@Description:
阿里云服务 每日签到、点赞、评论、收藏，积分可兑换实物

获取 Cookie 方式： 阿里云 APP - 首页 - 积分商城

注意事项 - 因文章评论需要审核，所以请按推荐时间执行：
   12点前执行一次：签到、点赞、收藏、评论；
   12点后执行一次：积分收取、取消点赞、取消收藏；

[Script]
http-response ^https?:\/\/developer\.aliyun\.com\/developer\/api\/my\/user\/getUser script-path=https://raw.githubusercontent.com/leiyiyan/resource/main/script/aliyun_web/aliyun_web.js, requires-body=true, timeout=60, tag=阿里云Web Cookie
cron "0 7,13 * * *" script-path=https://raw.githubusercontent.com/leiyiyan/resource/main/script/aliyun_web/aliyun_web.js, tag=阿里云社区日常任务

[MITM]
hostname = developer.aliyun.com

====================================
⚠️【免责声明】
------------------------------------------
1、此脚本仅用于学习研究，不保证其合法性、准确性、有效性，请根据情况自行判断，本人对此不承担任何保证责任。
2、由于此脚本仅用于学习研究，您必须在下载后 24 小时内将所有内容从您的计算机或手机或任何存储设备中完全删除，若违反规定引起任何事件本人对此均不负责。
3、请勿将此脚本用于任何商业或非法目的，若违反规定请自行对此负责。
4、此脚本涉及应用与本人无关，本人对因此引起的任何隐私泄漏或其他后果不承担任何责任。
5、本人对任何脚本引发的问题概不负责，包括但不限于由脚本错误引起的任何损失和损害。
6、如果任何单位或个人认为此脚本可能涉嫌侵犯其权利，应及时通知并提供身份证明，所有权证明，我们将在收到认证文件确认后删除此脚本。
7、所有直接或间接使用、查看此脚本的人均应该仔细阅读此声明。本人保留随时更改或补充此声明的权利。一旦您使用或复制了此脚本，即视为您已接受此免责声明。
 */

const _0x526b27=_0x5278;(function(_0x5312d2,_0x69ef4f){const _0x321996=_0x5278,_0x29863c=_0x5312d2();while(!![]){try{const _0xbc04e8=-parseInt(_0x321996(0x216))/0x1*(parseInt(_0x321996(0x2cb))/0x2)+parseInt(_0x321996(0x304))/0x3*(-parseInt(_0x321996(0x1fa))/0x4)+-parseInt(_0x321996(0x2eb))/0x5*(-parseInt(_0x321996(0x1fd))/0x6)+parseInt(_0x321996(0x296))/0x7+-parseInt(_0x321996(0x1fc))/0x8*(-parseInt(_0x321996(0x277))/0x9)+parseInt(_0x321996(0x221))/0xa*(parseInt(_0x321996(0x22e))/0xb)+parseInt(_0x321996(0x29d))/0xc*(-parseInt(_0x321996(0x1c7))/0xd);if(_0xbc04e8===_0x69ef4f)break;else _0x29863c['push'](_0x29863c['shift']());}catch(_0x3046a9){_0x29863c['push'](_0x29863c['shift']());}}}(_0x4ba2,0x3a122));function _0x5278(_0x2853d2,_0x2f35b0){const _0x4ba244=_0x4ba2();return _0x5278=function(_0x527866,_0x957ba2){_0x527866=_0x527866-0x1a2;let _0x487b98=_0x4ba244[_0x527866];return _0x487b98;},_0x5278(_0x2853d2,_0x2f35b0);}const $=new Env(_0x526b27(0x1cc)),ckName='aliyunWeb_data';$[_0x526b27(0x231)]='';const Notify=0x1,notify=$[_0x526b27(0x1e4)]()?require(_0x526b27(0x29c)):'';let envSplitor=['@'];var userCookie=($['isNode']()?process['env'][ckName]:$['getdata'](ckName))||'';let userList=[],userIdx=0x0,userCount=0x0;const taskGroup=[{'code':'','name':'我的社区'},{'code':_0x526b27(0x22c),'name':_0x526b27(0x1f7)},{'code':_0x526b27(0x1db),'name':_0x526b27(0x260)},{'code':'yitian','name':'倚天'},{'code':'cloudnative','name':_0x526b27(0x2cf)},{'code':_0x526b27(0x1ad),'name':_0x526b27(0x28a)},{'code':_0x526b27(0x271),'name':_0x526b27(0x1ef)},{'code':_0x526b27(0x1d0),'name':'数据库'},{'code':_0x526b27(0x1f0),'name':_0x526b27(0x2b9)},{'code':_0x526b27(0x1e1),'name':_0x526b27(0x2b0)},{'code':_0x526b27(0x2ee),'name':_0x526b27(0x2d8)},{'code':_0x526b27(0x247),'name':_0x526b27(0x2fb)},{'code':_0x526b27(0x287),'name':_0x526b27(0x1da)},{'code':_0x526b27(0x300),'name':'云效DevOps'},{'code':'aliyun_linux','name':_0x526b27(0x314)}];$[_0x526b27(0x1e8)]=($['isNode']()?process[_0x526b27(0x233)][_0x526b27(0x280)]:$['getdata'](_0x526b27(0x1e8)))||_0x526b27(0x249),$[_0x526b27(0x209)]=[],$[_0x526b27(0x20e)]=[],$['codeServer']=($['isNode']()?process['env'][_0x526b27(0x2fa)]:$[_0x526b27(0x2bd)](_0x526b27(0x25f)))||'',$[_0x526b27(0x2f8)]=($['isNode']()?process['env'][_0x526b27(0x306)]:$[_0x526b27(0x2bd)](_0x526b27(0x23b)))||'false',$[_0x526b27(0x222)]=$[_0x526b27(0x2f8)]!=_0x526b27(0x249)&&$[_0x526b27(0x1ed)]&&$['appid'];async function main(){const _0x51a81d=_0x526b27,_0x421a2e={'FCxbB':_0x51a81d(0x241),'GaHaP':function(_0x4b0cc2,_0x6d108f){return _0x4b0cc2<_0x6d108f;},'QdSBV':'ebook','uqFzl':function(_0x29f43d,_0x257904){return _0x29f43d<_0x257904;},'kBZZI':'aliyun-public-like','eWmVt':_0x51a81d(0x1fe),'mZQPC':function(_0x3d2d30,_0x20ebd2){return _0x3d2d30===_0x20ebd2;},'KpKTK':'ask','BuJBv':function(_0x474b0a,_0x106e8c){return _0x474b0a-_0x106e8c;},'Dkodj':function(_0x12a9ee,_0x40b474){return _0x12a9ee(_0x40b474);}};try{$[_0x51a81d(0x23f)](_0x421a2e[_0x51a81d(0x242)]);for(let _0x5a09e1 of userList){console['log'](_0x51a81d(0x21d)+_0x5a09e1['index']+_0x51a81d(0x2ef)),console[_0x51a81d(0x23f)](_0x51a81d(0x2ea)+_0x5a09e1[_0x51a81d(0x281)]()+'ms');const _0x5c45c7=Date['now']();let _0x2ef759=await _0x5a09e1[_0x51a81d(0x264)]()??{};if(_0x5a09e1[_0x51a81d(0x297)]){if(_0x421a2e[_0x51a81d(0x1d9)](_0x5c45c7,new Date(new Date()['setHours'](0xc,0x0,0x0,0x0))[_0x51a81d(0x2b5)]())){for(let _0x513834 of taskGroup){const _0x1061a6=await _0x5a09e1[_0x51a81d(0x1f3)](_0x513834[_0x51a81d(0x21c)]),_0x28b18b=await _0x5a09e1[_0x51a81d(0x2f0)](_0x1061a6);await _0x5a09e1[_0x51a81d(0x26b)](_0x28b18b,_0x513834[_0x51a81d(0x2df)]),await $[_0x51a81d(0x1ec)](_0x5a09e1[_0x51a81d(0x281)]());const _0x34a1e7=await _0x5a09e1[_0x51a81d(0x2b7)](_0x1061a6,_0x513834['name']);await $[_0x51a81d(0x1ec)](_0x5a09e1[_0x51a81d(0x281)]()),_0x34a1e7&&(await _0x5a09e1['receiveSignInBonus'](_0x1061a6,_0x513834[_0x51a81d(0x2df)]),await $[_0x51a81d(0x1ec)](_0x5a09e1[_0x51a81d(0x281)]()));}const _0x546fc8=await _0x5a09e1[_0x51a81d(0x2db)]();await $[_0x51a81d(0x1ec)](_0x5a09e1[_0x51a81d(0x281)]());const _0x4a8eda=await _0x5a09e1[_0x51a81d(0x210)](_0x546fc8,_0x421a2e[_0x51a81d(0x275)]);await $[_0x51a81d(0x1ec)](_0x5a09e1[_0x51a81d(0x281)]()),await _0x5a09e1[_0x51a81d(0x2b3)](_0x546fc8,_0x4a8eda),await $[_0x51a81d(0x1ec)](_0x5a09e1[_0x51a81d(0x281)]());for(let _0x179436=0x0;_0x421a2e[_0x51a81d(0x1b3)](_0x179436,0x5);_0x179436++){const _0x178c1b=await _0x5a09e1[_0x51a81d(0x204)]();await $[_0x51a81d(0x1ec)](_0x5a09e1[_0x51a81d(0x281)]()),await _0x5a09e1[_0x51a81d(0x2c6)](_0x178c1b,_0x421a2e['kBZZI'],0x0),await $[_0x51a81d(0x1ec)](_0x5a09e1[_0x51a81d(0x281)]()),await _0x5a09e1[_0x51a81d(0x2c6)](_0x178c1b,_0x421a2e[_0x51a81d(0x254)],0x0),await $[_0x51a81d(0x1ec)](_0x5a09e1['getRandomTime']());_0x421a2e['mZQPC'](_0x179436,0x0)&&(await _0x5a09e1['addComment'](_0x178c1b),await $[_0x51a81d(0x1ec)](_0x5a09e1['getRandomTime']()));const _0x487e73=await _0x5a09e1[_0x51a81d(0x1e0)]();await $[_0x51a81d(0x1ec)](_0x5a09e1[_0x51a81d(0x281)]());const _0x1b44de=await _0x5a09e1[_0x51a81d(0x210)](_0x487e73['id'],_0x421a2e['KpKTK']);await $[_0x51a81d(0x1ec)](_0x5a09e1[_0x51a81d(0x281)]());const _0x49981a=await _0x5a09e1[_0x51a81d(0x2ae)](_0x487e73);await $[_0x51a81d(0x1ec)](_0x5a09e1[_0x51a81d(0x281)]()),await _0x5a09e1[_0x51a81d(0x2c8)](_0x487e73['id'],_0x49981a,_0x1b44de,0x1),await $[_0x51a81d(0x1ec)](_0x5a09e1[_0x51a81d(0x281)]());}}else{for(let _0x57707f of taskGroup){const _0x156523=await _0x5a09e1['getUserSpaceSignInDetail'](_0x57707f[_0x51a81d(0x21c)]),_0xd33fd9=await _0x5a09e1[_0x51a81d(0x2b7)](_0x156523,_0x57707f['name']);await $['wait'](_0x5a09e1[_0x51a81d(0x281)]()),_0xd33fd9&&(await _0x5a09e1['receiveSignInBonus'](_0x156523,_0x57707f[_0x51a81d(0x2df)]),await $[_0x51a81d(0x1ec)](_0x5a09e1[_0x51a81d(0x281)]()));}await _0x5a09e1[_0x51a81d(0x2c2)](),await $[_0x51a81d(0x1ec)](_0x5a09e1[_0x51a81d(0x281)]()),await _0x5a09e1['collect'](),await $[_0x51a81d(0x1ec)](_0x5a09e1[_0x51a81d(0x281)]()),await $[_0x51a81d(0x1ec)](_0x5a09e1['getRandomTime']());const _0x3fea35=await _0x5a09e1[_0x51a81d(0x1ce)]()??[];await $[_0x51a81d(0x1ec)](_0x5a09e1[_0x51a81d(0x281)]());if(_0x3fea35['length'])for(let _0x3d2deb of _0x3fea35){await _0x5a09e1['likeOrNotLike'](_0x3d2deb['objectId'],_0x421a2e[_0x51a81d(0x24e)],0x1),await $['wait'](_0x5a09e1[_0x51a81d(0x281)]()),await _0x5a09e1['likeOrNotLike'](_0x3d2deb['objectId'],_0x421a2e[_0x51a81d(0x254)],0x1),await $[_0x51a81d(0x1ec)](_0x5a09e1[_0x51a81d(0x281)]());}}let _0x41d9f8=await _0x5a09e1[_0x51a81d(0x264)]()??{};$['title']=_0x51a81d(0x1bb)+(_0x421a2e[_0x51a81d(0x211)](_0x41d9f8,_0x2ef759)||0x0)+'积分',_0x421a2e['Dkodj'](DoubleLog,'「'+_0x5a09e1[_0x51a81d(0x310)]+_0x51a81d(0x1d3)+_0x41d9f8+'积分');}else $[_0x51a81d(0x20e)][_0x51a81d(0x22d)](_0x51a81d(0x205)+(_0x5a09e1['userName']||_0x5a09e1['index'])+'\x20>>\x20Check\x20ck\x20error!');$['notifyList'][_0x51a81d(0x22d)]({'id':_0x5a09e1[_0x51a81d(0x2b1)],'avatar':_0x5a09e1[_0x51a81d(0x228)],'message':$['notifyMsg']}),$[_0x51a81d(0x20e)]=[];}}catch(_0x2eae99){$[_0x51a81d(0x23f)]('⛔️\x20main\x20run\x20error\x20=>\x20'+_0x2eae99);throw new Error('⛔️\x20main\x20run\x20error\x20=>\x20'+_0x2eae99);}}class UserInfo{constructor(_0x57633e){const _0x5a653e=_0x526b27,_0x6a580c={'KrQbB':function(_0x5d2b83,_0x5f1881){return _0x5d2b83===_0x5f1881;},'QGcDj':function(_0x2f5dda,_0x369ce8){return _0x2f5dda(_0x369ce8);},'cdYpz':function(_0x9a5b95,_0x13b595,_0x5bbac2){return _0x9a5b95(_0x13b595,_0x5bbac2);},'GXNGi':function(_0x3aaf52,_0x16493e){return _0x3aaf52+_0x16493e;},'gEmqJ':function(_0x515ceb,_0x51ddac){return _0x515ceb==_0x51ddac;},'bGHGy':_0x5a653e(0x305),'qaVGD':'https://developer.aliyun.com/'};this[_0x5a653e(0x2b1)]=++userIdx,this[_0x5a653e(0x255)]=_0x57633e['token']||_0x57633e,this[_0x5a653e(0x308)]=_0x57633e[_0x5a653e(0x308)],this[_0x5a653e(0x310)]=_0x57633e[_0x5a653e(0x310)],this[_0x5a653e(0x228)]=_0x57633e['avatar'],this[_0x5a653e(0x297)]=!![],this[_0x5a653e(0x1a3)]={'01':'✅','02':'⛔️'},this[_0x5a653e(0x28c)]='',this['host']=_0x6a580c[_0x5a653e(0x30c)],this['headers']={'Cookie':this[_0x5a653e(0x255)],'User-Agent':_0x5a653e(0x246),'Referer':_0x6a580c[_0x5a653e(0x1b5)]},this[_0x5a653e(0x281)]=()=>randomInt(0x3e8,0xbb8),this[_0x5a653e(0x1dc)]=async _0x273424=>{const _0x44ad58=_0x5a653e;try{if(_0x6a580c[_0x44ad58(0x1c9)](typeof _0x273424,_0x44ad58(0x29b)))_0x273424={'url':_0x273424};if(_0x273424?.[_0x44ad58(0x2b8)]?.[_0x44ad58(0x2c4)]('/'))_0x273424[_0x44ad58(0x2b8)]=this['host']+_0x273424[_0x44ad58(0x2b8)];const _0xee422c=await _0x6a580c[_0x44ad58(0x1c6)](Request,{..._0x273424,'headers':_0x273424[_0x44ad58(0x26e)]||this[_0x44ad58(0x26e)],'url':_0x273424['url']||this['baseUrl']});_0x6a580c['cdYpz'](debug,_0xee422c,_0x273424?.['url']?.[_0x44ad58(0x283)](/\/+$/,'')['substring'](_0x6a580c[_0x44ad58(0x1cd)](_0x273424?.['url']?.[_0x44ad58(0x21b)]('/'),0x1)));if(_0x6a580c[_0x44ad58(0x24d)](_0xee422c?.[_0x44ad58(0x21c)],0x9c41))throw new Error(_0xee422c?.[_0x44ad58(0x2c9)]||_0x44ad58(0x266));return _0xee422c;}catch(_0x56592e){this[_0x44ad58(0x297)]=![],$[_0x44ad58(0x23f)](_0x44ad58(0x1f8)+_0x56592e);}};}async[_0x526b27(0x276)](){const _0x447eb8=_0x526b27,_0x382a26={'sRGdk':_0x447eb8(0x2f3)};try{const _0x22649d={'url':_0x447eb8(0x2f4),'type':_0x382a26[_0x447eb8(0x1a8)]};await this[_0x447eb8(0x1dc)](_0x22649d);}catch(_0x1ebf78){this[_0x447eb8(0x297)]=![],$[_0x447eb8(0x23f)](_0x447eb8(0x2cc)+_0x1ebf78);}}async[_0x526b27(0x2b7)](_0x41813a,_0x8f8abe){const _0x263ed2=_0x526b27,_0x221f63={'eCEdI':_0x263ed2(0x2f3)};try{const _0x1deb5a={'url':_0x263ed2(0x289),'type':_0x221f63[_0x263ed2(0x2d7)],'params':{'taskGroupId':_0x41813a}};let _0x25f5a3=await this[_0x263ed2(0x1dc)](_0x1deb5a);return _0x25f5a3?.['data'];}catch(_0x5f7d84){this['ckStatus']=![],$['log'](_0x263ed2(0x265)+_0x5f7d84);}}async[_0x526b27(0x1a5)](_0x584fba,_0x2a0f72){const _0x4ad04e=_0x526b27,_0x4dcca8={'NVCON':'/sign/receiveSignInBonus','qFVfa':_0x4ad04e(0x257),'CxSvL':'form','wbipq':function(_0x314d95,_0x17401b){return _0x314d95==_0x17401b;},'pcUxX':_0x4ad04e(0x21f),'pIBef':function(_0x29ad63,_0x4b419f){return _0x29ad63||_0x4b419f;},'gFuIT':_0x4ad04e(0x292)};try{const _0x23541a={'url':_0x4dcca8[_0x4ad04e(0x1b7)],'type':_0x4dcca8[_0x4ad04e(0x212)],'dataType':_0x4dcca8[_0x4ad04e(0x25c)],'body':{'taskGroupId':_0x584fba}};let _0x5b80e0=await this['fetch'](_0x23541a);if(_0x4dcca8[_0x4ad04e(0x1d6)](_0x5b80e0?.[_0x4ad04e(0x21c)],_0x4dcca8[_0x4ad04e(0x2a6)])){const _0x4f5a9e=_0x5b80e0?.[_0x4ad04e(0x27e)]||0x0;$['log'](_0x4ad04e(0x2a2)+_0x4dcca8[_0x4ad04e(0x26f)](_0x2a0f72,_0x4dcca8[_0x4ad04e(0x1e3)])+_0x4ad04e(0x2ff)+_0x4f5a9e+_0x4ad04e(0x293));}else $['log'](_0x4ad04e(0x2dc)+_0x4dcca8[_0x4ad04e(0x26f)](_0x2a0f72,_0x4dcca8[_0x4ad04e(0x1e3)])+':\x20'+_0x5b80e0?.[_0x4ad04e(0x2c9)]);}catch(_0x2707b8){this['ckStatus']=![],$[_0x4ad04e(0x23f)](_0x4ad04e(0x20b)+_0x2707b8);}}async[_0x526b27(0x1f3)](_0x4607f0){const _0x4dd76c=_0x526b27,_0x376f0f={'kpKuW':_0x4dd76c(0x2f3)};try{const _0x5e1819={'url':_0x4dd76c(0x28f),'type':_0x376f0f[_0x4dd76c(0x2a7)],'params':{'excode':_0x4607f0}};let _0x4826d0=await this['fetch'](_0x5e1819);const _0x593067=_0x4826d0?.['data']?.['taskGroupId'];return _0x593067;}catch(_0x49d0da){this[_0x4dd76c(0x297)]=![],$['log'](_0x4dd76c(0x2cc)+_0x49d0da);}}async['getTasks'](_0x536e38){const _0x3b6c22=_0x526b27,_0x108447={'Eldif':_0x3b6c22(0x2f3)};try{const _0x2d3f83={'url':_0x3b6c22(0x307)+_0x536e38,'type':_0x108447[_0x3b6c22(0x1a9)]};let _0x56f545=await this[_0x3b6c22(0x1dc)](_0x2d3f83);const _0x1360d9=_0x56f545?.[_0x3b6c22(0x27e)]?.[_0x3b6c22(0x1e5)];let _0x5cacc6={};if(_0x1360d9[_0x3b6c22(0x2ba)]){const _0x9602ae=new Date()[_0x3b6c22(0x2b5)]();for(let _0x4687bc of _0x1360d9){if(_0x9602ae>=_0x4687bc[_0x3b6c22(0x2fe)]&&_0x9602ae<=_0x4687bc[_0x3b6c22(0x29a)]){const _0x4fb151=JSON[_0x3b6c22(0x2fc)](_0x4687bc['finishRule'][_0x3b6c22(0x283)](/&quot;/g,'\x22'));_0x5cacc6['actionCode']=_0x4fb151['actions'][0x0]['actionCode'],_0x5cacc6['activityCode']=_0x4fb151[_0x3b6c22(0x298)][0x0][_0x3b6c22(0x1ca)],_0x5cacc6[_0x3b6c22(0x313)]=_0x4fb151[_0x3b6c22(0x298)][0x0]['objectId'];}}}return _0x5cacc6;}catch(_0x5138d8){this['ckStatus']=![],$[_0x3b6c22(0x23f)](_0x3b6c22(0x2cc)+_0x5138d8);}}async['signin'](_0x224d75,_0x426568){const _0x45ce43=_0x526b27,_0xa7699d={'cQmrZ':_0x45ce43(0x26d),'kfrVp':_0x45ce43(0x1ea),'MQXjH':function(_0x4c0818,_0x2744c7){return _0x4c0818||_0x2744c7;},'DDJQy':_0x45ce43(0x292)};try{const _0x156b47={'url':_0xa7699d[_0x45ce43(0x240)],'type':_0x45ce43(0x257),'dataType':_0xa7699d['kfrVp'],'body':_0x224d75};let _0x4d295a=await this[_0x45ce43(0x1dc)](_0x156b47);$[_0x45ce43(0x23f)](_0x45ce43(0x309)+_0xa7699d[_0x45ce43(0x284)](_0x426568,_0xa7699d[_0x45ce43(0x2b4)])+':\x20'+_0x4d295a?.['message']);}catch(_0x86b0eb){this[_0x45ce43(0x297)]=![],$['log'](_0x45ce43(0x21e)+_0x86b0eb);}}async[_0x526b27(0x204)](){const _0x587638=_0x526b27,_0xc24ed2={'fxsTy':'.feed-item','TiUyd':_0x587638(0x1de),'IXUpN':function(_0x6dd19,_0x484f4c){return _0x6dd19(_0x484f4c);},'naIFa':function(_0xcec5dc,_0x796ff3){return _0xcec5dc+_0x796ff3;},'OPIEJ':function(_0x317f1a,_0x33950b){return _0x317f1a*_0x33950b;},'uHCjv':'.community-detail-content','BOHWs':_0x587638(0x294)};try{const _0x90c38c=_0xc24ed2[_0x587638(0x20a)](Math[_0x587638(0x1d7)](_0xc24ed2[_0x587638(0x235)](Math[_0x587638(0x2a1)](),0x1f)),0x1),_0x50a875={'url':'https://developer.aliyun.com/group/aliware/article_hot?pageNum='+_0x90c38c,'type':_0x587638(0x2f3)};let _0x3e2439=await this['fetch'](_0x50a875);const _0x536808=$[_0x587638(0x315)][_0x587638(0x2f7)](_0x3e2439),_0x19c677=_0x536808(_0xc24ed2['uHCjv']),_0x1b7544=_0x19c677[_0x587638(0x28d)](_0xc24ed2[_0x587638(0x1c2)])[_0x587638(0x1a6)]((_0x52de56,_0x58acaf)=>{const _0x112f10=_0x587638;return{'id':_0x536808(_0x58acaf)[_0x112f10(0x28d)](_0xc24ed2[_0x112f10(0x1ab)])[_0x112f10(0x23d)](_0xc24ed2['TiUyd']),'name':_0xc24ed2[_0x112f10(0x2c5)](_0x536808,_0x58acaf)[_0x112f10(0x28d)](_0x112f10(0x20c))[_0x112f10(0x23e)]()};})[_0x587638(0x2f3)](),_0x505a7f=_0x1b7544[Math['floor'](_0xc24ed2['OPIEJ'](Math['random'](),_0x1b7544[_0x587638(0x2ba)]))],{id:_0x39503f,name:_0x75a6dd}=_0x505a7f;return $[_0x587638(0x23f)](_0x587638(0x2f2)+_0x39503f+_0x587638(0x290)+_0x75a6dd),_0x39503f;}catch(_0x16894f){this[_0x587638(0x297)]=![],$['log'](_0x587638(0x234)+_0x16894f);}}async[_0x526b27(0x2db)](){const _0x2447e9=_0x526b27,_0x59dc2a={'VozgG':function(_0x4e447f,_0x166cbf){return _0x4e447f(_0x166cbf);},'fNQUk':_0x2447e9(0x2e3),'fTAHe':function(_0x15768a,_0x5991b6){return _0x15768a+_0x5991b6;},'BeOWg':function(_0x32777e,_0x27f812){return _0x32777e*_0x27f812;},'pAlKS':function(_0x5311e4,_0x424f67){return _0x5311e4(_0x424f67);},'DhAwP':'.ebook-home-list','fLOqZ':_0x2447e9(0x2e8)};try{const _0x3b629b=_0x59dc2a[_0x2447e9(0x2e1)](Math[_0x2447e9(0x1d7)](_0x59dc2a[_0x2447e9(0x262)](Math[_0x2447e9(0x2a1)](),0x1f5)),0x1),_0x2d558c={'url':_0x2447e9(0x1f9)+_0x3b629b,'type':_0x2447e9(0x2f3)};let _0x2bab4a=await this[_0x2447e9(0x1dc)](_0x2d558c);const _0x2a6e9a=$[_0x2447e9(0x315)][_0x2447e9(0x2f7)](_0x2bab4a),_0x484944=_0x59dc2a[_0x2447e9(0x2a4)](_0x2a6e9a,_0x59dc2a[_0x2447e9(0x2af)]),_0x3fdc63=_0x484944[_0x2447e9(0x28d)](_0x59dc2a[_0x2447e9(0x245)])['map']((_0x48e42f,_0x2ec50c)=>{const _0x1d0bba=_0x2447e9;return{'id':_0x59dc2a[_0x1d0bba(0x2b2)](_0x2a6e9a,_0x2ec50c)['attr'](_0x1d0bba(0x20f))[_0x1d0bba(0x283)](_0x59dc2a['fNQUk'],''),'name':_0x59dc2a[_0x1d0bba(0x2b2)](_0x2a6e9a,_0x2ec50c)[_0x1d0bba(0x28d)]('.ebook-home-title')[_0x1d0bba(0x23e)]()};})[_0x2447e9(0x2f3)](),_0x2a6c75=_0x3fdc63[Math['floor'](_0x59dc2a[_0x2447e9(0x262)](Math[_0x2447e9(0x2a1)](),_0x3fdc63[_0x2447e9(0x2ba)]))],{id:_0x1e2b36,name:_0x2bfd60}=_0x2a6c75;return $[_0x2447e9(0x23f)]('✅\x20随机电子书id：\x20'+_0x1e2b36+_0x2447e9(0x290)+_0x2bfd60),_0x1e2b36;}catch(_0x1355ee){this[_0x2447e9(0x297)]=![],$[_0x2447e9(0x23f)](_0x2447e9(0x1b4)+_0x1355ee);}}async[_0x526b27(0x1e0)](){const _0x2fd595=_0x526b27,_0x49ee78={'XxZcs':function(_0x4d89de,_0x3bb28f){return _0x4d89de(_0x3bb28f);},'AoqvZ':_0x2fd595(0x1de),'THMFf':_0x2fd595(0x316),'axvfp':function(_0x1dd377,_0xda0b88){return _0x1dd377(_0xda0b88);},'AIgSs':_0x2fd595(0x23a),'KwhyA':function(_0x44a8ff,_0xc9ba97){return _0x44a8ff+_0xc9ba97;},'FCKav':function(_0x18ec3e,_0xe7e1e0){return _0x18ec3e*_0xe7e1e0;},'yIvnw':function(_0x493444,_0x2b2a8e){return _0x493444(_0x2b2a8e);},'yewIp':'.askProduct-item'};try{const _0x13999a=_0x49ee78['KwhyA'](Math[_0x2fd595(0x1d7)](_0x49ee78[_0x2fd595(0x225)](Math[_0x2fd595(0x2a1)](),0x1f)),0x1),_0x2f04ae={'url':_0x2fd595(0x238)+_0x13999a,'type':'get'};let _0x3e5fea=await this['fetch'](_0x2f04ae);const _0x470785=$[_0x2fd595(0x315)][_0x2fd595(0x2f7)](_0x3e5fea),_0x11c12a=_0x49ee78['yIvnw'](_0x470785,_0x2fd595(0x1eb)),_0x70e9c2=_0x11c12a[_0x2fd595(0x28d)](_0x49ee78[_0x2fd595(0x267)])[_0x2fd595(0x1a6)]((_0x3651f2,_0x1bafa6)=>{const _0x593319=_0x2fd595;return{'id':_0x49ee78[_0x593319(0x201)](_0x470785,_0x1bafa6)['attr'](_0x49ee78['AoqvZ']),'name':_0x49ee78['XxZcs'](_0x470785,_0x1bafa6)['find'](_0x49ee78[_0x593319(0x278)])[_0x593319(0x23e)](),'answer':_0x49ee78[_0x593319(0x1f1)](parseInt,_0x49ee78[_0x593319(0x1f1)](_0x470785,_0x1bafa6)['find'](_0x49ee78[_0x593319(0x226)])[_0x593319(0x23e)]())};})[_0x2fd595(0x236)]((_0x5f0dc4,_0x5e2027)=>_0x5e2027['answer']>0x0)['get'](),_0x3efe65=_0x70e9c2[Math[_0x2fd595(0x1d7)](Math[_0x2fd595(0x2a1)]()*_0x70e9c2[_0x2fd595(0x2ba)])],{id:_0x69c9e1,name:_0x4f0f06}=_0x3efe65;return $['log'](_0x2fd595(0x24c)+_0x69c9e1+_0x2fd595(0x290)+_0x4f0f06),_0x3efe65;}catch(_0x73cbc3){this[_0x2fd595(0x297)]=![],$[_0x2fd595(0x23f)](_0x2fd595(0x2a8)+_0x73cbc3);}}async['getAskDetail'](_0xe9d4ac){const _0x32e6f4=_0x526b27,_0x206006={'XjVMY':function(_0x5bcfb3,_0x1c1f07){return _0x5bcfb3(_0x1c1f07);},'Mmiiz':_0x32e6f4(0x1de),'kOvte':_0x32e6f4(0x2f3),'rfxud':_0x32e6f4(0x2d4),'sdbXH':function(_0x147d5e,_0x4297ba){return _0x147d5e*_0x4297ba;}};try{const _0x4589cf={'url':'https://developer.aliyun.com/ask/'+_0xe9d4ac['id'],'type':_0x206006['kOvte']};let _0x15815e=await this['fetch'](_0x4589cf);const _0x5991fe=$[_0x32e6f4(0x315)][_0x32e6f4(0x2f7)](_0x15815e),_0x558a81=_0x5991fe(_0x32e6f4(0x2be)),_0x4e5e46=_0x558a81[_0x32e6f4(0x28d)](_0x206006[_0x32e6f4(0x2e9)])['map']((_0x4cb910,_0x1cac67)=>{const _0x58d3f9=_0x32e6f4;return{'id':_0x206006[_0x58d3f9(0x2a5)](_0x5991fe,_0x1cac67)[_0x58d3f9(0x23d)](_0x206006[_0x58d3f9(0x252)])};})[_0x32e6f4(0x2f3)](),_0x5744f4=_0x4e5e46[Math[_0x32e6f4(0x1d7)](_0x206006[_0x32e6f4(0x1df)](Math[_0x32e6f4(0x2a1)](),_0xe9d4ac[_0x32e6f4(0x2bf)]))],{id:_0x49c1bb}=_0x5744f4;return $[_0x32e6f4(0x23f)]('✅\x20随机获取问题问答id：\x20'+_0x49c1bb),_0x49c1bb;}catch(_0x6a389d){this[_0x32e6f4(0x297)]=![],$[_0x32e6f4(0x23f)](_0x32e6f4(0x203)+_0x6a389d);}}async[_0x526b27(0x2c6)](_0x2f7ace,_0x1b5c6c,_0xebb9b9){const _0xc30c25=_0x526b27,_0x503e34={'pvJik':'https://ucc.aliyun.com/uccPagingComponent/likeOrNotLike','PhSIN':'get','LpJIG':'yq-article','bwvKl':function(_0x222206,_0x2bdcea){return _0x222206===_0x2bdcea;},'fnqzg':_0xc30c25(0x301),'ekJDP':function(_0x4649cb,_0x38946e){return _0x4649cb===_0x38946e;}};try{const _0x417b2a={'url':_0x503e34[_0xc30c25(0x1c4)],'type':_0x503e34[_0xc30c25(0x1ee)],'params':{'bizCategory':_0x503e34[_0xc30c25(0x227)],'actionCode':_0x1b5c6c,'objectId':_0x2f7ace,'status':_0xebb9b9,'uccCsrfToken':await this['getUccCsrfToken'](),'callback':getCallback()}};await this[_0xc30c25(0x1dc)](_0x417b2a),$['log']('✅\x20'+(_0x503e34['bwvKl'](_0x1b5c6c,_0xc30c25(0x301))?'文章'+(_0xebb9b9===0x1?'取消':'')+'点赞':'文章'+(_0xebb9b9===0x1?'取消':'')+'收藏')+'：\x20'+_0x2f7ace);}catch(_0x331996){this['ckStatus']=![],$['log']('⛔️\x20'+(_0x503e34[_0xc30c25(0x253)](_0x1b5c6c,_0x503e34[_0xc30c25(0x2b6)])?'文章'+(_0x503e34[_0xc30c25(0x2d6)](_0xebb9b9,0x1)?'取消':'')+'点赞':'文章'+(_0x503e34[_0xc30c25(0x2d6)](_0xebb9b9,0x1)?'取消':'')+'收藏')+'失败!\x20'+_0x331996);}}async[_0x526b27(0x210)](_0x5c1604,_0xf746ee){const _0xd9a7b1=_0x526b27,_0x337490={'qOiuu':_0xd9a7b1(0x2f3),'JzcRB':_0xd9a7b1(0x30b)};try{const _0x38257f={'url':_0xd9a7b1(0x1c0),'type':_0x337490[_0xd9a7b1(0x2a9)],'headers':{'Cookie':this[_0xd9a7b1(0x255)],'User-Agent':_0x337490['JzcRB'],'Referer':_0xd9a7b1(0x1b2)+_0xf746ee+'/'+_0x5c1604}},_0x2f8861=await this[_0xd9a7b1(0x1dc)](_0x38257f);return _0x2f8861?.[_0xd9a7b1(0x255)];}catch(_0x34930b){this[_0xd9a7b1(0x297)]=![],$[_0xd9a7b1(0x23f)]('⛔️\x20获取\x20csrf\x20失败!\x20'+_0x34930b);}}async[_0x526b27(0x2c8)](_0x29d82f,_0x175070,_0x18d3d0,_0x5a9668){const _0x3adc51=_0x526b27,_0x348242={'LRpfC':_0x3adc51(0x257),'Nzhax':'form'};try{const _0x3a36e9={'url':_0x3adc51(0x272),'type':_0x348242[_0x3adc51(0x303)],'dataType':_0x348242[_0x3adc51(0x2f5)],'headers':{'Cookie':this[_0x3adc51(0x255)],'User-Agent':'Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2016_6\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Mobile/15E148\x20AliApp(Aliyun/6.7.1)\x20WindVane/8.7.2\x201170x2532\x20WK','Referer':_0x3adc51(0x250)+_0x29d82f},'params':{'p_csrf':_0x18d3d0},'body':{'id':_0x175070,'votes':_0x5a9668}};await this[_0x3adc51(0x1dc)](_0x3a36e9),$['log'](_0x3adc51(0x2a0)+_0x29d82f+'-'+_0x175070);}catch(_0x30688e){this['ckStatus']=![],$[_0x3adc51(0x23f)]('⛔️\x20回答点赞失败!\x20'+_0x30688e);}}async['addBookComment'](_0x327278,_0x5003ca){const _0x59af9c=_0x526b27,_0x1ac429={'hcrnA':_0x59af9c(0x295),'cALnp':_0x59af9c(0x259),'BSBPp':function(_0x3b0e2a,_0x3da967){return _0x3b0e2a==_0x3da967;},'LKADS':'200'};try{const _0x3f2d4b={'url':'https://developer.aliyun.com/developer/api/ebook/mark/add','type':'post','dataType':_0x1ac429[_0x59af9c(0x232)],'headers':{'Cookie':this[_0x59af9c(0x255)],'User-Agent':_0x59af9c(0x30b),'Referer':_0x59af9c(0x1a7)+_0x327278},'params':{'p_csrf':_0x5003ca},'body':{'eBookId':_0x327278,'score':0xa,'content':_0x1ac429['cALnp']}},_0x3db1ad=await this[_0x59af9c(0x1dc)](_0x3f2d4b);_0x1ac429[_0x59af9c(0x1d8)](_0x3db1ad?.[_0x59af9c(0x21c)],_0x1ac429[_0x59af9c(0x1a2)])?$[_0x59af9c(0x23f)](_0x59af9c(0x2d3)+_0x327278):$[_0x59af9c(0x23f)](_0x59af9c(0x30e)+_0x3db1ad?.[_0x59af9c(0x2c9)]);}catch(_0x5cf642){this['ckStatus']=![],$[_0x59af9c(0x23f)](_0x59af9c(0x30e)+_0x5cf642);}}async[_0x526b27(0x1ce)](){const _0x279806=_0x526b27,_0x353034={'tEONp':_0x279806(0x218),'gyElE':'get','whzpa':function(_0x24713e,_0x4d2f51){return _0x24713e===_0x4d2f51;},'CYUaE':_0x279806(0x301),'DfmLW':_0x279806(0x2c1),'GtFNG':_0x279806(0x237)};try{const _0x97ff2a={'url':_0x353034['tEONp'],'type':_0x353034[_0x279806(0x22a)],'params':{'pageNum':0x1,'pageSize':0xa,'type':0x1}},_0x1016d5=await this[_0x279806(0x1dc)](_0x97ff2a),{list:_0x48e452}=_0x1016d5?.['data'];if(_0x48e452[_0x279806(0x2ba)])return $[_0x279806(0x23f)](_0x279806(0x219)),_0x48e452;return[];}catch(_0x22f9ad){this[_0x279806(0x297)]=![],$['log'](_0x279806(0x1aa)+(_0x353034[_0x279806(0x2c0)](type,_0x353034['CYUaE'])?_0x353034[_0x279806(0x2de)]:_0x353034[_0x279806(0x2aa)])+_0x279806(0x2ce)+_0x22f9ad);}}async[_0x526b27(0x2ac)](_0xb12299){const _0x1eede4=_0x526b27,_0x322908={'kajTt':_0x1eede4(0x27a),'aHcOM':_0x1eede4(0x207),'gGLoB':_0x1eede4(0x279),'qJNVO':'developer-ecology','HPtrZ':function(_0x329b5a){return _0x329b5a();}};try{const _0x389126={'url':_0x322908[_0x1eede4(0x29e)],'type':_0x1eede4(0x2f3),'params':{'content':encodeURIComponent(_0x322908[_0x1eede4(0x1ff)]),'objectId':_0xb12299,'bizCategory':_0x322908[_0x1eede4(0x291)],'commentType':0x0,'sourceAppCode':_0x322908[_0x1eede4(0x1bf)],'sourceBizCategory':'developer-ecology-group','uccCsrfToken':await this[_0x1eede4(0x26a)](),'callback':_0x322908[_0x1eede4(0x1cb)](getCallback)}};await this['fetch'](_0x389126),$[_0x1eede4(0x23f)](_0x1eede4(0x1af)+_0xb12299);}catch(_0x571af7){this[_0x1eede4(0x297)]=![],$[_0x1eede4(0x23f)](_0x1eede4(0x30a)+_0x571af7);}}async[_0x526b27(0x264)](){const _0x17b749=_0x526b27,_0x24916c={'GrFXj':_0x17b749(0x1bd),'HetgE':'get'};try{const _0x5ce87e={'url':_0x24916c[_0x17b749(0x28e)],'type':_0x24916c[_0x17b749(0x1f2)]};let _0x3fd105=await this[_0x17b749(0x1dc)](_0x5ce87e);return _0x3fd105?.[_0x17b749(0x27e)];}catch(_0x18a937){$[_0x17b749(0x23f)](_0x17b749(0x1f4)+_0x18a937);}}async[_0x526b27(0x2c2)](){const _0x255560=_0x526b27,_0x446c4f={'cZbhD':_0x255560(0x2f3)};try{const _0x3dea96={'url':_0x255560(0x2ec),'type':_0x446c4f[_0x255560(0x269)]};let _0x4bb695=await this[_0x255560(0x1dc)](_0x3dea96);return $[_0x255560(0x23f)](_0x255560(0x206)+_0x4bb695?.['data']),_0x4bb695?.[_0x255560(0x27e)];}catch(_0x3bcf7b){$['log']('⛔️\x20查询待领取积分失败!\x20'+_0x3bcf7b);}}async[_0x526b27(0x22b)](){const _0x250eac=_0x526b27,_0x5393a7={'YCmkG':'get'};try{const _0x2313c9={'url':'/score/pending/receiveAllPendingScore?appCode=developer','type':_0x5393a7[_0x250eac(0x2d5)]};let _0x157bac=await this[_0x250eac(0x1dc)](_0x2313c9);return $['log']('✅\x20收取积分：'+_0x157bac?.['data']),_0x157bac?.[_0x250eac(0x27e)];}catch(_0x2a5a9b){$[_0x250eac(0x23f)](_0x250eac(0x2e6)+_0x2a5a9b);}}async['getUccCsrfToken'](){const _0x3b0df6=_0x526b27,_0x1e1015={'SuyAr':_0x3b0df6(0x1dd),'dKEKO':_0x3b0df6(0x2f3),'MWyfR':function(_0x4a9f73){return _0x4a9f73();}};try{const _0x102f13={'url':_0x1e1015[_0x3b0df6(0x27d)],'type':_0x1e1015[_0x3b0df6(0x1ba)],'params':{'uccCsrfToken':'','callback':_0x1e1015[_0x3b0df6(0x215)](getCallback)}};let _0x26bee0=await this[_0x3b0df6(0x1dc)](_0x102f13);const _0x5728f1=_0x26bee0['indexOf']('{'),_0x2e9049=_0x26bee0['lastIndexOf']('}'),_0x282668=_0x26bee0[_0x3b0df6(0x21a)](_0x5728f1,_0x2e9049+0x1),_0x4089a6=JSON[_0x3b0df6(0x2fc)](_0x282668);return _0x4089a6[_0x3b0df6(0x27e)][_0x3b0df6(0x248)];}catch(_0x700ba2){$['log'](_0x3b0df6(0x1b0)+_0x700ba2);}}}function getCallback(){const _0x2d4815=_0x526b27,_0x53049f={'Zrega':function(_0x4c09a6,_0x37f3d8){return _0x4c09a6+_0x37f3d8;},'zBcCY':function(_0x3a505e,_0x38cc32){return _0x3a505e+_0x38cc32;},'eGNFV':function(_0x290d05,_0x5201f9){return _0x290d05+_0x5201f9;},'VEWbc':_0x2d4815(0x1be),'dQewb':function(_0x1a280a,_0x27a059){return _0x1a280a*_0x27a059;}};return _0x53049f[_0x2d4815(0x274)](_0x53049f[_0x2d4815(0x1a4)](_0x53049f[_0x2d4815(0x2e5)](_0x53049f[_0x2d4815(0x2ca)],Date[_0x2d4815(0x2dd)]()),'_'),Math[_0x2d4815(0x302)](_0x53049f[_0x2d4815(0x2e7)](0x186a0,Math[_0x2d4815(0x2a1)]())));}async function getCookie(){const _0x2f7970=_0x526b27,_0x475e24={'hmgHF':function(_0x49353d,_0x1cf579){return _0x49353d===_0x1cf579;},'nYjZY':_0x2f7970(0x1b9),'yLkdt':function(_0x3296aa,_0x55af0e){return _0x3296aa(_0x55af0e);}};if($request&&_0x475e24['hmgHF']($request['method'],_0x475e24[_0x2f7970(0x28b)]))return;const _0x1f8806=_0x475e24[_0x2f7970(0x2ad)](ObjectKeys2LowerCase,$request[_0x2f7970(0x26e)]),_0x3a576e=_0x1f8806[_0x2f7970(0x24a)],_0x52934c=$[_0x2f7970(0x268)]($response[_0x2f7970(0x213)]);if(!_0x52934c?.[_0x2f7970(0x27e)]){$[_0x2f7970(0x2f1)]($['name'],_0x2f7970(0x217),'');return;}const {nickname:_0x2dce99,avatar:_0x33055d}=_0x52934c?.[_0x2f7970(0x27e)],_0x1bb369={'userId':_0x2dce99,'avatar':_0x33055d,'token':_0x3a576e,'userName':_0x2dce99};userCookie=userCookie?JSON[_0x2f7970(0x2fc)](userCookie):[];const _0x33874c=userCookie[_0x2f7970(0x30d)](_0x2f50e8=>_0x2f50e8[_0x2f7970(0x308)]==_0x1bb369[_0x2f7970(0x308)]);userCookie[_0x33874c]?userCookie[_0x33874c]=_0x1bb369:userCookie[_0x2f7970(0x22d)](_0x1bb369),$[_0x2f7970(0x282)](userCookie,ckName),$[_0x2f7970(0x2f1)]($[_0x2f7970(0x2df)],'🎉'+_0x1bb369['userName']+_0x2f7970(0x2c3),'');}async function loadModule(){const _0x34ba30=_0x526b27;try{return $[_0x34ba30(0x315)]=await loadCheerio(),$[_0x34ba30(0x315)]?!![]:![];}catch(_0x5fc83d){throw new Error(_0x34ba30(0x200)+_0x5fc83d);}}async function getWxToken(_0xf94bbd){const _0x388e6c=_0x526b27,_0x56f09d={'redxM':_0x388e6c(0x295),'GXwKf':_0x388e6c(0x25a),'ZiFUL':_0x388e6c(0x261),'MVOkI':_0x388e6c(0x2d9),'OzHhI':function(_0x4f1dca,_0x5649f5){return _0x4f1dca(_0x5649f5);}};try{const _0x48cf87={'url':_0x388e6c(0x1e2)+_0xf94bbd,'dataType':_0x56f09d[_0x388e6c(0x286)],'headers':{'Host':_0x56f09d[_0x388e6c(0x29f)],'User-Agent':_0x56f09d['ZiFUL'],'Referer':_0x56f09d[_0x388e6c(0x1f6)]}};let _0x59afde=await _0x56f09d[_0x388e6c(0x1e7)](Request,_0x48cf87),_0x90375c=_0x388e6c(0x2c7)+_0x59afde?.[_0x388e6c(0x27e)]?.['token']?.['access_token'];return _0x90375c;}catch(_0x1cf9d4){$[_0x388e6c(0x23f)](_0x388e6c(0x311)+_0x1cf9d4);}}async function checkCodeServer(){const _0x5061b5=_0x526b27,_0x251dca={'giDnc':function(_0x49746e,_0x4cf646){return _0x49746e(_0x4cf646);},'IFvpT':_0x5061b5(0x251),'TPwYJ':_0x5061b5(0x202),'oQnFy':function(_0x4e5715,_0x558b9c){return _0x4e5715(_0x558b9c);},'XwGlv':function(_0x3ab78c,_0x2c07ab){return _0x3ab78c(_0x2c07ab);}};try{$[_0x5061b5(0x2f9)]=($[_0x5061b5(0x1e4)]()?process[_0x5061b5(0x233)][_0x251dca[_0x5061b5(0x1b6)]]:$[_0x5061b5(0x2bd)](_0x251dca[_0x5061b5(0x1c8)]))||'';let _0x44351e=$[_0x5061b5(0x2f9)]?(_0x251dca[_0x5061b5(0x1ac)](eval,$[_0x5061b5(0x2f9)]),await WxCode($[_0x5061b5(0x231)])):(await _0x251dca[_0x5061b5(0x2d0)](Request,{'url':$['codeServer']+_0x5061b5(0x1ae)+$['appid']}))?.[_0x5061b5(0x229)]('|')||[];_0x44351e=_0x44351e[_0x5061b5(0x236)](_0x194397=>_0x194397['toString']()[_0x5061b5(0x2ba)]===0x20),debug(_0x44351e),!_0x44351e[_0x5061b5(0x2ba)]?$[_0x5061b5(0x23f)](_0x5061b5(0x1fb)):$[_0x5061b5(0x23f)](_0x5061b5(0x239)+_0x44351e[_0x5061b5(0x2ba)]);let _0x46cca2=await Promise[_0x5061b5(0x2d1)](_0x44351e[_0x5061b5(0x1a6)](async _0x386140=>{const _0x44a7a2=_0x5061b5,_0x9e5589=await _0x251dca[_0x44a7a2(0x224)](getWxToken,_0x386140);return{'token':_0x9e5589};}));return _0x46cca2=_0x46cca2[_0x5061b5(0x236)](_0x3f13c4=>Object['keys'](_0x3f13c4)[_0x5061b5(0x2ba)]!==0x0),_0x46cca2;}catch(_0xff33ac){$[_0x5061b5(0x23f)](_0x5061b5(0x1d1)+_0xff33ac);}}function _0x4ba2(){const _0x93f113=['cZbhD','getUccCsrfToken','signin','hsBfx','/task/actionLog','headers','pIBef','IQobz','luoshen','https://developer.aliyun.com/developer/api/my/ask/voteAnswer','gNRPZ','Zrega','QdSBV','getUser','2093751cKuzlp','THMFf','yq-comment-type-article','https://ucc.aliyun.com/uccPagingComponent/addComment',':开始下载Cheerio模块','entries','SuyAr','data','EmkTi','IS_DEDUG','getRandomTime','setjson','replace','MQXjH','TdQUQ','redxM','iot','Content-Type','/sign/assessSignInBonusQualification','云存储','nYjZY','baseUrl','find','GrFXj','/sign/getUserSpaceSignInDetail',',\x20标题：','gGLoB','default','\x20积分','.community-list','json','2056145HrThqL','ckStatus','actions','gygww','gmtEnableEnd','string','./sendNotify','843504gMlzdo','kajTt','GXwKf','✅\x20回答点赞：\x20','random','✅\x20抽奖\x20-\x20','MlbTl','pAlKS','XjVMY','pcUxX','kpKuW','⛔️\x20获取问答列表失败!\x20','qOiuu','GtFNG','round','addComment','yLkdt','getAskDetail','DhAwP','大数据与机器学习','index','VozgG','addBookComment','DDJQy','getTime','fnqzg','assessSignInBonusQualification','url','PolarDB开源','length','finally','join','getdata','.answer-list','answer','whzpa','文章点赞','getUserTotalPendingScore','更新token成功!','startsWith','IXUpN','likeOrNotLike','Bearer\x20','voteAnswer','message','VEWbc','795106dZyhfE','⛔️\x20获取签到任务列表失败!\x20','opts','失败!\x20','云原生','XwGlv','all','concat','✅\x20评价电子书：\x20','.answer-item','YCmkG','ekJDP','eCEdI','ModelScope模型即服务','https://servicewechat.com/wx14413dafd16b9540/130/page-frame.html','MDzct','getEbooks','⛔️\x20抽奖\x20-\x20','now','DfmLW','name','pDfnq','fTAHe','BPqBl','/ebook/',':缓存中存在Cheerio模块,跳过下载','eGNFV','⛔️\x20收取积分失败!\x20','dQewb','.ebook-home-item','rfxud','随机延迟','1205ycQEYx','/score/pending/getUserTotalPendingScore?appCode=developer','getScript','modelscope','\x20>>\x20Start\x20work','getTasks','msg','✅\x20随机获取文章id：\x20','get','/my/user/getUser','Nzhax','共找到','load','codeOpen','codeFuc','codeServer_address','视觉智能','parse','当前请求已超时','gmtEnableStart',':\x20获得\x20','devops','aliyun-public-like','ceil','LRpfC','238773uDdund','https://developer.aliyun.com/developer/api','codeServer_open','/task/getTaskGroup?groupId=','userId','✅\x20签到\x20-\x20','⛔️\x20文章点赞失败!\x20','Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2016_6\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Mobile/15E148\x20AliApp(Aliyun/6.7.1)\x20WindVane/8.7.2\x201170x2532\x20WK','bGHGy','findIndex','⛔️\x20评价电子书失败!\x20','toLowerCase','userName','❌getWxToken\x20run\x20error\x20=>\x20','oMtPO','objectId','龙蜥操作系统','Cheerio','.askProduct-item-title-text\x20h3','LKADS','doFlag','zBcCY','receiveSignInBonus','map','https://developer.aliyun.com/ebook/','sRGdk','Eldif','⛔️\x20','fxsTy','oQnFy','storage','/?wxappid=','✅\x20文章评论：\x20','⛔️\x20获取UccCsrfToken失败!\x20','timeout','https://developer.aliyun.com/','uqFzl','⛔️\x20获取电子书列表失败!\x20','qaVGD','IFvpT','NVCON','set','OPTIONS','dKEKO','本次运行共获得','BDHQC','/my/score/getUserScore?appCode=developer','jsonp_','qJNVO','https://developer.aliyun.com/csrfToken','debug','BOHWs','fromEntries','pvJik','\x0a-----------','QGcDj','39VYvRmo','TPwYJ','KrQbB','actionCode','HPtrZ','阿里云社区','GXNGi','getFavors','toStr','database','❌checkCodeServer\x20run\x20error\x20=>\x20','❌加载模块失败，请检查模块路径是否正常','」当前余额为','catch','sendNotify','wbipq','floor','BSBPp','GaHaP','物联网','computenest','fetch','https://ucc.aliyun.com/uccPagingComponent/getUser','data-id','sdbXH','getAsks','bigdata','https://ulp.michelin.com.cn/bff/wechat/login/','gFuIT','isNode','taskList','race','OzHhI','is_debug','❌checkEnv\x20run\x20error\x20=>\x20','form','.askProduct-list','wait','codeServer','PhSIN','飞天洛神云网络','polardb','axvfp','HetgE','getUserSpaceSignInDetail','⛔️\x20查询待收获积分列表失败!\x20','lfImg','MVOkI','弹性计算','⛔️\x20请求发起失败！','https://developer.aliyun.com/ebook/index/__0_0_0_','20VWEkgX','❌获取code授权失败！请检查服务器运行是否正常\x20=>\x20尝试读取数据持久化\x20','8KunBFa','6918jCGyou','aliyun-public-favorite','aHcOM','❌loadModule\x20run\x20error\x20=>\x20','XxZcs','@codeServer.fun','⛔️\x20随机获取问题问答失败!\x20','getArticles','❌账号','✅\x20待领取积分：','感谢博主的分享','keys','notifyList','naIFa','⛔️\x20抽奖失败!\x20','.feed-item-content-title\x20h3','https://mirror.ghproxy.com/https://raw.githubusercontent.com/Yuheng0101/X/main/Utils/cheerio.js','notifyMsg','href','getCsrfToken','BuJBv','qFVfa','body','afkIj','MWyfR','1HEtXuY','❌获取Cookie失败!','https://developer.aliyun.com/developer/api/my/subscribe/listUserFavor','✅\x20开始取消文章的点赞与收藏记录','substring','lastIndexOf','code','🔷账号','⛔️\x20签到失败!\x20','200','TKDEx','4399950RdzXft','wxCode','isSurge','giDnc','FCKav','AIgSs','LpJIG','avatar','split','gyElE','collect','ecs','push','11NOQiMM','❌请求发起失败！原因为：','Cheerio_code','appid','hcrnA','env','⛔️\x20获取文章列表失败!\x20','OPIEJ','filter','文章收藏','https://developer.aliyun.com/ask?pageNum=','✅获取code授权成功！当前code数量为','.askProduct-item-info-answer','@codeServer.open','title','attr','text','log','cQmrZ','\x0a==================\x20任务\x20==================\x0a','FCxbB','grfhk','includes','fLOqZ','Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_7)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/122.0.0.0\x20Safari/537.36','viapi','uccCsrfToken','false','cookie','then','✅\x20随机获取问答id：\x20','gEmqJ','kBZZI','debug\x20error\x20=>\x20t=','https://developer.aliyun.com/ask/','codeServer_fun','Mmiiz','bwvKl','eWmVt','token','未找到CK','post','wvGmx','很棒的一本书','ulp.michelin.com.cn','queryStr','CxSvL','application/json;charset=UTF-8','[发送请求]\x20缺少\x20url\x20参数','@codeServer.address','计算巢','Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2015_4_1\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Mobile/15E148\x20MicroMessenger/8.0.31(0x18001f37)\x20NetType/WIFI\x20Language/zh_CN','BeOWg','setdata','interactData','⛔️\x20查询领奖条件失败!\x20','用户需要去登录','yewIp','toObj'];_0x4ba2=function(){return _0x93f113;};return _0x4ba2();}async function checkEnv(){const _0x141dcd=_0x526b27,_0x1bfae1={'BqpgS':_0x141dcd(0x256)};try{let _0x145318=[];if($[_0x141dcd(0x222)])_0x145318=await checkCodeServer()||[];else{if(!userCookie||!userCookie[_0x141dcd(0x2ba)]){console[_0x141dcd(0x23f)](_0x1bfae1['BqpgS']);return;}}if(!_0x145318[_0x141dcd(0x2ba)]){const _0x237961=envSplitor[_0x141dcd(0x28d)](_0x57cfb4=>userCookie[_0x141dcd(0x244)](_0x57cfb4))||envSplitor[0x0];userCookie=$[_0x141dcd(0x268)](userCookie)||userCookie['split'](_0x237961),_0x145318=userCookie;}return userList[_0x141dcd(0x22d)](..._0x145318[_0x141dcd(0x1a6)](_0x2a9a0b=>new UserInfo(_0x2a9a0b))[_0x141dcd(0x236)](Boolean)),userCount=userList[_0x141dcd(0x2ba)],console[_0x141dcd(0x23f)](_0x141dcd(0x2f6)+userCount+'个账号'),!![];}catch(_0x409b3f){throw new Error(_0x141dcd(0x1e9)+_0x409b3f);}}async function Request(_0x25a5ea){const _0x41b85c=_0x526b27,_0x50ee1f={'gNRPZ':function(_0x55a77a,_0x462b33){return _0x55a77a===_0x462b33;},'lfImg':_0x41b85c(0x29b),'gvVzx':_0x41b85c(0x25e),'wvGmx':_0x41b85c(0x1ea),'pDfnq':_0x41b85c(0x27e),'MDzct':function(_0x17f57c,_0xcccd8){return _0x17f57c in _0xcccd8;},'hsBfx':_0x41b85c(0x213),'BPqBl':_0x41b85c(0x257),'KSgeg':_0x41b85c(0x2f3),'EmkTi':function(_0x179f8e,_0x43ff71){return _0x179f8e+_0x43ff71;},'afkIj':'json','TdQUQ':_0x41b85c(0x288),'oMtPO':function(_0xe71ad4,_0x32510a){return _0xe71ad4==_0x32510a;}};if(_0x50ee1f[_0x41b85c(0x273)](typeof _0x25a5ea,_0x50ee1f[_0x41b85c(0x1f5)]))_0x25a5ea={'url':_0x25a5ea};try{if(!_0x25a5ea?.[_0x41b85c(0x2b8)])throw new Error(_0x50ee1f['gvVzx']);let {url:_0x414b27,type:_0x5490ce,headers:headers={},body:_0x54beed,params:_0x88c964,dataType:dataType=_0x50ee1f[_0x41b85c(0x258)],resultType:resultType=_0x50ee1f[_0x41b85c(0x2e0)]}=_0x25a5ea;const _0x15446c=_0x5490ce?_0x5490ce?.[_0x41b85c(0x30f)]():_0x50ee1f[_0x41b85c(0x2da)](_0x50ee1f[_0x41b85c(0x26c)],_0x25a5ea)?_0x50ee1f['BPqBl']:_0x50ee1f['KSgeg'],_0x10fd5b=_0x414b27[_0x41b85c(0x2d2)](_0x15446c===_0x50ee1f['BPqBl']?_0x50ee1f[_0x41b85c(0x27f)]('?',$[_0x41b85c(0x25b)](_0x88c964)):''),_0x44f104=_0x25a5ea['timeout']?$[_0x41b85c(0x223)]()?_0x25a5ea[_0x41b85c(0x1b1)]/0x3e8:_0x25a5ea[_0x41b85c(0x1b1)]:0x2710;if(_0x50ee1f[_0x41b85c(0x273)](dataType,_0x50ee1f[_0x41b85c(0x214)]))headers[_0x50ee1f[_0x41b85c(0x285)]]=_0x41b85c(0x25d);const _0xd7a341=_0x54beed&&_0x50ee1f[_0x41b85c(0x312)](dataType,_0x50ee1f[_0x41b85c(0x258)])?$[_0x41b85c(0x25b)](_0x54beed):$[_0x41b85c(0x1cf)](_0x54beed),_0x22570={..._0x25a5ea,..._0x25a5ea?.[_0x41b85c(0x2cd)]?_0x25a5ea[_0x41b85c(0x2cd)]:{},'url':_0x10fd5b,'headers':headers,..._0x50ee1f['gNRPZ'](_0x15446c,_0x50ee1f[_0x41b85c(0x2e2)])&&{'body':_0xd7a341},..._0x15446c===_0x41b85c(0x2f3)&&_0x88c964&&{'params':_0x88c964},'timeout':_0x44f104},_0x5d4489=$['http'][_0x15446c[_0x41b85c(0x30f)]()](_0x22570)[_0x41b85c(0x24b)](_0x542120=>resultType=='data'?$[_0x41b85c(0x268)](_0x542120['body'])||_0x542120['body']:$['toObj'](_0x542120)||_0x542120)['catch'](_0x1ae9b0=>$[_0x41b85c(0x23f)](_0x41b85c(0x22f)+_0x1ae9b0));return Promise[_0x41b85c(0x1e6)]([new Promise((_0x3bcf69,_0x1a2f00)=>setTimeout(()=>_0x1a2f00(_0x41b85c(0x2fd)),_0x44f104)),_0x5d4489]);}catch(_0x3a18b6){console['log'](_0x41b85c(0x22f)+_0x3a18b6);}};function randomInt(_0x4c73c1,_0x3edb29){const _0x1a6ccb=_0x526b27,_0x313be7={'AGHnE':function(_0x5a7d25,_0x2bf66f){return _0x5a7d25-_0x2bf66f;}};return Math[_0x1a6ccb(0x2ab)](Math[_0x1a6ccb(0x2a1)]()*_0x313be7['AGHnE'](_0x3edb29,_0x4c73c1)+_0x4c73c1);};function DoubleLog(_0x50734a){const _0x55bf10=_0x526b27;if(_0x50734a&&$[_0x55bf10(0x1e4)]())console['log'](''+_0x50734a),$[_0x55bf10(0x20e)][_0x55bf10(0x22d)](''+_0x50734a);else _0x50734a&&(console[_0x55bf10(0x23f)](''+_0x50734a),$[_0x55bf10(0x20e)][_0x55bf10(0x22d)](''+_0x50734a));};function debug(_0x3192f6,_0x370fea=_0x526b27(0x1c1)){const _0x4bf308=_0x526b27,_0x5ae063={'UQNSg':'true'};$['is_debug']===_0x5ae063['UQNSg']&&($[_0x4bf308(0x23f)](_0x4bf308(0x1c5)+_0x370fea+'------------\x0a'),$[_0x4bf308(0x23f)](typeof _0x3192f6==_0x4bf308(0x29b)?_0x3192f6:$[_0x4bf308(0x1cf)](_0x3192f6)||_0x4bf308(0x24f)+_0x3192f6),$[_0x4bf308(0x23f)]('\x0a-----------'+_0x370fea+'------------\x0a'));};async function SendMsgList(_0x3eff4d){const _0x26bc15=_0x526b27;await Promise['allSettled'](_0x3eff4d?.[_0x26bc15(0x1a6)](_0x196c29=>SendMsg(_0x196c29[_0x26bc15(0x2c9)][_0x26bc15(0x2bc)]('\x0a'),_0x196c29[_0x26bc15(0x228)])));};async function SendMsg(_0x49bb18,_0x4becb6){const _0x11606c=_0x526b27,_0x291e2b={'gygww':function(_0x33e9e4,_0x5d5acb){return _0x33e9e4<_0x5d5acb;}};_0x49bb18&&(_0x291e2b[_0x11606c(0x299)](0x0,Notify)?$[_0x11606c(0x1e4)]()?await notify[_0x11606c(0x1d5)]($[_0x11606c(0x2df)],_0x49bb18):$[_0x11606c(0x2f1)]($[_0x11606c(0x2df)],$[_0x11606c(0x23c)]||'',_0x49bb18,{'media-url':_0x4becb6}):console[_0x11606c(0x23f)](_0x49bb18));};function ObjectKeys2LowerCase(_0x22adf0){const _0x430659=_0x526b27;return _0x22adf0=Object[_0x430659(0x1c3)](Object[_0x430659(0x27c)](_0x22adf0)[_0x430659(0x1a6)](([_0x4ee904,_0x105abe])=>[_0x4ee904['toLowerCase'](),_0x105abe])),new Proxy(_0x22adf0,{'get':function(_0x439d91,_0x1bff03,_0x24112a){const _0x367e6b=_0x430659;return Reflect['get'](_0x439d91,_0x1bff03[_0x367e6b(0x30f)](),_0x24112a);},'set':function(_0x598b02,_0x5410bd,_0x18829e,_0x1f94d6){const _0x18cd53=_0x430659;return Reflect[_0x18cd53(0x1b8)](_0x598b02,_0x5410bd[_0x18cd53(0x30f)](),_0x18829e,_0x1f94d6);}});};async function loadCheerio(){const _0xa3f439=_0x526b27,_0x51e607={'BDHQC':_0xa3f439(0x230),'grfhk':function(_0x2fe323,_0x5cc81a){return _0x2fe323(_0x5cc81a);}};let _0x4704d7=($[_0xa3f439(0x1e4)]()?process[_0xa3f439(0x233)][_0x51e607[_0xa3f439(0x1bc)]]:$[_0xa3f439(0x2bd)](_0x51e607[_0xa3f439(0x1bc)]))||'';if(_0x4704d7&&Object[_0xa3f439(0x208)](_0x4704d7)[_0xa3f439(0x2ba)])return console[_0xa3f439(0x23f)]('✅'+$[_0xa3f439(0x2df)]+_0xa3f439(0x2e4)),_0x51e607[_0xa3f439(0x243)](eval,_0x4704d7),createCheerio();return console[_0xa3f439(0x23f)]('🚀'+$['name']+_0xa3f439(0x27b)),new Promise(async _0x446aee=>{const _0x5b6010=_0xa3f439,_0x5c8bba={'gMZsq':_0x51e607[_0x5b6010(0x1bc)],'VAbJl':function(_0x494f47,_0x244ad3){return _0x51e607['grfhk'](_0x494f47,_0x244ad3);},'laBhQ':function(_0x5bd360,_0x589968){const _0x13926e=_0x5b6010;return _0x51e607[_0x13926e(0x243)](_0x5bd360,_0x589968);}};$[_0x5b6010(0x2ed)](_0x5b6010(0x20d))[_0x5b6010(0x24b)](_0x23d0b4=>{const _0xdbd90=_0x5b6010;$[_0xdbd90(0x263)](_0x23d0b4,_0x5c8bba['gMZsq']),_0x5c8bba['VAbJl'](eval,_0x23d0b4);const _0x2c3b39=createCheerio();console[_0xdbd90(0x23f)]('✅Cheerio模块加载成功,请继续'),_0x5c8bba['laBhQ'](_0x446aee,_0x2c3b39);});});};!(async()=>{const _0x270aee=_0x526b27,_0x3c76b4={'gciFH':function(_0x4a4207,_0x3e808){return _0x4a4207!=_0x3e808;},'TKDEx':'undefined','MlbTl':function(_0x348fb8){return _0x348fb8();},'IQobz':function(_0x17c177,_0x5ae071){return _0x17c177>_0x5ae071;}};if(_0x3c76b4['gciFH'](typeof $request,_0x3c76b4[_0x270aee(0x220)]))await _0x3c76b4[_0x270aee(0x2a3)](getCookie);else{if(!await _0x3c76b4[_0x270aee(0x2a3)](loadModule))throw new Error(_0x270aee(0x1d2));if(!await checkEnv())throw new Error('❌未检测到ck，请添加环境变量');if(_0x3c76b4[_0x270aee(0x270)](userList[_0x270aee(0x2ba)],0x0))await _0x3c76b4[_0x270aee(0x2a3)](main);}})()[_0x526b27(0x1d4)](_0x4beb0b=>$[_0x526b27(0x20e)][_0x526b27(0x22d)](_0x4beb0b[_0x526b27(0x2c9)]||_0x4beb0b))[_0x526b27(0x2bb)](async()=>{const _0x1762d8=_0x526b27;await SendMsgList($[_0x1762d8(0x209)]),$['done']({'ok':0x1});});
/** ---------------------------------固定不动区域----------------------------------------- */
// prettier-ignore
//From chavyleung's Env.js
function Env(t, e) { class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise(((e, r) => { s.call(this, t, ((t, s, a) => { t ? r(t) : e(s) })) })) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.encoding = "utf-8", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } getEnv() { return "undefined" != typeof $environment && $environment["surge-version"] ? "Surge" : "undefined" != typeof $environment && $environment["stash-version"] ? "Stash" : "undefined" != typeof module && module.exports ? "Node.js" : "undefined" != typeof $task ? "Quantumult X" : "undefined" != typeof $loon ? "Loon" : "undefined" != typeof $rocket ? "Shadowrocket" : void 0 } isNode() { return "Node.js" === this.getEnv() } isQuanX() { return "Quantumult X" === this.getEnv() } isSurge() { return "Surge" === this.getEnv() } isLoon() { return "Loon" === this.getEnv() } isShadowrocket() { return "Shadowrocket" === this.getEnv() } isStash() { return "Stash" === this.getEnv() } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; if (this.getdata(t)) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise((e => { this.get({ url: t }, ((t, s, r) => e(r))) })) } runScript(t, e) { return new Promise((s => { let r = this.getdata("@chavy_boxjs_userCfgs.httpapi"); r = r ? r.replace(/\n/g, "").trim() : r; let a = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); a = a ? 1 * a : 20, a = e && e.timeout ? e.timeout : a; const [i, o] = r.split("@"), n = { url: `http://${o}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: a }, headers: { "X-Key": i, Accept: "*/*" }, timeout: a }; this.post(n, ((t, e, r) => s(r))) })).catch((t => this.logErr(t))) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), r = !s && this.fs.existsSync(e); if (!s && !r) return {}; { const r = s ? t : e; try { return JSON.parse(this.fs.readFileSync(r)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), r = !s && this.fs.existsSync(e), a = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, a) : r ? this.fs.writeFileSync(e, a) : this.fs.writeFileSync(t, a) } } lodash_get(t, e, s = void 0) { const r = e.replace(/\[(\d+)\]/g, ".$1").split("."); let a = t; for (const t of r) if (a = Object(a)[t], void 0 === a) return s; return a } lodash_set(t, e, s) { return Object(t) !== t || (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce(((t, s, r) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[r + 1]) >> 0 == +e[r + 1] ? [] : {}), t)[e[e.length - 1]] = s), t } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, r] = /^@(.*?)\.(.*?)$/.exec(t), a = s ? this.getval(s) : ""; if (a) try { const t = JSON.parse(a); e = t ? this.lodash_get(t, r, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, r, a] = /^@(.*?)\.(.*?)$/.exec(e), i = this.getval(r), o = r ? "null" === i ? null : i || "{}" : "{}"; try { const e = JSON.parse(o); this.lodash_set(e, a, t), s = this.setval(JSON.stringify(e), r) } catch (e) { const i = {}; this.lodash_set(i, a, t), s = this.setval(JSON.stringify(i), r) } } else s = this.setval(t, e); return s } getval(t) { switch (this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": return $persistentStore.read(t); case "Quantumult X": return $prefs.valueForKey(t); case "Node.js": return this.data = this.loaddata(), this.data[t]; default: return this.data && this.data[t] || null } } setval(t, e) { switch (this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": return $persistentStore.write(t, e); case "Quantumult X": return $prefs.setValueForKey(t, e); case "Node.js": return this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0; default: return this.data && this.data[e] || null } } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { switch (t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"], delete t.headers["content-type"], delete t.headers["content-length"]), t.params && (t.url += "?" + this.queryStr(t.params)), void 0 === t.followRedirect || t.followRedirect || ((this.isSurge() || this.isLoon()) && (t["auto-redirect"] = !1), this.isQuanX() && (t.opts ? t.opts.redirection = !1 : t.opts = { redirection: !1 })), this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": default: this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, ((t, s, r) => { !t && s && (s.body = r, s.statusCode = s.status ? s.status : s.statusCode, s.status = s.statusCode), e(t, s, r) })); break; case "Quantumult X": this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then((t => { const { statusCode: s, statusCode: r, headers: a, body: i, bodyBytes: o } = t; e(null, { status: s, statusCode: r, headers: a, body: i, bodyBytes: o }, i, o) }), (t => e(t && t.error || "UndefinedError"))); break; case "Node.js": let s = require("iconv-lite"); this.initGotEnv(t), this.got(t).on("redirect", ((t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } })).then((t => { const { statusCode: r, statusCode: a, headers: i, rawBody: o } = t, n = s.decode(o, this.encoding); e(null, { status: r, statusCode: a, headers: i, rawBody: o, body: n }, n) }), (t => { const { message: r, response: a } = t; e(r, a, a && s.decode(a.rawBody, this.encoding)) })) } } post(t, e = (() => { })) { const s = t.method ? t.method.toLocaleLowerCase() : "post"; switch (t.body && t.headers && !t.headers["Content-Type"] && !t.headers["content-type"] && (t.headers["content-type"] = "application/x-www-form-urlencoded"), t.headers && (delete t.headers["Content-Length"], delete t.headers["content-length"]), void 0 === t.followRedirect || t.followRedirect || ((this.isSurge() || this.isLoon()) && (t["auto-redirect"] = !1), this.isQuanX() && (t.opts ? t.opts.redirection = !1 : t.opts = { redirection: !1 })), this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": default: this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient[s](t, ((t, s, r) => { !t && s && (s.body = r, s.statusCode = s.status ? s.status : s.statusCode, s.status = s.statusCode), e(t, s, r) })); break; case "Quantumult X": t.method = s, this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then((t => { const { statusCode: s, statusCode: r, headers: a, body: i, bodyBytes: o } = t; e(null, { status: s, statusCode: r, headers: a, body: i, bodyBytes: o }, i, o) }), (t => e(t && t.error || "UndefinedError"))); break; case "Node.js": let r = require("iconv-lite"); this.initGotEnv(t); const { url: a, ...i } = t; this.got[s](a, i).then((t => { const { statusCode: s, statusCode: a, headers: i, rawBody: o } = t, n = r.decode(o, this.encoding); e(null, { status: s, statusCode: a, headers: i, rawBody: o, body: n }, n) }), (t => { const { message: s, response: a } = t; e(s, a, a && r.decode(a.rawBody, this.encoding)) })) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let r = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in r) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? r[e] : ("00" + r[e]).substr(("" + r[e]).length))); return t } queryStr(t) { let e = ""; for (const s in t) { let r = t[s]; null != r && "" !== r && ("object" == typeof r && (r = JSON.stringify(r)), e += `${s}=${r}&`) } return e = e.substring(0, e.length - 1), e } msg(e = t, s = "", r = "", a) { const i = t => { switch (typeof t) { case void 0: return t; case "string": switch (this.getEnv()) { case "Surge": case "Stash": default: return { url: t }; case "Loon": case "Shadowrocket": return t; case "Quantumult X": return { "open-url": t }; case "Node.js": return }case "object": switch (this.getEnv()) { case "Surge": case "Stash": case "Shadowrocket": default: return { url: t.url || t.openUrl || t["open-url"] }; case "Loon": return { openUrl: t.openUrl || t.url || t["open-url"], mediaUrl: t.mediaUrl || t["media-url"] }; case "Quantumult X": return { "open-url": t["open-url"] || t.url || t.openUrl, "media-url": t["media-url"] || t.mediaUrl, "update-pasteboard": t["update-pasteboard"] || t.updatePasteboard }; case "Node.js": return }default: return } }; if (!this.isMute) switch (this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": default: $notification.post(e, s, r, i(a)); break; case "Quantumult X": $notify(e, s, r, i(a)); case "Node.js": }if (!this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), r && t.push(r), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { switch (this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": case "Quantumult X": default: this.log("", `❗️${this.name}, 错误!`, t); break; case "Node.js": this.log("", `❗️${this.name}, 错误!`, t.stack) } } wait(t) { return new Promise((e => setTimeout(e, t))) } done(t = {}) { const e = ((new Date).getTime() - this.startTime) / 1e3; switch (this.log("", `🔔${this.name}, 结束! 🕛 ${e} 秒`), this.log(), this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": case "Quantumult X": default: $done(t); break; case "Node.js": process.exit(1) } } }(t, e) }
