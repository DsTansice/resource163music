/*
new Env('阿里云社区');
@Author: Leiyiyan
@Date: 2024-06-21 14:35

@Description:
阿里云服务 每日签到、点赞、分享、评论、收藏，积分可兑换实物

获取 Cookie 方式： 阿里云 APP - 首页 - 积分商城

变量名: aliyunWeb_data、aliyunWeb_time

注意事项 - 因文章评论需要审核，所以请按推荐时间执行：
   12点前执行一次：签到、点赞、收藏、分享、评论；
   12点后执行一次：积分收取、取消点赞、取消收藏；
   如需自定义时间，请修改 aliyunWeb_time 变量值，取值范围为 1-23 之间的整数
------------------------------------------------------------------------------
BoxJs订阅地址：
https://raw.githubusercontent.com/leiyiyan/resource/main/subscribe/leiyiyan.boxjs.json

[Script]
http-response ^https?:\/\/developer\.aliyun\.com\/developer\/api\/my\/user\/getUser script-path=https://gist.githubusercontent.com/Sliverkiss/ba14fe4fb20b640c17118c445461f7c6/raw/aliyunWeb.js, requires-body=true, timeout=60, tag=阿里云Web Cookie
cron "0 7,13 * * *" script-path=https://gist.githubusercontent.com/Sliverkiss/ba14fe4fb20b640c17118c445461f7c6/raw/aliyunWeb.js, tag=阿里云社区日常任务

[MITM]
hostname = developer.aliyun.com

====================================
⚠️【免责声明】
------------------------------------------
1、此脚本仅用于学习研究，不保证其合法性、准确性、有效性，请根据情况自行判断，本人对此不承担任何保证责任。
2、由于此脚本仅用于学习研究，您必须在下载后 24 小时内将所有内容从您的计算机或手机或任何存储设备中完全删除，若违反规定引起任何事件本人对此均不负责。
3、请勿将此脚本用于任何商业或非法目的，若违反规定请自行对此负责。
4、此脚本涉及应用与本人无关，本人对因此引起的任何隐私泄漏或其他后果不承担任何责任。
5、本人对任何脚本引发的问题概不负责，包括但不限于由脚本错误引起的任何损失和损害。
6、如果任何单位或个人认为此脚本可能涉嫌侵犯其权利，应及时通知并提供身份证明，所有权证明，我们将在收到认证文件确认后删除此脚本。
7、所有直接或间接使用、查看此脚本的人均应该仔细阅读此声明。本人保留随时更改或补充此声明的权利。一旦您使用或复制了此脚本，即视为您已接受此免责声明。
 */

const _0x3a5790=_0x93fe;(function(_0x2036c7,_0x25db3b){const _0x4c4e9f=_0x93fe,_0x2756c4=_0x2036c7();while(!![]){try{const _0x4dc1ea=parseInt(_0x4c4e9f(0x1a1))/0x1*(-parseInt(_0x4c4e9f(0x18f))/0x2)+parseInt(_0x4c4e9f(0x19e))/0x3+-parseInt(_0x4c4e9f(0x24f))/0x4*(parseInt(_0x4c4e9f(0x192))/0x5)+parseInt(_0x4c4e9f(0x187))/0x6+parseInt(_0x4c4e9f(0x172))/0x7+-parseInt(_0x4c4e9f(0x204))/0x8+parseInt(_0x4c4e9f(0x263))/0x9;if(_0x4dc1ea===_0x25db3b)break;else _0x2756c4['push'](_0x2756c4['shift']());}catch(_0x2b90eb){_0x2756c4['push'](_0x2756c4['shift']());}}}(_0x473e,0x2a200));const $=new Env(_0x3a5790(0x2a9)),ckName=_0x3a5790(0x2af),controlTime=($[_0x3a5790(0x1cb)]()?process[_0x3a5790(0x1ca)][_0x3a5790(0x286)]:$[_0x3a5790(0x186)](_0x3a5790(0x286)))||'12';$[_0x3a5790(0x29a)]='';const Notify=0x1,notify=$[_0x3a5790(0x1cb)]()?require(_0x3a5790(0x222)):'';let envSplitor=['@'];function _0x473e(){const _0x424eca=['ebook','wxCode','❌加载模块失败，请检查模块路径是否正常','includes','ask','HlAPq','⛔️\x20获取UccCsrfToken失败!\x20','zJGLp','.answer-list','method','getdata','316146DMQapV','GjjMA','owzzF','\x20>>\x20Check\x20ck\x20error!','pMSlg','then','⛔️\x20获取电子书列表失败!\x20','🔷账号','187074iZWyHS','join','IgLYF','91210KNMBMj','default','⛔️\x20查询待收获积分列表失败!\x20','fromEntries','gvuPh','⛔️\x20','false','application/json;charset=UTF-8','JvhVu','/sign/assessSignInBonusQualification','通义大模型','数据库','884220AbpKMq','vuteT','yq-comment-type-article','1NTnYxl','NKMKL','toObj','oqNuu','\x0a-----------','bjnKD','✅\x20收取积分：','getUser','getUserTotalPendingScore','⛔️\x20随机获取问题问答失败!\x20',',\x20当前积分:\x20','form','actions','eNjbB','❌loadModule\x20run\x20error\x20=>\x20','DKLgG','✅\x20待领取积分：','Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2016_6\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Mobile/15E148\x20AliApp(Aliyun/6.7.1)\x20WindVane/8.7.2\x201170x2532\x20WK','ihzMf','getEbooks','✅\x20评价电子书：\x20','polardb','Cheerio','❌未检测到ck，请添加环境变量','.askProduct-item','round','dcVqV','setjson','/task/actionLog','undefined','cdrXa','data-id','aliyun_linux','map','set','taINv','uzdZn','toString','race','lJsuX','✅\x20抽奖\x20-\x20','env','isNode','addComment','findIndex','href','nHfOJ','cWpsT','Gqqtw','sEHvX','Cheerio_code','finally','txUwD','yMZzJ','getFavors','activityCode','⛔️\x20评价电子书失败!\x20','❌checkCodeServer\x20run\x20error\x20=>\x20','qAqWS','XSgif','计算巢','未找到CK','wglhN','signin','cUeRs','string','index','https://developer.aliyun.com/ask/','✅\x20开始取消文章的点赞与收藏记录','ZNeaK','opts','yysXv','modelscope','弹性计算','cookie','body','json','200','getScript','⛔️\x20查询领奖条件失败!\x20','message','userName','getAsks','VZpTC','omZDt','sendNotify','receiveSignInBonus','catch','https://developer.aliyun.com/group/aliware/article_hot?pageNum=','wait','getTime','log','yq-article',',\x20标题：','WJaRS','GlCKf','IsOrT','Content-Type','computenest','2135480atVfVj','大数据与机器学习','tongyi','/score/pending/receiveAllPendingScore?appCode=developer','setHours','⛔️\x20请求发起失败！','jdESF','indexOf','.answer-item','queryStr','load','NdaAs','luoshen','Ytyjk','ModelScope模型即服务','text','NJuXC','VemFZ','uMmFf','❌获取Cookie失败!','actionCode','QKVZh','auhcF','https://developer.aliyun.com/developer/api/my/subscribe/listUserFavor','⛔️\x20收取积分失败!\x20',':开始下载Cheerio模块','HRNaY','⛔️\x20获取签到任务列表失败!\x20','很棒的一本书','.community-list','./sendNotify','sxOKf','https://mirror.ghproxy.com/https://raw.githubusercontent.com/Yuheng0101/X/main/Utils/cheerio.js','HZYXc','baseUrl','iot','jjaYI','SfeAU','post','notifyList','PolarDB开源','龙蜥操作系统','NBVpx','getUserSpaceSignInDetail','likeOrNotLike','collect','assessSignInBonusQualification','debug\x20error\x20=>\x20t=','isSurge','bmDwW','floor','name','❌checkEnv\x20run\x20error\x20=>\x20','COFFa',':缓存中存在Cheerio模块,跳过下载','SlazX','ulp.michelin.com.cn','用户需要去登录','ecs','VleIz','concat','⛔️\x20签到失败!\x20','NzLTl','CTbie','感谢博主的分享','物联网','@codeServer.open','BNTdN','IVGwW','aliyun-public-share',':\x20获得\x20','developer-ecology-group','⛔️\x20抽奖\x20-\x20','ezNBv','⛔️\x20抽奖失败!\x20','60xEXKgc','https://ulp.michelin.com.cn/bff/wechat/login/','QFuGL','keys','DBxtV','❌获取code授权失败！请检查服务器运行是否正常\x20=>\x20尝试读取数据持久化\x20','storage','codeOpen','CFiTP','taskList','NVVTg','notifyMsg','zbysw','getAskDetail','userId','filter','DcPLL','debug','toStr','dORzX','2483496cLocFS','FHxio','headers','aliyun-public-like','✅获取code授权成功！当前code数量为','✅\x20文章评论：\x20','glpfH','objectId','is_debug','interactData','\x20积分','❌请求发起失败！原因为：','HdfUN','entries','now','aliyun-public-favorite','uOMzq','getUccCsrfToken','oBdju','https://developer.aliyun.com/ebook/index/__0_0_0_','✅\x20随机电子书id：\x20','setdata','失败!\x20','IS_DEDUG','fLuLH','msg','modelstudio','/sign/getUserSpaceSignInDetail','当前请求已超时','find','QSuLy','all','OPTIONS','addBookComment','@codeServer.address','aliyunWeb_time','sXvhr','✅\x20签到\x20-\x20','access_token','/sign/receiveSignInBonus','WvgDZ','jsonp_','百炼大模型','split','.askProduct-item-info-answer','https://developer.aliyun.com/ebook/','⛔️\x20回答点赞失败!\x20','cloudnative','ckStatus','code','data','QEbXw','wRgIJ','uyMSy','toLowerCase','appid','ApzDI','url','JCPXK','LWyOo','http','getArticles','gmtEnableStart','cLQWR','ChPlT','avatar','/my/score/getUserScore?appCode=developer','个账号','length','getRandomTime','阿里云社区','BiYOH','XBfVu','文章收藏','get','HTYFc','aliyunWeb_data','https://developer.aliyun.com/developer/api','aKGvZ','------------\x0a','✅Cheerio模块加载成功,请继续','.feed-item','FNLxX','更新token成功!','codeFuc','taskGroupId','⛔️\x20获取文章列表失败!\x20','title','replace','adDGT','host','uccCsrfToken','timeout','/ebook/','LhEkM','.community-detail-content','⛔️\x20查询待领取积分失败!\x20','codeServer','Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_7)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/122.0.0.0\x20Safari/537.36','fetch','https://developer.aliyun.com/','.feed-item-content-title\x20h3','done','token','jpTGD','⛔️\x20main\x20run\x20error\x20=>\x20','zdygz','wQjrs','codeServer_open','random','KgrzR','https://developer.aliyun.com/ask?pageNum=','Smigl','MxyoX','xUjdb','EFDuY','⛔️\x20获取\x20csrf\x20失败!\x20','bigdata','finishRule','.ebook-home-item','yitian','getCsrfToken','pJDSK','FDiGy','/my/user/getUser','parse','devops','lastIndexOf','云原生','qvCZX','Bearer\x20','voteAnswer','fquHF','push','✅\x20回答点赞：\x20','ggaFC','substring','https://developer.aliyun.com/csrfToken','1282897jhfZUJ','true','RXEet','SAfss','🎉\x20当前积分:\x20','getTasks','fcEWl','云存储','attr','viapi'];_0x473e=function(){return _0x424eca;};return _0x473e();}var userCookie=($[_0x3a5790(0x1cb)]()?process[_0x3a5790(0x1ca)][ckName]:$['getdata'](ckName))||'';let userList=[],userIdx=0x0,userCount=0x0;const taskGroup=[{'code':'','name':'我的社区'},{'code':_0x3a5790(0x23e),'name':_0x3a5790(0x1ea)},{'code':_0x3a5790(0x203),'name':_0x3a5790(0x1dd)},{'code':_0x3a5790(0x160),'name':'倚天'},{'code':_0x3a5790(0x292),'name':_0x3a5790(0x168)},{'code':_0x3a5790(0x255),'name':_0x3a5790(0x179)},{'code':_0x3a5790(0x210),'name':'飞天洛神云网络'},{'code':'database','name':_0x3a5790(0x19d)},{'code':_0x3a5790(0x1b6),'name':_0x3a5790(0x22c)},{'code':_0x3a5790(0x15d),'name':_0x3a5790(0x205)},{'code':_0x3a5790(0x1e9),'name':_0x3a5790(0x212)},{'code':_0x3a5790(0x17b),'name':'视觉智能'},{'code':_0x3a5790(0x227),'name':_0x3a5790(0x245)},{'code':_0x3a5790(0x166),'name':'云效DevOps'},{'code':_0x3a5790(0x1c1),'name':_0x3a5790(0x22d)},{'code':_0x3a5790(0x27d),'name':_0x3a5790(0x28d)},{'code':_0x3a5790(0x206),'name':_0x3a5790(0x19c)}];$['is_debug']=($[_0x3a5790(0x1cb)]()?process[_0x3a5790(0x1ca)][_0x3a5790(0x27a)]:$[_0x3a5790(0x186)](_0x3a5790(0x26b)))||_0x3a5790(0x198),$[_0x3a5790(0x22b)]=[],$[_0x3a5790(0x25a)]=[],$[_0x3a5790(0x149)]=($[_0x3a5790(0x1cb)]()?process[_0x3a5790(0x1ca)]['codeServer_address']:$[_0x3a5790(0x186)](_0x3a5790(0x285)))||'',$[_0x3a5790(0x256)]=($[_0x3a5790(0x1cb)]()?process[_0x3a5790(0x1ca)][_0x3a5790(0x154)]:$[_0x3a5790(0x186)](_0x3a5790(0x246)))||_0x3a5790(0x198),$[_0x3a5790(0x17d)]=$[_0x3a5790(0x256)]!='false'&&$[_0x3a5790(0x149)]&&$[_0x3a5790(0x29a)];let pendingScore=0x0,userScore=0x0;async function main(){const _0x139b12=_0x3a5790,_0x54b5ce={'vxidd':function(_0xb92b7f,_0x168298){return _0xb92b7f<_0x168298;},'EwwAm':_0x139b12(0x17c),'cLQWR':function(_0x29d037,_0x2d8f73){return _0x29d037<_0x2d8f73;},'IVGwW':_0x139b12(0x266),'SlazX':function(_0x25ea7a,_0x21ea20){return _0x25ea7a===_0x21ea20;},'HTYFc':_0x139b12(0x249),'LhEkM':_0x139b12(0x180),'NKMKL':function(_0x39f162,_0x220f07){return _0x39f162||_0x220f07;},'FNLxX':function(_0x350a68,_0x174f76){return _0x350a68(_0x174f76);}};try{$[_0x139b12(0x1fc)]('\x0a==================\x20任务\x20==================\x0a');for(let _0x2d3f51 of userList){console[_0x139b12(0x1fc)](_0x139b12(0x18e)+_0x2d3f51[_0x139b12(0x1e3)]+'\x20>>\x20Start\x20work'),console[_0x139b12(0x1fc)]('随机延迟'+_0x2d3f51['getRandomTime']()+'秒');const _0x26ab14=Date[_0x139b12(0x271)]();userScore=await _0x2d3f51[_0x139b12(0x26c)]()??{};if(_0x2d3f51[_0x139b12(0x293)]){if(_0x54b5ce['vxidd'](_0x26ab14,new Date(new Date()[_0x139b12(0x208)](Math[_0x139b12(0x236)](controlTime),0x0,0x0,0x0))[_0x139b12(0x1fb)]())){for(let _0x37f5d1 of taskGroup){const _0x12b339=await _0x2d3f51[_0x139b12(0x22f)](_0x37f5d1['code']),_0x53b88c=await _0x2d3f51[_0x139b12(0x177)](_0x12b339);await _0x2d3f51[_0x139b12(0x1e0)](_0x53b88c,_0x37f5d1['name']),await $[_0x139b12(0x1fa)](_0x2d3f51[_0x139b12(0x2a8)]());const _0x1815a9=await _0x2d3f51['assessSignInBonusQualification'](_0x12b339,_0x37f5d1[_0x139b12(0x237)]);await $['wait'](_0x2d3f51[_0x139b12(0x2a8)]()),_0x1815a9&&(await _0x2d3f51[_0x139b12(0x1f7)](_0x12b339,_0x37f5d1[_0x139b12(0x237)]),await $[_0x139b12(0x1fa)](_0x2d3f51['getRandomTime']()));}const _0x16834a=await _0x2d3f51[_0x139b12(0x1b4)]();await $[_0x139b12(0x1fa)](_0x2d3f51[_0x139b12(0x2a8)]());const _0x26f181=await _0x2d3f51[_0x139b12(0x161)](_0x16834a,_0x54b5ce['EwwAm']);await $['wait'](_0x2d3f51[_0x139b12(0x2a8)]()),await _0x2d3f51[_0x139b12(0x284)](_0x16834a,_0x26f181),await $[_0x139b12(0x1fa)](_0x2d3f51[_0x139b12(0x2a8)]());for(let _0x5c409f=0x0;_0x54b5ce[_0x139b12(0x2a2)](_0x5c409f,0x5);_0x5c409f++){const _0xd1ac2a=await _0x2d3f51[_0x139b12(0x2a0)]();await $['wait'](_0x2d3f51[_0x139b12(0x2a8)]()),await _0x2d3f51[_0x139b12(0x230)](_0xd1ac2a,_0x54b5ce[_0x139b12(0x248)],0x0),await $[_0x139b12(0x1fa)](_0x2d3f51[_0x139b12(0x2a8)]()),await _0x2d3f51['likeOrNotLike'](_0xd1ac2a,'aliyun-public-favorite',0x0),await $[_0x139b12(0x1fa)](_0x2d3f51[_0x139b12(0x2a8)]());_0x54b5ce[_0x139b12(0x23b)](_0x5c409f,0x0)&&(await _0x2d3f51['addComment'](_0xd1ac2a),await $['wait'](_0x2d3f51[_0x139b12(0x2a8)]()),await _0x2d3f51[_0x139b12(0x230)](_0xd1ac2a,_0x54b5ce[_0x139b12(0x2ae)],0x0),await $[_0x139b12(0x1fa)](_0x2d3f51['getRandomTime']()));const _0x47bc94=await _0x2d3f51['getAsks']();await $['wait'](_0x2d3f51[_0x139b12(0x2a8)]());if(_0x47bc94&&_0x47bc94?.['id']){const _0x25cd6e=await _0x2d3f51[_0x139b12(0x161)](_0x47bc94['id'],_0x54b5ce[_0x139b12(0x146)]);await $[_0x139b12(0x1fa)](_0x2d3f51[_0x139b12(0x2a8)]());const _0x92413d=await _0x2d3f51[_0x139b12(0x25c)](_0x47bc94);await $[_0x139b12(0x1fa)](_0x2d3f51[_0x139b12(0x2a8)]()),_0x92413d&&(await _0x2d3f51['voteAnswer'](_0x47bc94['id'],_0x92413d,_0x25cd6e,0x1),await $[_0x139b12(0x1fa)](_0x2d3f51[_0x139b12(0x2a8)]()));}}pendingScore=await _0x2d3f51[_0x139b12(0x1a9)](),$[_0x139b12(0x13f)]='获得待领取积分:\x20'+pendingScore,DoubleLog(_0x139b12(0x176)+userScore+',\x20待领取积分:\x20'+pendingScore);}else{for(let _0x1813eb of taskGroup){const _0xbd9c3c=await _0x2d3f51[_0x139b12(0x22f)](_0x1813eb['code']),_0x320375=await _0x2d3f51[_0x139b12(0x232)](_0xbd9c3c,_0x1813eb['name']);await $[_0x139b12(0x1fa)](_0x2d3f51[_0x139b12(0x2a8)]()),_0x320375&&(await _0x2d3f51[_0x139b12(0x1f7)](_0xbd9c3c,_0x1813eb[_0x139b12(0x237)]),await $[_0x139b12(0x1fa)](_0x2d3f51[_0x139b12(0x2a8)]()));}pendingScore=await _0x2d3f51[_0x139b12(0x1a9)](),await $[_0x139b12(0x1fa)](_0x2d3f51[_0x139b12(0x2a8)]()),await _0x2d3f51[_0x139b12(0x231)](),await $['wait'](_0x2d3f51['getRandomTime']()),await $[_0x139b12(0x1fa)](_0x2d3f51[_0x139b12(0x2a8)]());const _0x2d7edf=await _0x2d3f51[_0x139b12(0x1d7)]()??[];await $['wait'](_0x2d3f51[_0x139b12(0x2a8)]());if(_0x2d7edf[_0x139b12(0x2a7)])for(let _0x2cbba2 of _0x2d7edf){await _0x2d3f51[_0x139b12(0x230)](_0x2cbba2[_0x139b12(0x26a)],_0x54b5ce[_0x139b12(0x248)],0x1),await $[_0x139b12(0x1fa)](_0x2d3f51[_0x139b12(0x2a8)]()),await _0x2d3f51['likeOrNotLike'](_0x2cbba2['objectId'],_0x139b12(0x272),0x1),await $[_0x139b12(0x1fa)](_0x2d3f51[_0x139b12(0x2a8)]());}let _0x46e9ed=await _0x2d3f51[_0x139b12(0x26c)]()??{};$[_0x139b12(0x13f)]='本次运行共获得'+_0x54b5ce[_0x139b12(0x1a2)](pendingScore,0x0)+'积分',_0x54b5ce[_0x139b12(0x13a)](DoubleLog,'🎉\x20领取积分:\x20'+pendingScore+_0x139b12(0x1ab)+_0x46e9ed);}}else $[_0x139b12(0x25a)][_0x139b12(0x16d)]('❌账号'+(_0x2d3f51[_0x139b12(0x1f2)]||_0x2d3f51['index'])+_0x139b12(0x18a));$['notifyList'][_0x139b12(0x16d)]({'id':_0x2d3f51[_0x139b12(0x1e3)],'avatar':_0x2d3f51[_0x139b12(0x2a4)],'message':$[_0x139b12(0x25a)]}),$['notifyMsg']=[];}}catch(_0x1eed5f){$[_0x139b12(0x1fc)](_0x139b12(0x151)+_0x1eed5f);throw new Error(_0x139b12(0x151)+_0x1eed5f);}}class UserInfo{constructor(_0x1631b6){const _0x3f6266=_0x3a5790,_0x5bed2a={'auhcF':_0x3f6266(0x1e2),'fquHF':function(_0xa9d1f1,_0x4e2bca){return _0xa9d1f1(_0x4e2bca);},'taINv':function(_0x28fc39,_0x52cec4){return _0x28fc39+_0x52cec4;},'FHxio':_0x3f6266(0x2b0),'HRNaY':_0x3f6266(0x14a),'jjaYI':_0x3f6266(0x14c)};this['index']=++userIdx,this[_0x3f6266(0x14f)]=_0x1631b6['token']||_0x1631b6,this[_0x3f6266(0x25d)]=_0x1631b6[_0x3f6266(0x25d)],this['userName']=_0x1631b6[_0x3f6266(0x1f2)],this[_0x3f6266(0x2a4)]=_0x1631b6[_0x3f6266(0x2a4)],this[_0x3f6266(0x293)]=!![],this[_0x3f6266(0x226)]='',this[_0x3f6266(0x142)]=_0x5bed2a[_0x3f6266(0x264)],this[_0x3f6266(0x265)]={'Cookie':this[_0x3f6266(0x14f)],'User-Agent':_0x5bed2a[_0x3f6266(0x21e)],'Referer':_0x5bed2a[_0x3f6266(0x228)]},this[_0x3f6266(0x2a8)]=()=>randomInt(0x1,0x5),this[_0x3f6266(0x14b)]=async _0x50b310=>{const _0x376840=_0x3f6266;try{if(typeof _0x50b310===_0x5bed2a[_0x376840(0x21a)])_0x50b310={'url':_0x50b310};if(_0x50b310?.[_0x376840(0x29c)]?.['startsWith']('/'))_0x50b310[_0x376840(0x29c)]=this['host']+_0x50b310[_0x376840(0x29c)];const _0x49b3af=await _0x5bed2a[_0x376840(0x16c)](Request,{..._0x50b310,'headers':_0x50b310[_0x376840(0x265)]||this[_0x376840(0x265)],'url':_0x50b310[_0x376840(0x29c)]||this[_0x376840(0x226)]});debug(_0x49b3af,_0x50b310?.[_0x376840(0x29c)]?.[_0x376840(0x140)](/\/+$/,'')[_0x376840(0x170)](_0x5bed2a[_0x376840(0x1c4)](_0x50b310?.[_0x376840(0x29c)]?.[_0x376840(0x167)]('/'),0x1)));if(_0x49b3af?.[_0x376840(0x294)]==0x9c41)throw new Error(_0x49b3af?.[_0x376840(0x1f1)]||_0x376840(0x23d));return _0x49b3af;}catch(_0x3bb3a4){this[_0x376840(0x293)]=![],$[_0x376840(0x1fc)](_0x376840(0x209)+_0x3bb3a4);}};}async[_0x3a5790(0x1a8)](){const _0x420243=_0x3a5790,_0x2d8a69={'jpTGD':_0x420243(0x2ad)};try{const _0x138572={'url':_0x420243(0x164),'type':_0x2d8a69[_0x420243(0x150)]};await this[_0x420243(0x14b)](_0x138572);}catch(_0x203c54){this[_0x420243(0x293)]=![],$['log']('⛔️\x20获取签到任务列表失败!\x20'+_0x203c54);}}async[_0x3a5790(0x232)](_0x38703f,_0x43e920){const _0x29b5d3=_0x3a5790,_0x3f20d5={'zdygz':'get'};try{const _0x261830={'url':_0x29b5d3(0x19b),'type':_0x3f20d5[_0x29b5d3(0x152)],'params':{'taskGroupId':_0x38703f}};let _0x5c8e2e=await this['fetch'](_0x261830);return _0x5c8e2e?.[_0x29b5d3(0x295)];}catch(_0x402c96){this[_0x29b5d3(0x293)]=![],$[_0x29b5d3(0x1fc)](_0x29b5d3(0x1f0)+_0x402c96);}}async[_0x3a5790(0x1f7)](_0x2aa108,_0x548741){const _0x12d052=_0x3a5790,_0x2b9dd7={'IZtNT':_0x12d052(0x28a),'PDBdE':_0x12d052(0x22a),'MxyoX':_0x12d052(0x1ac),'owzzF':'200','NBVpx':function(_0x16482d,_0xe2d315){return _0x16482d||_0xe2d315;},'vuteT':_0x12d052(0x193),'HlxCJ':function(_0x15e9da,_0x2320b7){return _0x15e9da||_0x2320b7;}};try{const _0x486652={'url':_0x2b9dd7['IZtNT'],'type':_0x2b9dd7['PDBdE'],'dataType':_0x2b9dd7[_0x12d052(0x159)],'body':{'taskGroupId':_0x2aa108}};let _0x191f46=await this[_0x12d052(0x14b)](_0x486652);if(_0x191f46?.[_0x12d052(0x294)]==_0x2b9dd7[_0x12d052(0x189)]){const _0x7892bc=_0x191f46?.[_0x12d052(0x295)]||0x0;$[_0x12d052(0x1fc)](_0x12d052(0x1c9)+_0x2b9dd7[_0x12d052(0x22e)](_0x548741,_0x2b9dd7[_0x12d052(0x19f)])+_0x12d052(0x24a)+_0x7892bc+_0x12d052(0x26d));}else $['log'](_0x12d052(0x24c)+_0x2b9dd7['HlxCJ'](_0x548741,_0x2b9dd7[_0x12d052(0x19f)])+':\x20'+_0x191f46?.[_0x12d052(0x1f1)]);}catch(_0x450de2){this[_0x12d052(0x293)]=![],$[_0x12d052(0x1fc)](_0x12d052(0x24e)+_0x450de2);}}async[_0x3a5790(0x22f)](_0x1f3780){const _0xf87066=_0x3a5790,_0x9d0b71={'MBQhK':_0xf87066(0x2ad)};try{const _0x2ba17d={'url':_0xf87066(0x27e),'type':_0x9d0b71['MBQhK'],'params':{'excode':_0x1f3780}};let _0x500c96=await this['fetch'](_0x2ba17d);const _0x3e39c5=_0x500c96?.[_0xf87066(0x295)]?.[_0xf87066(0x13d)];return _0x3e39c5;}catch(_0x33ff7c){this[_0xf87066(0x293)]=![],$['log'](_0xf87066(0x21f)+_0x33ff7c);}}async[_0x3a5790(0x177)](_0x3c8944){const _0x508518=_0x3a5790,_0x347c12={'QFuGL':function(_0x3bd825,_0xf63b6f){return _0x3bd825>=_0xf63b6f;},'NdaAs':function(_0x386fad,_0x1a4099){return _0x386fad<=_0x1a4099;}};try{const _0x5e1a7e={'url':'/task/getTaskGroup?groupId='+_0x3c8944,'type':_0x508518(0x2ad)};let _0xf3b5d8=await this[_0x508518(0x14b)](_0x5e1a7e);const _0x12cc0b=_0xf3b5d8?.['data']?.[_0x508518(0x258)];let _0x20909d={};if(_0x12cc0b[_0x508518(0x2a7)]){const _0x4622cf=new Date()[_0x508518(0x1fb)]();for(let _0x25f2fe of _0x12cc0b){if(_0x347c12[_0x508518(0x251)](_0x4622cf,_0x25f2fe[_0x508518(0x2a1)])&&_0x347c12[_0x508518(0x20f)](_0x4622cf,_0x25f2fe['gmtEnableEnd'])){const _0xef4fa1=JSON[_0x508518(0x165)](_0x25f2fe[_0x508518(0x15e)][_0x508518(0x140)](/&quot;/g,'\x22'));_0x20909d[_0x508518(0x218)]=_0xef4fa1[_0x508518(0x1ad)][0x0][_0x508518(0x218)],_0x20909d[_0x508518(0x1d8)]=_0xef4fa1['actions'][0x0][_0x508518(0x218)],_0x20909d[_0x508518(0x26a)]=_0xef4fa1[_0x508518(0x1ad)][0x0][_0x508518(0x26a)];}}}return _0x20909d;}catch(_0x2f612b){this[_0x508518(0x293)]=![],$['log'](_0x508518(0x21f)+_0x2f612b);}}async['signin'](_0x1900b4,_0x16e9a9){const _0x4f57ea=_0x3a5790,_0x48797c={'uyMSy':_0x4f57ea(0x1bd),'XSgif':function(_0xf4f81f,_0x4f9bea){return _0xf4f81f||_0x4f9bea;}};try{const _0x12b927={'url':_0x48797c[_0x4f57ea(0x298)],'type':_0x4f57ea(0x22a),'dataType':'form','body':_0x1900b4};let _0xcb333b=await this[_0x4f57ea(0x14b)](_0x12b927);$[_0x4f57ea(0x1fc)](_0x4f57ea(0x288)+_0x48797c[_0x4f57ea(0x1dc)](_0x16e9a9,_0x4f57ea(0x193))+':\x20'+_0xcb333b?.[_0x4f57ea(0x1f1)]);}catch(_0x3f59fa){this[_0x4f57ea(0x293)]=![],$[_0x4f57ea(0x1fc)](_0x4f57ea(0x241)+_0x3f59fa);}}async[_0x3a5790(0x2a0)](){const _0x45ffad=_0x3a5790,_0x129f2d={'ChPlT':function(_0x5dee89,_0x5743ea){return _0x5dee89(_0x5743ea);},'COFFa':_0x45ffad(0x139),'dcVqV':_0x45ffad(0x1c0),'pImum':_0x45ffad(0x14d),'zJGLp':function(_0x84deff,_0x5a67e1){return _0x84deff+_0x5a67e1;},'ZNeaK':function(_0x3d1355,_0x2e4d40){return _0x3d1355*_0x2e4d40;},'eNjbB':_0x45ffad(0x2ad),'Gqqtw':function(_0x10b54a,_0x5e8479){return _0x10b54a*_0x5e8479;}};try{const _0x45ebc0=_0x129f2d[_0x45ffad(0x183)](Math[_0x45ffad(0x236)](_0x129f2d[_0x45ffad(0x1e6)](Math[_0x45ffad(0x155)](),0x1f)),0x1),_0x5b7107={'url':_0x45ffad(0x1f9)+_0x45ebc0,'type':_0x129f2d[_0x45ffad(0x1ae)]};let _0x32d8f3=await this[_0x45ffad(0x14b)](_0x5b7107);const _0x50d07f=$['Cheerio'][_0x45ffad(0x20e)](_0x32d8f3),_0x375f8b=_0x50d07f(_0x45ffad(0x147)),_0x13f3dd=_0x375f8b[_0x45ffad(0x280)](_0x45ffad(0x221))[_0x45ffad(0x1c2)]((_0x2471d3,_0x3acc07)=>{const _0x97bf17=_0x45ffad;return{'id':_0x129f2d[_0x97bf17(0x2a3)](_0x50d07f,_0x3acc07)[_0x97bf17(0x280)](_0x129f2d[_0x97bf17(0x239)])['attr'](_0x129f2d[_0x97bf17(0x1bb)]),'name':_0x129f2d[_0x97bf17(0x2a3)](_0x50d07f,_0x3acc07)[_0x97bf17(0x280)](_0x129f2d['pImum'])['text']()};})[_0x45ffad(0x2ad)](),_0x3a1826=_0x13f3dd[Math[_0x45ffad(0x236)](_0x129f2d[_0x45ffad(0x1d1)](Math[_0x45ffad(0x155)](),_0x13f3dd['length']))],{id:_0x1c6017,name:_0x3df378}=_0x3a1826;return $[_0x45ffad(0x1fc)]('✅\x20随机获取文章id：\x20'+_0x1c6017+_0x45ffad(0x1fe)+_0x3df378),_0x1c6017;}catch(_0x1cd4c0){this[_0x45ffad(0x293)]=![],$['log'](_0x45ffad(0x13e)+_0x1cd4c0);}}async[_0x3a5790(0x1b4)](){const _0x2f6278=_0x3a5790,_0x4e23ad={'wRgIJ':_0x2f6278(0x1ce),'VleIz':_0x2f6278(0x145),'cUeRs':function(_0x1c37a1,_0x18a631){return _0x1c37a1(_0x18a631);},'UhqFL':'.ebook-home-title','Smigl':function(_0x4a8279,_0x4f2295){return _0x4a8279+_0x4f2295;},'dORzX':'get','HlAPq':function(_0x25d3ca,_0x2a27d1){return _0x25d3ca(_0x2a27d1);},'ihzMf':'.ebook-home-list','FDiGy':_0x2f6278(0x15f),'qAqWS':function(_0x3408b9,_0x187199){return _0x3408b9*_0x187199;}};try{const _0x5bb65e=_0x4e23ad[_0x2f6278(0x158)](Math[_0x2f6278(0x236)](Math[_0x2f6278(0x155)]()*0x1f5),0x1),_0x757c3b={'url':_0x2f6278(0x276)+_0x5bb65e,'type':_0x4e23ad[_0x2f6278(0x262)]};let _0x38012b=await this[_0x2f6278(0x14b)](_0x757c3b);const _0xdaff2a=$[_0x2f6278(0x1b7)][_0x2f6278(0x20e)](_0x38012b),_0x2e0f7f=_0x4e23ad[_0x2f6278(0x181)](_0xdaff2a,_0x4e23ad[_0x2f6278(0x1b3)]),_0x38b2f4=_0x2e0f7f['find'](_0x4e23ad[_0x2f6278(0x163)])[_0x2f6278(0x1c2)]((_0x3a2ce7,_0x82e0a2)=>{const _0x414bda=_0x2f6278;return{'id':_0xdaff2a(_0x82e0a2)['attr'](_0x4e23ad[_0x414bda(0x297)])['replace'](_0x4e23ad[_0x414bda(0x23f)],''),'name':_0x4e23ad[_0x414bda(0x1e1)](_0xdaff2a,_0x82e0a2)[_0x414bda(0x280)](_0x4e23ad['UhqFL'])[_0x414bda(0x213)]()};})[_0x2f6278(0x2ad)](),_0x2d86e9=_0x38b2f4[Math[_0x2f6278(0x236)](_0x4e23ad[_0x2f6278(0x1db)](Math[_0x2f6278(0x155)](),_0x38b2f4['length']))],{id:_0x319fb5,name:_0x3eac55}=_0x2d86e9;return $[_0x2f6278(0x1fc)](_0x2f6278(0x277)+_0x319fb5+_0x2f6278(0x1fe)+_0x3eac55),_0x319fb5;}catch(_0xc3c10d){this[_0x2f6278(0x293)]=![],$[_0x2f6278(0x1fc)](_0x2f6278(0x18d)+_0xc3c10d);}}async[_0x3a5790(0x1f3)](){const _0x451328=_0x3a5790,_0x125e24={'XBfVu':function(_0x43640a,_0xc4c48c){return _0x43640a(_0xc4c48c);},'YwKyW':'data-id','MTpBb':_0x451328(0x28f),'aKGvZ':function(_0x217e4c,_0x48f581){return _0x217e4c+_0x48f581;},'yysXv':function(_0x487355,_0x20e51f){return _0x487355*_0x20e51f;},'BiYOH':function(_0x34955e,_0x2d40a7){return _0x34955e(_0x2d40a7);},'pJDSK':function(_0x4cc006,_0x1b450f){return _0x4cc006*_0x1b450f;}};try{const _0x3c3a40=_0x125e24[_0x451328(0x136)](Math['floor'](_0x125e24[_0x451328(0x1e8)](Math[_0x451328(0x155)](),0x1f)),0x1),_0x53484e={'url':_0x451328(0x157)+_0x3c3a40,'type':_0x451328(0x2ad)};let _0x5e89e0=await this[_0x451328(0x14b)](_0x53484e);const _0x1537c5=$['Cheerio'][_0x451328(0x20e)](_0x5e89e0),_0x49ed76=_0x125e24[_0x451328(0x2aa)](_0x1537c5,'.askProduct-list'),_0x59b8da=_0x49ed76[_0x451328(0x280)](_0x451328(0x1b9))[_0x451328(0x1c2)]((_0x40938d,_0x5c6ea7)=>{const _0x5ff4fc=_0x451328;return{'id':_0x125e24[_0x5ff4fc(0x2ab)](_0x1537c5,_0x5c6ea7)[_0x5ff4fc(0x17a)](_0x125e24['YwKyW'])||'','name':_0x125e24[_0x5ff4fc(0x2ab)](_0x1537c5,_0x5c6ea7)[_0x5ff4fc(0x280)]('.askProduct-item-title-text\x20h3')[_0x5ff4fc(0x213)]()||'','answer':_0x125e24[_0x5ff4fc(0x2ab)](parseInt,_0x125e24[_0x5ff4fc(0x2ab)](_0x1537c5,_0x5c6ea7)['find'](_0x125e24['MTpBb'])[_0x5ff4fc(0x213)]())||''};})[_0x451328(0x25e)]((_0x204a87,_0x1d5174)=>_0x1d5174['answer']>0x0)['get'](),_0x3423ab=_0x59b8da[Math[_0x451328(0x236)](_0x125e24[_0x451328(0x162)](Math[_0x451328(0x155)](),_0x59b8da[_0x451328(0x2a7)]))];if(_0x3423ab?.['id']&&_0x3423ab?.[_0x451328(0x237)]){const {id:_0x27cf2b,name:_0x4cf74b}=_0x3423ab;return $[_0x451328(0x1fc)]('✅\x20随机获取问答id：\x20'+_0x27cf2b+_0x451328(0x1fe)+_0x4cf74b),_0x3423ab;}return null;}catch(_0xc37186){this[_0x451328(0x293)]=![],$['log']('⛔️\x20获取问答列表失败!\x20'+_0xc37186);}}async[_0x3a5790(0x25c)](_0x270ee1){const _0x429cb7=_0x3a5790,_0x314dfb={'jMSYL':function(_0x414d1a,_0x334690){return _0x414d1a(_0x334690);},'YVLxx':_0x429cb7(0x1c0),'oolno':_0x429cb7(0x2ad),'IgLYF':function(_0x24838d,_0x2200c7){return _0x24838d(_0x2200c7);},'BNTdN':_0x429cb7(0x184),'DBxtV':_0x429cb7(0x20c)};try{const _0x3191a2={'url':_0x429cb7(0x1e4)+_0x270ee1['id'],'type':_0x314dfb['oolno']};let _0x2a9a89=await this[_0x429cb7(0x14b)](_0x3191a2);const _0x3f486f=$['Cheerio'][_0x429cb7(0x20e)](_0x2a9a89),_0x2a5e09=_0x314dfb[_0x429cb7(0x191)](_0x3f486f,_0x314dfb[_0x429cb7(0x247)]),_0x142f5b=_0x2a5e09['find'](_0x314dfb[_0x429cb7(0x253)])['map']((_0x1b3697,_0x130dd2)=>{const _0x253dc9=_0x429cb7;return{'id':_0x314dfb['jMSYL'](_0x3f486f,_0x130dd2)[_0x253dc9(0x17a)](_0x314dfb['YVLxx'])||''};})[_0x429cb7(0x2ad)](),_0x565ea7=_0x142f5b[Math['floor'](Math[_0x429cb7(0x155)]()*_0x270ee1['answer'])];if(_0x565ea7){const {id:_0x31b0cf}=_0x565ea7;return $[_0x429cb7(0x1fc)]('✅\x20随机获取问题问答id：\x20'+_0x31b0cf),_0x31b0cf;}return null;}catch(_0x343574){this[_0x429cb7(0x293)]=![],$[_0x429cb7(0x1fc)](_0x429cb7(0x1aa)+_0x343574);}}async['likeOrNotLike'](_0x2ca156,_0x5b0a8a,_0xd267cc){const _0x2e8d5c=_0x3a5790,_0x53190e={'RXEet':'https://ucc.aliyun.com/uccPagingComponent/likeOrNotLike','DKLgG':_0x2e8d5c(0x1fd),'ggaFC':function(_0x121833){return _0x121833();},'wQjrs':function(_0x4febd8,_0x285a4e){return _0x4febd8+_0x285a4e;},'ApzDI':function(_0x477f69,_0x21cc87){return _0x477f69===_0x21cc87;},'NVVTg':_0x2e8d5c(0x266),'oqNuu':function(_0x24eef6,_0xce60bf){return _0x24eef6===_0xce60bf;},'qvCZX':_0x2e8d5c(0x272),'btCBa':function(_0x2c1633,_0x4a5b30){return _0x2c1633===_0x4a5b30;},'QSuLy':_0x2e8d5c(0x249)};try{const _0x2a4d6d={'url':_0x53190e[_0x2e8d5c(0x174)],'type':'get','params':{'bizCategory':_0x53190e[_0x2e8d5c(0x1b0)],'actionCode':_0x5b0a8a,'objectId':_0x2ca156,'status':_0xd267cc,'uccCsrfToken':await this[_0x2e8d5c(0x274)](),'callback':_0x53190e[_0x2e8d5c(0x16f)](getCallback)}};await this['fetch'](_0x2a4d6d);let _0x6b4d1f=_0x53190e[_0x2e8d5c(0x153)]('文章',_0xd267cc===0x1?'取消':'');if(_0x53190e[_0x2e8d5c(0x29b)](_0x5b0a8a,_0x53190e[_0x2e8d5c(0x259)]))_0x6b4d1f+='点赞';else{if(_0x53190e[_0x2e8d5c(0x1a4)](_0x5b0a8a,_0x53190e[_0x2e8d5c(0x169)]))_0x6b4d1f+='收藏';else _0x53190e['btCBa'](_0x5b0a8a,_0x53190e[_0x2e8d5c(0x281)])&&(_0x6b4d1f+='分享');}$[_0x2e8d5c(0x1fc)]('✅\x20'+_0x6b4d1f+'成功:\x20'+_0x2ca156);}catch(_0xd1e745){this[_0x2e8d5c(0x293)]=![],$[_0x2e8d5c(0x1fc)](_0x2e8d5c(0x197)+taskType+_0x2e8d5c(0x279)+_0xd1e745);}}async[_0x3a5790(0x161)](_0x7a6e27,_0x52fc41){const _0x92ebd=_0x3a5790,_0x5cee8f={'CTbie':_0x92ebd(0x2ad),'pMSlg':'Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2016_6\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Mobile/15E148\x20AliApp(Aliyun/6.7.1)\x20WindVane/8.7.2\x201170x2532\x20WK'};try{const _0x1d281b={'url':_0x92ebd(0x171),'type':_0x5cee8f[_0x92ebd(0x243)],'headers':{'Cookie':this[_0x92ebd(0x14f)],'User-Agent':_0x5cee8f[_0x92ebd(0x18b)],'Referer':_0x92ebd(0x14c)+_0x52fc41+'/'+_0x7a6e27}},_0x18cd3e=await this['fetch'](_0x1d281b);return _0x18cd3e?.[_0x92ebd(0x14f)];}catch(_0x3a2b4c){this['ckStatus']=![],$[_0x92ebd(0x1fc)](_0x92ebd(0x15c)+_0x3a2b4c);}}async[_0x3a5790(0x16b)](_0x109acf,_0x3acc1d,_0x131e18,_0x304e00){const _0x470d82=_0x3a5790,_0x2ede67={'eVbWD':'post'};try{const _0x7774ef={'url':'https://developer.aliyun.com/developer/api/my/ask/voteAnswer','type':_0x2ede67['eVbWD'],'dataType':_0x470d82(0x1ac),'headers':{'Cookie':this[_0x470d82(0x14f)],'User-Agent':_0x470d82(0x1b2),'Referer':_0x470d82(0x1e4)+_0x109acf},'params':{'p_csrf':_0x131e18},'body':{'id':_0x3acc1d,'votes':_0x304e00}};await this[_0x470d82(0x14b)](_0x7774ef),$[_0x470d82(0x1fc)](_0x470d82(0x16e)+_0x109acf+'-'+_0x3acc1d);}catch(_0x337f23){this[_0x470d82(0x293)]=![],$[_0x470d82(0x1fc)](_0x470d82(0x291)+_0x337f23);}}async[_0x3a5790(0x284)](_0x3a68b3,_0x2dd32e){const _0x143783=_0x3a5790,_0x5e2e7d={'EFDuY':_0x143783(0x22a),'uOMzq':_0x143783(0x1ed),'zqCju':function(_0x141819,_0x35d443){return _0x141819==_0x35d443;},'adDGT':_0x143783(0x1ee)};try{const _0x48ba78={'url':'https://developer.aliyun.com/developer/api/ebook/mark/add','type':_0x5e2e7d[_0x143783(0x15b)],'dataType':_0x5e2e7d[_0x143783(0x273)],'headers':{'Cookie':this[_0x143783(0x14f)],'User-Agent':_0x143783(0x1b2),'Referer':_0x143783(0x290)+_0x3a68b3},'params':{'p_csrf':_0x2dd32e},'body':{'eBookId':_0x3a68b3,'score':0xa,'content':_0x143783(0x220)}},_0x5ed9d5=await this[_0x143783(0x14b)](_0x48ba78);_0x5e2e7d['zqCju'](_0x5ed9d5?.[_0x143783(0x294)],_0x5e2e7d[_0x143783(0x141)])?$[_0x143783(0x1fc)](_0x143783(0x1b5)+_0x3a68b3):$[_0x143783(0x1fc)](_0x143783(0x1d9)+_0x5ed9d5?.['message']);}catch(_0x55a97a){this['ckStatus']=![],$[_0x143783(0x1fc)](_0x143783(0x1d9)+_0x55a97a);}}async[_0x3a5790(0x1d7)](){const _0x45fdd1=_0x3a5790,_0xd7f23a={'NzLTl':_0x45fdd1(0x21b),'NJuXC':function(_0x161a6c,_0x4b04b4){return _0x161a6c===_0x4b04b4;},'HdfUN':'aliyun-public-like','uzdZn':'文章点赞'};try{const _0x136599={'url':_0xd7f23a[_0x45fdd1(0x242)],'type':'get','params':{'pageNum':0x1,'pageSize':0xa,'type':0x1}},_0x453e2=await this[_0x45fdd1(0x14b)](_0x136599),{list:_0x40b2b8}=_0x453e2?.['data'];if(_0x40b2b8[_0x45fdd1(0x2a7)])return $[_0x45fdd1(0x1fc)](_0x45fdd1(0x1e5)),_0x40b2b8;return[];}catch(_0x562a4d){this['ckStatus']=![],$[_0x45fdd1(0x1fc)](_0x45fdd1(0x197)+(_0xd7f23a[_0x45fdd1(0x214)](type,_0xd7f23a[_0x45fdd1(0x26f)])?_0xd7f23a[_0x45fdd1(0x1c5)]:_0x45fdd1(0x2ac))+_0x45fdd1(0x279)+_0x562a4d);}}async[_0x3a5790(0x1cc)](_0x59b799){const _0x45d430=_0x3a5790,_0x4feeac={'EKrvN':'https://ucc.aliyun.com/uccPagingComponent/addComment','SAfss':_0x45d430(0x2ad),'VBlfu':function(_0x3d801b,_0x2465ee){return _0x3d801b(_0x2465ee);},'GjjMA':_0x45d430(0x244),'fLuLH':'developer-ecology','TNcVW':_0x45d430(0x24b)};try{const _0x5a5e9f={'url':_0x4feeac['EKrvN'],'type':_0x4feeac[_0x45d430(0x175)],'params':{'content':_0x4feeac['VBlfu'](encodeURIComponent,_0x4feeac[_0x45d430(0x188)]),'objectId':_0x59b799,'bizCategory':_0x45d430(0x1a0),'commentType':0x0,'sourceAppCode':_0x4feeac[_0x45d430(0x27b)],'sourceBizCategory':_0x4feeac['TNcVW'],'uccCsrfToken':await this[_0x45d430(0x274)](),'callback':getCallback()}};await this[_0x45d430(0x14b)](_0x5a5e9f),$[_0x45d430(0x1fc)](_0x45d430(0x268)+_0x59b799);}catch(_0x96e893){this['ckStatus']=![],$[_0x45d430(0x1fc)]('⛔️\x20文章点赞失败!\x20'+_0x96e893);}}async['interactData'](){const _0x5c6735=_0x3a5790,_0x5b3b19={'VZpTC':_0x5c6735(0x2a5),'LWyOo':_0x5c6735(0x2ad)};try{const _0x5d7e02={'url':_0x5b3b19[_0x5c6735(0x1f4)],'type':_0x5b3b19[_0x5c6735(0x29e)]};let _0x3537f4=await this[_0x5c6735(0x14b)](_0x5d7e02);return _0x3537f4?.[_0x5c6735(0x295)];}catch(_0x4e8109){$[_0x5c6735(0x1fc)](_0x5c6735(0x194)+_0x4e8109);}}async[_0x3a5790(0x1a9)](){const _0x1b83ce=_0x3a5790,_0x487e8d={'YApzG':'/score/pending/getUserTotalPendingScore?appCode=developer'};try{const _0x442f5c={'url':_0x487e8d['YApzG'],'type':_0x1b83ce(0x2ad)};let _0x1374d2=await this['fetch'](_0x442f5c);return $[_0x1b83ce(0x1fc)](_0x1b83ce(0x1b1)+_0x1374d2?.[_0x1b83ce(0x295)]),_0x1374d2?.['data'];}catch(_0x5786a7){$['log'](_0x1b83ce(0x148)+_0x5786a7);}}async[_0x3a5790(0x231)](){const _0x54d477=_0x3a5790,_0x1f566f={'rzjSe':_0x54d477(0x2ad)};try{const _0x3bdd7f={'url':_0x54d477(0x207),'type':_0x1f566f['rzjSe']};let _0x15172e=await this['fetch'](_0x3bdd7f);return $[_0x54d477(0x1fc)](_0x54d477(0x1a7)+_0x15172e?.['data']),_0x15172e?.[_0x54d477(0x295)];}catch(_0x545470){$['log'](_0x54d477(0x21c)+_0x545470);}}async[_0x3a5790(0x274)](){const _0x1d3433=_0x3a5790,_0x109cc2={'ezNBv':'https://ucc.aliyun.com/uccPagingComponent/getUser','CFiTP':_0x1d3433(0x2ad)};try{const _0x2fe793={'url':_0x109cc2[_0x1d3433(0x24d)],'type':_0x109cc2[_0x1d3433(0x257)],'params':{'uccCsrfToken':'','callback':getCallback()}};let _0x20761c=await this[_0x1d3433(0x14b)](_0x2fe793);const _0x2cd258=_0x20761c[_0x1d3433(0x20b)]('{'),_0x65228d=_0x20761c[_0x1d3433(0x167)]('}'),_0x1ac2aa=_0x20761c['substring'](_0x2cd258,_0x65228d+0x1),_0x2f1612=JSON['parse'](_0x1ac2aa);return _0x2f1612['data'][_0x1d3433(0x143)];}catch(_0x5222a0){$[_0x1d3433(0x1fc)](_0x1d3433(0x182)+_0x5222a0);}}}function getCallback(){const _0x3ed615=_0x3a5790,_0x4e932f={'JCPXK':function(_0x1e943f,_0x2ae379){return _0x1e943f+_0x2ae379;},'vIVNK':_0x3ed615(0x28c)};return _0x4e932f['JCPXK'](_0x4e932f['JCPXK'](_0x4e932f[_0x3ed615(0x29d)](_0x4e932f['vIVNK'],Date['now']()),'_'),Math['ceil'](0x186a0*Math[_0x3ed615(0x155)]()));}async function getCookie(){const _0x2ce0b5=_0x3a5790,_0x25f325={'yMZzJ':function(_0x32d157,_0x197d16){return _0x32d157===_0x197d16;},'wglhN':_0x2ce0b5(0x283)};if($request&&_0x25f325[_0x2ce0b5(0x1d6)]($request[_0x2ce0b5(0x185)],_0x25f325[_0x2ce0b5(0x1df)]))return;const _0x1dbd86=ObjectKeys2LowerCase($request['headers']),_0x5b8aca=_0x1dbd86[_0x2ce0b5(0x1eb)],_0x203a04=$[_0x2ce0b5(0x1a3)]($response[_0x2ce0b5(0x1ec)]);if(!_0x203a04?.[_0x2ce0b5(0x295)]){$[_0x2ce0b5(0x27c)]($[_0x2ce0b5(0x237)],_0x2ce0b5(0x217),'');return;}const {nickname:_0x55ecbd,avatar:_0x3aab39}=_0x203a04?.[_0x2ce0b5(0x295)],_0x53753d={'userId':_0x55ecbd,'avatar':_0x3aab39,'token':_0x5b8aca,'userName':_0x55ecbd};userCookie=userCookie?JSON[_0x2ce0b5(0x165)](userCookie):[];const _0x2cadfa=userCookie[_0x2ce0b5(0x1cd)](_0x4ab529=>_0x4ab529[_0x2ce0b5(0x25d)]==_0x53753d[_0x2ce0b5(0x25d)]);userCookie[_0x2cadfa]?userCookie[_0x2cadfa]=_0x53753d:userCookie['push'](_0x53753d),$[_0x2ce0b5(0x1bc)](userCookie,ckName),$[_0x2ce0b5(0x27c)]($[_0x2ce0b5(0x237)],'🎉'+_0x53753d[_0x2ce0b5(0x1f2)]+_0x2ce0b5(0x13b),'');}async function loadModule(){const _0x13a094=_0x3a5790;try{return $[_0x13a094(0x1b7)]=await loadCheerio(),$[_0x13a094(0x1b7)]?!![]:![];}catch(_0x46bfec){throw new Error(_0x13a094(0x1af)+_0x46bfec);}}async function getWxToken(_0x2d7b99){const _0x2f3147=_0x3a5790,_0x1080fa={'DIjFS':_0x2f3147(0x1ed),'DcPLL':_0x2f3147(0x23c),'VemFZ':'Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2015_4_1\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Mobile/15E148\x20MicroMessenger/8.0.31(0x18001f37)\x20NetType/WIFI\x20Language/zh_CN','Ytyjk':'https://servicewechat.com/wx14413dafd16b9540/130/page-frame.html','cWpsT':function(_0x5cb559,_0x2328fa){return _0x5cb559(_0x2328fa);}};try{const _0x2120ee={'url':_0x2f3147(0x250)+_0x2d7b99,'dataType':_0x1080fa['DIjFS'],'headers':{'Host':_0x1080fa[_0x2f3147(0x25f)],'User-Agent':_0x1080fa[_0x2f3147(0x215)],'Referer':_0x1080fa[_0x2f3147(0x211)]}};let _0x4f0efc=await _0x1080fa[_0x2f3147(0x1d0)](Request,_0x2120ee),_0x23d95a=_0x2f3147(0x16a)+_0x4f0efc?.[_0x2f3147(0x295)]?.[_0x2f3147(0x14f)]?.[_0x2f3147(0x289)];return _0x23d95a;}catch(_0x4db522){$['log']('❌getWxToken\x20run\x20error\x20=>\x20'+_0x4db522);}}async function checkCodeServer(){const _0x419172=_0x3a5790,_0x311faf={'sCLHL':'codeServer_fun','WvgDZ':function(_0x23ab44,_0xc23f1d){return _0x23ab44(_0xc23f1d);},'sXvhr':function(_0x5029d3,_0x2fccdd){return _0x5029d3(_0x2fccdd);}};try{$[_0x419172(0x13c)]=($[_0x419172(0x1cb)]()?process[_0x419172(0x1ca)][_0x311faf['sCLHL']]:$[_0x419172(0x186)]('@codeServer.fun'))||'';let _0x5be82a=$['codeFuc']?(_0x311faf[_0x419172(0x28b)](eval,$[_0x419172(0x13c)]),await _0x311faf[_0x419172(0x287)](WxCode,$[_0x419172(0x29a)])):(await Request({'url':$[_0x419172(0x149)]+'/?wxappid='+$[_0x419172(0x29a)]}))?.['split']('|')||[];_0x5be82a=_0x5be82a[_0x419172(0x25e)](_0x3074f5=>_0x3074f5[_0x419172(0x1c6)]()[_0x419172(0x2a7)]===0x20),_0x311faf[_0x419172(0x287)](debug,_0x5be82a),!_0x5be82a[_0x419172(0x2a7)]?$[_0x419172(0x1fc)](_0x419172(0x254)):$[_0x419172(0x1fc)](_0x419172(0x267)+_0x5be82a[_0x419172(0x2a7)]);let _0x72e60d=await Promise[_0x419172(0x282)](_0x5be82a[_0x419172(0x1c2)](async _0x4e08fa=>{const _0x3e452f=await getWxToken(_0x4e08fa);return{'token':_0x3e452f};}));return _0x72e60d=_0x72e60d[_0x419172(0x25e)](_0x5ecd46=>Object[_0x419172(0x252)](_0x5ecd46)[_0x419172(0x2a7)]!==0x0),_0x72e60d;}catch(_0x5107e6){$[_0x419172(0x1fc)](_0x419172(0x1da)+_0x5107e6);}}async function checkEnv(){const _0x50ffc5=_0x3a5790,_0x329e71={'gvuPh':function(_0x555918){return _0x555918();}};try{let _0x3ba742=[];if($[_0x50ffc5(0x17d)])_0x3ba742=await _0x329e71[_0x50ffc5(0x196)](checkCodeServer)||[];else{if(!userCookie||!userCookie['length']){console['log'](_0x50ffc5(0x1de));return;}}if(!_0x3ba742[_0x50ffc5(0x2a7)]){const _0x1b867c=envSplitor[_0x50ffc5(0x280)](_0x21afce=>userCookie[_0x50ffc5(0x17f)](_0x21afce))||envSplitor[0x0];userCookie=$['toObj'](userCookie)||userCookie[_0x50ffc5(0x28e)](_0x1b867c),_0x3ba742=userCookie;}return userList[_0x50ffc5(0x16d)](..._0x3ba742['map'](_0x48a27f=>new UserInfo(_0x48a27f))[_0x50ffc5(0x25e)](Boolean)),userCount=userList[_0x50ffc5(0x2a7)],console[_0x50ffc5(0x1fc)]('共找到'+userCount+_0x50ffc5(0x2a6)),!![];}catch(_0x46e6d2){throw new Error(_0x50ffc5(0x238)+_0x46e6d2);}}async function Request(_0x21c4be){const _0x216f5a=_0x3a5790,_0x1a1e66={'bmDwW':function(_0x458abd,_0x2284e1){return _0x458abd===_0x2284e1;},'WJaRS':_0x216f5a(0x1e2),'JvhVu':_0x216f5a(0x1ac),'KDODF':function(_0x2979bb,_0x53c23b){return _0x2979bb in _0x53c23b;},'gWjdh':'body','jdESF':_0x216f5a(0x22a),'sxOKf':'get','IsOrT':function(_0x31ebbd,_0xa7a6e5){return _0x31ebbd+_0xa7a6e5;},'bjnKD':_0x216f5a(0x1ed),'QEbXw':_0x216f5a(0x202),'XJoNl':_0x216f5a(0x199),'bzxQt':function(_0x41ae03,_0x5d687b){return _0x41ae03==_0x5d687b;}};if(_0x1a1e66[_0x216f5a(0x235)](typeof _0x21c4be,_0x1a1e66[_0x216f5a(0x1ff)]))_0x21c4be={'url':_0x21c4be};try{if(!_0x21c4be?.[_0x216f5a(0x29c)])throw new Error('[发送请求]\x20缺少\x20url\x20参数');let {url:_0x486ede,type:_0x55ae5c,headers:headers={},body:_0x313d50,params:_0x2b8ae1,dataType:dataType=_0x1a1e66[_0x216f5a(0x19a)],resultType:resultType=_0x216f5a(0x295)}=_0x21c4be;const _0x3cfb8f=_0x55ae5c?_0x55ae5c?.['toLowerCase']():_0x1a1e66['KDODF'](_0x1a1e66['gWjdh'],_0x21c4be)?_0x1a1e66[_0x216f5a(0x20a)]:_0x1a1e66[_0x216f5a(0x223)],_0x356677=_0x486ede[_0x216f5a(0x240)](_0x1a1e66[_0x216f5a(0x235)](_0x3cfb8f,'post')?_0x1a1e66[_0x216f5a(0x201)]('?',$['queryStr'](_0x2b8ae1)):''),_0x34f769=_0x21c4be[_0x216f5a(0x144)]?$[_0x216f5a(0x234)]()?_0x21c4be[_0x216f5a(0x144)]/0x3e8:_0x21c4be[_0x216f5a(0x144)]:0x2710;if(dataType===_0x1a1e66[_0x216f5a(0x1a6)])headers[_0x1a1e66[_0x216f5a(0x296)]]=_0x1a1e66['XJoNl'];const _0x142b97=_0x313d50&&_0x1a1e66['bzxQt'](dataType,_0x1a1e66[_0x216f5a(0x19a)])?$[_0x216f5a(0x20d)](_0x313d50):$[_0x216f5a(0x261)](_0x313d50),_0x381711={..._0x21c4be,..._0x21c4be?.[_0x216f5a(0x1e7)]?_0x21c4be[_0x216f5a(0x1e7)]:{},'url':_0x356677,'headers':headers,..._0x1a1e66['bmDwW'](_0x3cfb8f,_0x1a1e66[_0x216f5a(0x20a)])&&{'body':_0x142b97},..._0x3cfb8f===_0x1a1e66[_0x216f5a(0x223)]&&_0x2b8ae1&&{'params':_0x2b8ae1},'timeout':_0x34f769},_0x271401=$[_0x216f5a(0x29f)][_0x3cfb8f[_0x216f5a(0x299)]()](_0x381711)[_0x216f5a(0x18c)](_0x3d683e=>resultType==_0x216f5a(0x295)?$['toObj'](_0x3d683e[_0x216f5a(0x1ec)])||_0x3d683e[_0x216f5a(0x1ec)]:$[_0x216f5a(0x1a3)](_0x3d683e)||_0x3d683e)[_0x216f5a(0x1f8)](_0x21db24=>$['log'](_0x216f5a(0x26e)+_0x21db24));return Promise[_0x216f5a(0x1c7)]([new Promise((_0xa56e35,_0x30c261)=>setTimeout(()=>_0x30c261(_0x216f5a(0x27f)),_0x34f769)),_0x271401]);}catch(_0x329c24){console[_0x216f5a(0x1fc)](_0x216f5a(0x26e)+_0x329c24);}};function randomInt(_0x3a6fb4,_0x5f35a){const _0x25f60c=_0x3a5790,_0x27f8f8={'zbysw':function(_0x3f02d3,_0x648486){return _0x3f02d3+_0x648486;},'iJUCs':function(_0x231278,_0x2b7094){return _0x231278-_0x2b7094;}};return Math[_0x25f60c(0x1ba)](_0x27f8f8[_0x25f60c(0x25b)](Math['random']()*_0x27f8f8['iJUCs'](_0x5f35a,_0x3a6fb4),_0x3a6fb4));};function DoubleLog(_0x211b7e){const _0x49aa20=_0x3a5790;if(_0x211b7e&&$[_0x49aa20(0x1cb)]())console[_0x49aa20(0x1fc)](''+_0x211b7e),$['notifyMsg']['push'](''+_0x211b7e);else _0x211b7e&&(console['log'](''+_0x211b7e),$[_0x49aa20(0x25a)][_0x49aa20(0x16d)](''+_0x211b7e));};function debug(_0x4a5c34,_0x3b3d90=_0x3a5790(0x260)){const _0x42ce77=_0x3a5790,_0x128824={'nHfOJ':function(_0x347c0c,_0x2ee619){return _0x347c0c===_0x2ee619;},'moLSR':_0x42ce77(0x173),'QKVZh':function(_0x2fd194,_0xf42a79){return _0x2fd194==_0xf42a79;}};_0x128824[_0x42ce77(0x1cf)]($['is_debug'],_0x128824['moLSR'])&&($[_0x42ce77(0x1fc)](_0x42ce77(0x1a5)+_0x3b3d90+_0x42ce77(0x137)),$[_0x42ce77(0x1fc)](_0x128824[_0x42ce77(0x219)](typeof _0x4a5c34,_0x42ce77(0x1e2))?_0x4a5c34:$[_0x42ce77(0x261)](_0x4a5c34)||_0x42ce77(0x233)+_0x4a5c34),$['log'](_0x42ce77(0x1a5)+_0x3b3d90+_0x42ce77(0x137)));};async function SendMsgList(_0x8ce71c){const _0x2225fd=_0x3a5790;await Promise['allSettled'](_0x8ce71c?.['map'](_0x530525=>SendMsg(_0x530525[_0x2225fd(0x1f1)][_0x2225fd(0x190)]('\x0a'),_0x530525[_0x2225fd(0x2a4)])));};async function SendMsg(_0x3b4b16,_0x568efa){const _0x36423c=_0x3a5790,_0x1b9812={'uMmFf':function(_0x1872b7,_0x24ab07){return _0x1872b7<_0x24ab07;}};_0x3b4b16&&(_0x1b9812[_0x36423c(0x216)](0x0,Notify)?$[_0x36423c(0x1cb)]()?await notify[_0x36423c(0x1f6)]($['name'],_0x3b4b16):$['msg']($[_0x36423c(0x237)],$[_0x36423c(0x13f)]||'',_0x3b4b16,{'media-url':_0x568efa}):console[_0x36423c(0x1fc)](_0x3b4b16));};function ObjectKeys2LowerCase(_0x381655){const _0x42184a=_0x3a5790;return _0x381655=Object[_0x42184a(0x195)](Object[_0x42184a(0x270)](_0x381655)['map'](([_0xc43469,_0x1b05f7])=>[_0xc43469[_0x42184a(0x299)](),_0x1b05f7])),new Proxy(_0x381655,{'get':function(_0x5720db,_0x3d5260,_0x4e6cd6){const _0x458624=_0x42184a;return Reflect[_0x458624(0x2ad)](_0x5720db,_0x3d5260[_0x458624(0x299)](),_0x4e6cd6);},'set':function(_0xa77dcb,_0x4caad9,_0xcc1a3,_0x456ff8){const _0x480f7e=_0x42184a;return Reflect[_0x480f7e(0x1c3)](_0xa77dcb,_0x4caad9['toLowerCase'](),_0xcc1a3,_0x456ff8);}});};async function loadCheerio(){const _0x190f18=_0x3a5790,_0x48ac67={'KgrzR':function(_0x1e917a){return _0x1e917a();},'mAsPT':function(_0x79788,_0x20cc9b){return _0x79788(_0x20cc9b);},'HZYXc':_0x190f18(0x1d3),'lJsuX':function(_0x20faaf,_0x3814df){return _0x20faaf(_0x3814df);},'GlCKf':function(_0x8459cc){return _0x8459cc();}};let _0x11ea80=($[_0x190f18(0x1cb)]()?process[_0x190f18(0x1ca)][_0x48ac67[_0x190f18(0x225)]]:$[_0x190f18(0x186)](_0x48ac67[_0x190f18(0x225)]))||'';if(_0x11ea80&&Object[_0x190f18(0x252)](_0x11ea80)[_0x190f18(0x2a7)])return console['log']('✅'+$[_0x190f18(0x237)]+_0x190f18(0x23a)),_0x48ac67[_0x190f18(0x1c8)](eval,_0x11ea80),_0x48ac67[_0x190f18(0x200)](createCheerio);return console[_0x190f18(0x1fc)]('🚀'+$['name']+_0x190f18(0x21d)),new Promise(async _0x467e20=>{const _0x3c45bf=_0x190f18,_0x526af2={'omZDt':_0x3c45bf(0x1d3),'oBdju':function(_0x4be051){const _0x947ef1=_0x3c45bf;return _0x48ac67[_0x947ef1(0x156)](_0x4be051);},'xUjdb':function(_0x358f56,_0x33c048){return _0x48ac67['mAsPT'](_0x358f56,_0x33c048);}};$[_0x3c45bf(0x1ef)](_0x3c45bf(0x224))['then'](_0x321192=>{const _0x43f585=_0x3c45bf;$[_0x43f585(0x278)](_0x321192,_0x526af2[_0x43f585(0x1f5)]),eval(_0x321192);const _0x5ad224=_0x526af2[_0x43f585(0x275)](createCheerio);console[_0x43f585(0x1fc)](_0x43f585(0x138)),_0x526af2[_0x43f585(0x15a)](_0x467e20,_0x5ad224);});});}function _0x93fe(_0x23085b,_0x42986a){const _0x473e03=_0x473e();return _0x93fe=function(_0x93fea9,_0x316e0e){_0x93fea9=_0x93fea9-0x136;let _0x3d7465=_0x473e03[_0x93fea9];return _0x3d7465;},_0x93fe(_0x23085b,_0x42986a);};!(async()=>{const _0x30ba13=_0x3a5790,_0x3c08d2={'MLrMa':function(_0x450c1e,_0x49529e){return _0x450c1e!=_0x49529e;},'sEHvX':_0x30ba13(0x1be),'txUwD':function(_0x273377){return _0x273377();},'cdrXa':function(_0x11a735){return _0x11a735();},'fcEWl':function(_0x46e87d){return _0x46e87d();},'SfeAU':function(_0x43e668,_0x5b7d4e){return _0x43e668>_0x5b7d4e;}};if(_0x3c08d2['MLrMa'](typeof $request,_0x3c08d2[_0x30ba13(0x1d2)]))await _0x3c08d2[_0x30ba13(0x1d5)](getCookie);else{if(!await _0x3c08d2[_0x30ba13(0x1bf)](loadModule))throw new Error(_0x30ba13(0x17e));if(!await _0x3c08d2[_0x30ba13(0x178)](checkEnv))throw new Error(_0x30ba13(0x1b8));if(_0x3c08d2[_0x30ba13(0x229)](userList[_0x30ba13(0x2a7)],0x0))await main();}})()['catch'](_0x3c45d9=>$[_0x3a5790(0x25a)]['push'](_0x3c45d9['message']||_0x3c45d9))[_0x3a5790(0x1d4)](async()=>{const _0x5c166a=_0x3a5790,_0x205568={'glpfH':function(_0x46abdb,_0x459f6f){return _0x46abdb(_0x459f6f);}};await _0x205568[_0x5c166a(0x269)](SendMsgList,$[_0x5c166a(0x22b)]),$[_0x5c166a(0x14e)]({'ok':0x1});});
/** ---------------------------------固定不动区域----------------------------------------- */
// prettier-ignore
//From chavyleung's Env.js
function Env(t, e) { class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise(((e, r) => { s.call(this, t, ((t, s, a) => { t ? r(t) : e(s) })) })) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.encoding = "utf-8", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } getEnv() { return "undefined" != typeof $environment && $environment["surge-version"] ? "Surge" : "undefined" != typeof $environment && $environment["stash-version"] ? "Stash" : "undefined" != typeof module && module.exports ? "Node.js" : "undefined" != typeof $task ? "Quantumult X" : "undefined" != typeof $loon ? "Loon" : "undefined" != typeof $rocket ? "Shadowrocket" : void 0 } isNode() { return "Node.js" === this.getEnv() } isQuanX() { return "Quantumult X" === this.getEnv() } isSurge() { return "Surge" === this.getEnv() } isLoon() { return "Loon" === this.getEnv() } isShadowrocket() { return "Shadowrocket" === this.getEnv() } isStash() { return "Stash" === this.getEnv() } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; if (this.getdata(t)) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise((e => { this.get({ url: t }, ((t, s, r) => e(r))) })) } runScript(t, e) { return new Promise((s => { let r = this.getdata("@chavy_boxjs_userCfgs.httpapi"); r = r ? r.replace(/\n/g, "").trim() : r; let a = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); a = a ? 1 * a : 20, a = e && e.timeout ? e.timeout : a; const [i, o] = r.split("@"), n = { url: `http://${o}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: a }, headers: { "X-Key": i, Accept: "*/*" }, timeout: a }; this.post(n, ((t, e, r) => s(r))) })).catch((t => this.logErr(t))) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), r = !s && this.fs.existsSync(e); if (!s && !r) return {}; { const r = s ? t : e; try { return JSON.parse(this.fs.readFileSync(r)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), r = !s && this.fs.existsSync(e), a = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, a) : r ? this.fs.writeFileSync(e, a) : this.fs.writeFileSync(t, a) } } lodash_get(t, e, s = void 0) { const r = e.replace(/\[(\d+)\]/g, ".$1").split("."); let a = t; for (const t of r) if (a = Object(a)[t], void 0 === a) return s; return a } lodash_set(t, e, s) { return Object(t) !== t || (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce(((t, s, r) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[r + 1]) >> 0 == +e[r + 1] ? [] : {}), t)[e[e.length - 1]] = s), t } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, r] = /^@(.*?)\.(.*?)$/.exec(t), a = s ? this.getval(s) : ""; if (a) try { const t = JSON.parse(a); e = t ? this.lodash_get(t, r, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, r, a] = /^@(.*?)\.(.*?)$/.exec(e), i = this.getval(r), o = r ? "null" === i ? null : i || "{}" : "{}"; try { const e = JSON.parse(o); this.lodash_set(e, a, t), s = this.setval(JSON.stringify(e), r) } catch (e) { const i = {}; this.lodash_set(i, a, t), s = this.setval(JSON.stringify(i), r) } } else s = this.setval(t, e); return s } getval(t) { switch (this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": return $persistentStore.read(t); case "Quantumult X": return $prefs.valueForKey(t); case "Node.js": return this.data = this.loaddata(), this.data[t]; default: return this.data && this.data[t] || null } } setval(t, e) { switch (this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": return $persistentStore.write(t, e); case "Quantumult X": return $prefs.setValueForKey(t, e); case "Node.js": return this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0; default: return this.data && this.data[e] || null } } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { switch (t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"], delete t.headers["content-type"], delete t.headers["content-length"]), t.params && (t.url += "?" + this.queryStr(t.params)), void 0 === t.followRedirect || t.followRedirect || ((this.isSurge() || this.isLoon()) && (t["auto-redirect"] = !1), this.isQuanX() && (t.opts ? t.opts.redirection = !1 : t.opts = { redirection: !1 })), this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": default: this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, ((t, s, r) => { !t && s && (s.body = r, s.statusCode = s.status ? s.status : s.statusCode, s.status = s.statusCode), e(t, s, r) })); break; case "Quantumult X": this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then((t => { const { statusCode: s, statusCode: r, headers: a, body: i, bodyBytes: o } = t; e(null, { status: s, statusCode: r, headers: a, body: i, bodyBytes: o }, i, o) }), (t => e(t && t.error || "UndefinedError"))); break; case "Node.js": let s = require("iconv-lite"); this.initGotEnv(t), this.got(t).on("redirect", ((t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } })).then((t => { const { statusCode: r, statusCode: a, headers: i, rawBody: o } = t, n = s.decode(o, this.encoding); e(null, { status: r, statusCode: a, headers: i, rawBody: o, body: n }, n) }), (t => { const { message: r, response: a } = t; e(r, a, a && s.decode(a.rawBody, this.encoding)) })) } } post(t, e = (() => { })) { const s = t.method ? t.method.toLocaleLowerCase() : "post"; switch (t.body && t.headers && !t.headers["Content-Type"] && !t.headers["content-type"] && (t.headers["content-type"] = "application/x-www-form-urlencoded"), t.headers && (delete t.headers["Content-Length"], delete t.headers["content-length"]), void 0 === t.followRedirect || t.followRedirect || ((this.isSurge() || this.isLoon()) && (t["auto-redirect"] = !1), this.isQuanX() && (t.opts ? t.opts.redirection = !1 : t.opts = { redirection: !1 })), this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": default: this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient[s](t, ((t, s, r) => { !t && s && (s.body = r, s.statusCode = s.status ? s.status : s.statusCode, s.status = s.statusCode), e(t, s, r) })); break; case "Quantumult X": t.method = s, this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then((t => { const { statusCode: s, statusCode: r, headers: a, body: i, bodyBytes: o } = t; e(null, { status: s, statusCode: r, headers: a, body: i, bodyBytes: o }, i, o) }), (t => e(t && t.error || "UndefinedError"))); break; case "Node.js": let r = require("iconv-lite"); this.initGotEnv(t); const { url: a, ...i } = t; this.got[s](a, i).then((t => { const { statusCode: s, statusCode: a, headers: i, rawBody: o } = t, n = r.decode(o, this.encoding); e(null, { status: s, statusCode: a, headers: i, rawBody: o, body: n }, n) }), (t => { const { message: s, response: a } = t; e(s, a, a && r.decode(a.rawBody, this.encoding)) })) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let r = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in r) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? r[e] : ("00" + r[e]).substr(("" + r[e]).length))); return t } queryStr(t) { let e = ""; for (const s in t) { let r = t[s]; null != r && "" !== r && ("object" == typeof r && (r = JSON.stringify(r)), e += `${s}=${r}&`) } return e = e.substring(0, e.length - 1), e } msg(e = t, s = "", r = "", a) { const i = t => { switch (typeof t) { case void 0: return t; case "string": switch (this.getEnv()) { case "Surge": case "Stash": default: return { url: t }; case "Loon": case "Shadowrocket": return t; case "Quantumult X": return { "open-url": t }; case "Node.js": return }case "object": switch (this.getEnv()) { case "Surge": case "Stash": case "Shadowrocket": default: return { url: t.url || t.openUrl || t["open-url"] }; case "Loon": return { openUrl: t.openUrl || t.url || t["open-url"], mediaUrl: t.mediaUrl || t["media-url"] }; case "Quantumult X": return { "open-url": t["open-url"] || t.url || t.openUrl, "media-url": t["media-url"] || t.mediaUrl, "update-pasteboard": t["update-pasteboard"] || t.updatePasteboard }; case "Node.js": return }default: return } }; if (!this.isMute) switch (this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": default: $notification.post(e, s, r, i(a)); break; case "Quantumult X": $notify(e, s, r, i(a)); case "Node.js": }if (!this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), r && t.push(r), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { switch (this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": case "Quantumult X": default: this.log("", `❗️${this.name}, 错误!`, t); break; case "Node.js": this.log("", `❗️${this.name}, 错误!`, t.stack) } } wait(t) { return new Promise((e => setTimeout(e, t))) } done(t = {}) { const e = ((new Date).getTime() - this.startTime) / 1e3; switch (this.log("", `🔔${this.name}, 结束! 🕛 ${e} 秒`), this.log(), this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": case "Quantumult X": default: $done(t); break; case "Node.js": process.exit(1) } } }(t, e) }
