/*
new Env('阿里云社区');
@Author: Leiyiyan
@Date: 2024-05-06 13:40

@Description:
阿里云服务 每日签到、点赞、评论、收藏，积分可兑换实物

获取 Cookie 方式： 阿里云 APP - 首页 - 积分商城

变量名: aliyunWeb_data、aliyunWeb_time

注意事项 - 因文章评论需要审核，所以请按推荐时间执行：
   12点前执行一次：签到、点赞、收藏、评论；
   12点后执行一次：积分收取、取消点赞、取消收藏；
   如需自定义时间，请修改 aliyunWeb_time 变量值，取值范围为 1-23 之间的整数
------------------------------------------------------------------------------
BoxJs订阅地址：
https://raw.githubusercontent.com/leiyiyan/resource/main/subscribe/leiyiyan.boxjs.json

[Script]
http-response ^https?:\/\/developer\.aliyun\.com\/developer\/api\/my\/user\/getUser script-path=https://gist.githubusercontent.com/Sliverkiss/ba14fe4fb20b640c17118c445461f7c6/raw/aliyunWeb.js, requires-body=true, timeout=60, tag=阿里云Web Cookie
cron "0 7,13 * * *" script-path=https://gist.githubusercontent.com/Sliverkiss/ba14fe4fb20b640c17118c445461f7c6/raw/aliyunWeb.js, tag=阿里云社区日常任务

[MITM]
hostname = developer.aliyun.com

====================================
⚠️【免责声明】
------------------------------------------
1、此脚本仅用于学习研究，不保证其合法性、准确性、有效性，请根据情况自行判断，本人对此不承担任何保证责任。
2、由于此脚本仅用于学习研究，您必须在下载后 24 小时内将所有内容从您的计算机或手机或任何存储设备中完全删除，若违反规定引起任何事件本人对此均不负责。
3、请勿将此脚本用于任何商业或非法目的，若违反规定请自行对此负责。
4、此脚本涉及应用与本人无关，本人对因此引起的任何隐私泄漏或其他后果不承担任何责任。
5、本人对任何脚本引发的问题概不负责，包括但不限于由脚本错误引起的任何损失和损害。
6、如果任何单位或个人认为此脚本可能涉嫌侵犯其权利，应及时通知并提供身份证明，所有权证明，我们将在收到认证文件确认后删除此脚本。
7、所有直接或间接使用、查看此脚本的人均应该仔细阅读此声明。本人保留随时更改或补充此声明的权利。一旦您使用或复制了此脚本，即视为您已接受此免责声明。
 */

const _0x200784=_0x5cd2;(function(_0x21d312,_0x3ca327){const _0x573fb5=_0x5cd2,_0x3f9720=_0x21d312();while(!![]){try{const _0x3d41aa=-parseInt(_0x573fb5(0x279))/0x1*(parseInt(_0x573fb5(0x1c6))/0x2)+-parseInt(_0x573fb5(0x1ca))/0x3+parseInt(_0x573fb5(0x13e))/0x4*(parseInt(_0x573fb5(0x145))/0x5)+-parseInt(_0x573fb5(0x128))/0x6*(-parseInt(_0x573fb5(0x1c0))/0x7)+-parseInt(_0x573fb5(0x183))/0x8+parseInt(_0x573fb5(0x135))/0x9+parseInt(_0x573fb5(0x20b))/0xa*(parseInt(_0x573fb5(0x12c))/0xb);if(_0x3d41aa===_0x3ca327)break;else _0x3f9720['push'](_0x3f9720['shift']());}catch(_0x456415){_0x3f9720['push'](_0x3f9720['shift']());}}}(_0x5709,0x37835));function _0x5cd2(_0x28f843,_0x25b822){const _0x5709c5=_0x5709();return _0x5cd2=function(_0x5cd276,_0x1e0087){_0x5cd276=_0x5cd276-0x11d;let _0x36d199=_0x5709c5[_0x5cd276];return _0x36d199;},_0x5cd2(_0x28f843,_0x25b822);}const $=new Env(_0x200784(0x1d3)),ckName=_0x200784(0x1e9),controlTime=($['isNode']()?process[_0x200784(0x222)][_0x200784(0x24f)]:$['getdata'](_0x200784(0x24f)))||'12';$[_0x200784(0x186)]='';const Notify=0x1,notify=$[_0x200784(0x15d)]()?require(_0x200784(0x15f)):'';let envSplitor=['@'];var userCookie=($[_0x200784(0x15d)]()?process[_0x200784(0x222)][ckName]:$['getdata'](ckName))||'';let userList=[],userIdx=0x0,userCount=0x0;const taskGroup=[{'code':'','name':_0x200784(0x273)},{'code':_0x200784(0x1da),'name':_0x200784(0x1ef)},{'code':_0x200784(0x13a),'name':_0x200784(0x234)},{'code':_0x200784(0x21c),'name':'倚天'},{'code':_0x200784(0x20d),'name':_0x200784(0x1b2)},{'code':_0x200784(0x1b9),'name':_0x200784(0x17a)},{'code':'luoshen','name':'飞天洛神云网络'},{'code':_0x200784(0x1d9),'name':_0x200784(0x1a1)},{'code':_0x200784(0x21f),'name':_0x200784(0x23f)},{'code':'bigdata','name':'大数据与机器学习'},{'code':_0x200784(0x173),'name':'ModelScope模型即服务'},{'code':_0x200784(0x26d),'name':_0x200784(0x231)},{'code':'iot','name':'物联网'},{'code':_0x200784(0x160),'name':_0x200784(0x20c)},{'code':_0x200784(0x252),'name':_0x200784(0x1c7)}];$[_0x200784(0x147)]=($[_0x200784(0x15d)]()?process['env']['IS_DEDUG']:$[_0x200784(0x1c8)](_0x200784(0x147)))||_0x200784(0x146),$[_0x200784(0x14b)]=[],$[_0x200784(0x1b3)]=[],$[_0x200784(0x250)]=($[_0x200784(0x15d)]()?process[_0x200784(0x222)][_0x200784(0x1dd)]:$[_0x200784(0x1c8)](_0x200784(0x1eb)))||'',$[_0x200784(0x11d)]=($[_0x200784(0x15d)]()?process['env']['codeServer_open']:$[_0x200784(0x1c8)]('@codeServer.open'))||_0x200784(0x146),$[_0x200784(0x122)]=$[_0x200784(0x11d)]!=_0x200784(0x146)&&$[_0x200784(0x250)]&&$[_0x200784(0x186)];let pendingScore=0x0,userScore=0x0;async function main(){const _0x52108e=_0x200784,_0xb620e6={'Jzmxq':function(_0x4c1dea,_0x2733e6){return _0x4c1dea<_0x2733e6;},'pOVAG':function(_0x3a4b21,_0x204d17){return _0x3a4b21<_0x204d17;},'qoejs':function(_0x5e543e,_0xc662e9){return _0x5e543e===_0xc662e9;},'cMwkq':_0x52108e(0x1e7),'fXAnB':function(_0x488177,_0xf209b4){return _0x488177(_0xf209b4);},'FTBiG':'aliyun-public-like','SoWTp':_0x52108e(0x121),'Dmbsi':function(_0x38d789,_0x1255c2){return _0x38d789-_0x1255c2;}};try{$[_0x52108e(0x1d1)](_0x52108e(0x140));for(let _0x1d7e14 of userList){console[_0x52108e(0x1d1)](_0x52108e(0x158)+_0x1d7e14[_0x52108e(0x25f)]+'\x20>>\x20Start\x20work'),console[_0x52108e(0x1d1)](_0x52108e(0x18d)+_0x1d7e14[_0x52108e(0x1e4)]()+'秒');const _0x1cc4de=Date[_0x52108e(0x171)]();userScore=await _0x1d7e14['interactData']()??{};if(_0x1d7e14[_0x52108e(0x1b0)]){if(_0xb620e6[_0x52108e(0x170)](_0x1cc4de,new Date(new Date()[_0x52108e(0x25d)](Math['floor'](controlTime),0x0,0x0,0x0))['getTime']())){for(let _0x41e4d3 of taskGroup){const _0x1c6ccd=await _0x1d7e14[_0x52108e(0x27f)](_0x41e4d3['code']),_0x36a1d6=await _0x1d7e14[_0x52108e(0x24b)](_0x1c6ccd);await _0x1d7e14[_0x52108e(0x202)](_0x36a1d6,_0x41e4d3[_0x52108e(0x24c)]),await $[_0x52108e(0x15c)](_0x1d7e14['getRandomTime']());const _0x4387ff=await _0x1d7e14['assessSignInBonusQualification'](_0x1c6ccd,_0x41e4d3[_0x52108e(0x24c)]);await $[_0x52108e(0x15c)](_0x1d7e14[_0x52108e(0x1e4)]()),_0x4387ff&&(await _0x1d7e14[_0x52108e(0x142)](_0x1c6ccd,_0x41e4d3['name']),await $[_0x52108e(0x15c)](_0x1d7e14[_0x52108e(0x1e4)]()));}const _0x5c9c07=await _0x1d7e14['getEbooks']();await $[_0x52108e(0x15c)](_0x1d7e14[_0x52108e(0x1e4)]());const _0x2b38bd=await _0x1d7e14['getCsrfToken'](_0x5c9c07,'ebook');await $['wait'](_0x1d7e14[_0x52108e(0x1e4)]()),await _0x1d7e14['addBookComment'](_0x5c9c07,_0x2b38bd),await $['wait'](_0x1d7e14[_0x52108e(0x1e4)]());for(let _0x29e477=0x0;_0xb620e6[_0x52108e(0x1cc)](_0x29e477,0x5);_0x29e477++){const _0x4160c6=await _0x1d7e14[_0x52108e(0x17e)]();await $[_0x52108e(0x15c)](_0x1d7e14[_0x52108e(0x1e4)]()),await _0x1d7e14[_0x52108e(0x1bc)](_0x4160c6,'aliyun-public-like',0x0),await $[_0x52108e(0x15c)](_0x1d7e14[_0x52108e(0x1e4)]()),await _0x1d7e14[_0x52108e(0x1bc)](_0x4160c6,'aliyun-public-favorite',0x0),await $[_0x52108e(0x15c)](_0x1d7e14[_0x52108e(0x1e4)]());_0xb620e6[_0x52108e(0x226)](_0x29e477,0x0)&&(await _0x1d7e14[_0x52108e(0x26e)](_0x4160c6),await $[_0x52108e(0x15c)](_0x1d7e14[_0x52108e(0x1e4)]()));const _0x4b2c26=await _0x1d7e14[_0x52108e(0x193)]();await $[_0x52108e(0x15c)](_0x1d7e14['getRandomTime']());if(_0x4b2c26&&_0x4b2c26?.['id']){const _0x190282=await _0x1d7e14['getCsrfToken'](_0x4b2c26['id'],_0xb620e6[_0x52108e(0x26b)]);await $[_0x52108e(0x15c)](_0x1d7e14[_0x52108e(0x1e4)]());const _0x10b014=await _0x1d7e14[_0x52108e(0x16a)](_0x4b2c26);await $['wait'](_0x1d7e14[_0x52108e(0x1e4)]()),_0x10b014&&(await _0x1d7e14[_0x52108e(0x126)](_0x4b2c26['id'],_0x10b014,_0x190282,0x1),await $[_0x52108e(0x15c)](_0x1d7e14['getRandomTime']()));}}pendingScore=await _0x1d7e14['getUserTotalPendingScore'](),$['title']=_0x52108e(0x15e)+pendingScore,_0xb620e6[_0x52108e(0x1a6)](DoubleLog,'🎉\x20当前积分:\x20'+userScore+_0x52108e(0x189)+pendingScore);}else{for(let _0x36db3a of taskGroup){const _0x35b743=await _0x1d7e14[_0x52108e(0x27f)](_0x36db3a[_0x52108e(0x13c)]),_0x5930ac=await _0x1d7e14[_0x52108e(0x151)](_0x35b743,_0x36db3a['name']);await $['wait'](_0x1d7e14[_0x52108e(0x1e4)]()),_0x5930ac&&(await _0x1d7e14['receiveSignInBonus'](_0x35b743,_0x36db3a['name']),await $[_0x52108e(0x15c)](_0x1d7e14[_0x52108e(0x1e4)]()));}pendingScore=await _0x1d7e14[_0x52108e(0x1b1)](),await $[_0x52108e(0x15c)](_0x1d7e14['getRandomTime']()),await _0x1d7e14[_0x52108e(0x20f)](),await $['wait'](_0x1d7e14[_0x52108e(0x1e4)]()),await $[_0x52108e(0x15c)](_0x1d7e14[_0x52108e(0x1e4)]());const _0x541149=await _0x1d7e14[_0x52108e(0x191)]()??[];await $[_0x52108e(0x15c)](_0x1d7e14[_0x52108e(0x1e4)]());if(_0x541149['length'])for(let _0x192c3f of _0x541149){await _0x1d7e14['likeOrNotLike'](_0x192c3f[_0x52108e(0x123)],_0xb620e6[_0x52108e(0x177)],0x1),await $[_0x52108e(0x15c)](_0x1d7e14[_0x52108e(0x1e4)]()),await _0x1d7e14[_0x52108e(0x1bc)](_0x192c3f[_0x52108e(0x123)],_0xb620e6['SoWTp'],0x1),await $[_0x52108e(0x15c)](_0x1d7e14[_0x52108e(0x1e4)]());}let _0x18c942=await _0x1d7e14[_0x52108e(0x1a3)]()??{};$[_0x52108e(0x1fd)]='本次运行共获得'+(_0xb620e6[_0x52108e(0x1df)](_0x18c942,pendingScore)||0x0)+'积分',_0xb620e6[_0x52108e(0x1a6)](DoubleLog,_0x52108e(0x1f1)+pendingScore+',\x20当前积分:\x20'+_0x18c942);}}else $['notifyMsg']['push'](_0x52108e(0x21e)+(_0x1d7e14[_0x52108e(0x215)]||_0x1d7e14['index'])+_0x52108e(0x247));$[_0x52108e(0x14b)][_0x52108e(0x1c4)]({'id':_0x1d7e14[_0x52108e(0x25f)],'avatar':_0x1d7e14[_0x52108e(0x257)],'message':$[_0x52108e(0x1b3)]}),$[_0x52108e(0x1b3)]=[];}}catch(_0x3bafc9){$[_0x52108e(0x1d1)](_0x52108e(0x251)+_0x3bafc9);throw new Error(_0x52108e(0x251)+_0x3bafc9);}}class UserInfo{constructor(_0x536954){const _0x262abf=_0x200784,_0xf53fef={'nhEIU':function(_0x47b266,_0x36ff3f){return _0x47b266===_0x36ff3f;},'zLNAJ':_0x262abf(0x15a),'ImMyS':function(_0x4aa967,_0x46c4f5){return _0x4aa967(_0x46c4f5);},'TOMwX':function(_0x3eaf6e,_0x3bbfcf){return _0x3eaf6e+_0x3bbfcf;},'wHWIn':_0x262abf(0x258),'nHpby':'Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_7)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/122.0.0.0\x20Safari/537.36','hixnr':_0x262abf(0x241)};this['index']=++userIdx,this[_0x262abf(0x14a)]=_0x536954[_0x262abf(0x14a)]||_0x536954,this[_0x262abf(0x240)]=_0x536954[_0x262abf(0x240)],this[_0x262abf(0x215)]=_0x536954[_0x262abf(0x215)],this['avatar']=_0x536954[_0x262abf(0x257)],this[_0x262abf(0x1b0)]=!![],this[_0x262abf(0x1de)]='',this[_0x262abf(0x1a9)]=_0xf53fef[_0x262abf(0x1f7)],this[_0x262abf(0x22b)]={'Cookie':this[_0x262abf(0x14a)],'User-Agent':_0xf53fef['nHpby'],'Referer':_0xf53fef[_0x262abf(0x12e)]},this[_0x262abf(0x1e4)]=()=>randomInt(0x1,0x5),this[_0x262abf(0x1d8)]=async _0x1747ac=>{const _0x2ff42c=_0x262abf;try{if(_0xf53fef['nhEIU'](typeof _0x1747ac,_0xf53fef[_0x2ff42c(0x224)]))_0x1747ac={'url':_0x1747ac};if(_0x1747ac?.['url']?.[_0x2ff42c(0x1c1)]('/'))_0x1747ac[_0x2ff42c(0x23d)]=this[_0x2ff42c(0x1a9)]+_0x1747ac[_0x2ff42c(0x23d)];const _0x178ed7=await _0xf53fef[_0x2ff42c(0x157)](Request,{..._0x1747ac,'headers':_0x1747ac[_0x2ff42c(0x22b)]||this[_0x2ff42c(0x22b)],'url':_0x1747ac[_0x2ff42c(0x23d)]||this['baseUrl']});debug(_0x178ed7,_0x1747ac?.[_0x2ff42c(0x23d)]?.[_0x2ff42c(0x24e)](/\/+$/,'')[_0x2ff42c(0x18b)](_0xf53fef[_0x2ff42c(0x1af)](_0x1747ac?.[_0x2ff42c(0x23d)]?.[_0x2ff42c(0x208)]('/'),0x1)));if(_0x178ed7?.[_0x2ff42c(0x13c)]==0x9c41)throw new Error(_0x178ed7?.['message']||_0x2ff42c(0x196));return _0x178ed7;}catch(_0x24cfaf){this['ckStatus']=![],$[_0x2ff42c(0x1d1)](_0x2ff42c(0x138)+_0x24cfaf);}};}async[_0x200784(0x1e0)](){const _0x1e2ae4=_0x200784,_0x4f66d8={'cXvXM':_0x1e2ae4(0x12d)};try{const _0x4b0f64={'url':'/my/user/getUser','type':_0x4f66d8['cXvXM']};await this[_0x1e2ae4(0x1d8)](_0x4b0f64);}catch(_0x50eb8e){this['ckStatus']=![],$[_0x1e2ae4(0x1d1)](_0x1e2ae4(0x25e)+_0x50eb8e);}}async['assessSignInBonusQualification'](_0x52893a,_0x34a1b3){const _0x41961a=_0x200784,_0x38c980={'MDUaU':_0x41961a(0x12d)};try{const _0x5e8588={'url':_0x41961a(0x22d),'type':_0x38c980['MDUaU'],'params':{'taskGroupId':_0x52893a}};let _0x2d44a1=await this['fetch'](_0x5e8588);return _0x2d44a1?.[_0x41961a(0x1cb)];}catch(_0x3d05ad){this['ckStatus']=![],$[_0x41961a(0x1d1)](_0x41961a(0x172)+_0x3d05ad);}}async[_0x200784(0x142)](_0x4cdeb3,_0x29577d){const _0x29a656=_0x200784,_0x19c3d3={'DaMYC':_0x29a656(0x26c),'XLCFW':'post','ztWEI':_0x29a656(0x236),'ZHQXH':function(_0x15d0c2,_0x552610){return _0x15d0c2==_0x552610;},'qbZiM':'200','ifnQU':function(_0x34813e,_0x1db337){return _0x34813e||_0x1db337;},'fOMqX':'default'};try{const _0x5460e6={'url':_0x19c3d3[_0x29a656(0x242)],'type':_0x19c3d3[_0x29a656(0x1ae)],'dataType':_0x19c3d3[_0x29a656(0x19b)],'body':{'taskGroupId':_0x4cdeb3}};let _0xa25c81=await this[_0x29a656(0x1d8)](_0x5460e6);if(_0x19c3d3[_0x29a656(0x161)](_0xa25c81?.[_0x29a656(0x13c)],_0x19c3d3[_0x29a656(0x192)])){const _0x26aaee=_0xa25c81?.[_0x29a656(0x1cb)]||0x0;$[_0x29a656(0x1d1)](_0x29a656(0x16f)+(_0x29577d||_0x29a656(0x130))+':\x20获得\x20'+_0x26aaee+_0x29a656(0x272));}else $[_0x29a656(0x1d1)](_0x29a656(0x154)+_0x19c3d3[_0x29a656(0x13d)](_0x29577d,_0x19c3d3[_0x29a656(0x26a)])+':\x20'+_0xa25c81?.[_0x29a656(0x246)]);}catch(_0x123008){this[_0x29a656(0x1b0)]=![],$['log'](_0x29a656(0x1b6)+_0x123008);}}async[_0x200784(0x27f)](_0x59442f){const _0x4874ee=_0x200784;try{const _0x975c2a={'url':_0x4874ee(0x176),'type':'get','params':{'excode':_0x59442f}};let _0x36e3da=await this[_0x4874ee(0x1d8)](_0x975c2a);const _0x592d6f=_0x36e3da?.[_0x4874ee(0x1cb)]?.[_0x4874ee(0x1ff)];return _0x592d6f;}catch(_0x214fe5){this[_0x4874ee(0x1b0)]=![],$[_0x4874ee(0x1d1)](_0x4874ee(0x25e)+_0x214fe5);}}async['getTasks'](_0x48fb65){const _0x5abe81=_0x200784,_0x334395={'HKuzF':function(_0x27a3ae,_0xfc0b71){return _0x27a3ae<=_0xfc0b71;}};try{const _0x298419={'url':'/task/getTaskGroup?groupId='+_0x48fb65,'type':_0x5abe81(0x12d)};let _0x1bbc15=await this['fetch'](_0x298419);const _0x3196d9=_0x1bbc15?.[_0x5abe81(0x1cb)]?.[_0x5abe81(0x201)];let _0x1140f0={};if(_0x3196d9['length']){const _0x152048=new Date()['getTime']();for(let _0xc60927 of _0x3196d9){if(_0x152048>=_0xc60927['gmtEnableStart']&&_0x334395[_0x5abe81(0x19f)](_0x152048,_0xc60927[_0x5abe81(0x271)])){const _0x22a44b=JSON['parse'](_0xc60927['finishRule'][_0x5abe81(0x24e)](/&quot;/g,'\x22'));_0x1140f0[_0x5abe81(0x1be)]=_0x22a44b[_0x5abe81(0x217)][0x0]['actionCode'],_0x1140f0[_0x5abe81(0x182)]=_0x22a44b['actions'][0x0][_0x5abe81(0x1be)],_0x1140f0[_0x5abe81(0x123)]=_0x22a44b[_0x5abe81(0x217)][0x0][_0x5abe81(0x123)];}}}return _0x1140f0;}catch(_0x57bad8){this[_0x5abe81(0x1b0)]=![],$['log']('⛔️\x20获取签到任务列表失败!\x20'+_0x57bad8);}}async['signin'](_0x5b7662,_0x581f7d){const _0xeea4a3=_0x200784,_0x2c2c58={'JCChu':_0xeea4a3(0x169),'SoNoq':_0xeea4a3(0x26f),'vztYR':_0xeea4a3(0x236),'PEPbN':function(_0x4de3b0,_0x3ed7a4){return _0x4de3b0||_0x3ed7a4;},'KFcgC':_0xeea4a3(0x130)};try{const _0x3d5c50={'url':_0x2c2c58[_0xeea4a3(0x180)],'type':_0x2c2c58[_0xeea4a3(0x27b)],'dataType':_0x2c2c58[_0xeea4a3(0x144)],'body':_0x5b7662};let _0x28d49a=await this['fetch'](_0x3d5c50);$[_0xeea4a3(0x1d1)](_0xeea4a3(0x1aa)+_0x2c2c58[_0xeea4a3(0x166)](_0x581f7d,_0x2c2c58['KFcgC'])+':\x20'+_0x28d49a?.[_0xeea4a3(0x246)]);}catch(_0x29b110){this['ckStatus']=![],$['log']('⛔️\x20签到失败!\x20'+_0x29b110);}}async[_0x200784(0x17e)](){const _0x543325=_0x200784,_0x5e26b1={'UpECS':function(_0x3b9b92,_0xf88ef1){return _0x3b9b92(_0xf88ef1);},'sRgYy':'.feed-item','hxLDy':_0x543325(0x253),'ucKSr':'.feed-item-content-title\x20h3','eLTTn':function(_0x7b901,_0x16ec7e){return _0x7b901*_0x16ec7e;},'xMOeB':_0x543325(0x12d),'egMYe':_0x543325(0x1bd),'jkGjj':_0x543325(0x1a2)};try{const _0x1c7b85=Math[_0x543325(0x203)](_0x5e26b1['eLTTn'](Math['random'](),0x1f))+0x1,_0x181ae8={'url':'https://developer.aliyun.com/group/aliware/article_hot?pageNum='+_0x1c7b85,'type':_0x5e26b1[_0x543325(0x127)]};let _0x4dda27=await this[_0x543325(0x1d8)](_0x181ae8);const _0x69852e=$[_0x543325(0x15b)][_0x543325(0x274)](_0x4dda27),_0x2fa004=_0x5e26b1['UpECS'](_0x69852e,_0x5e26b1[_0x543325(0x225)]),_0xa08b76=_0x2fa004[_0x543325(0x134)](_0x5e26b1[_0x543325(0x1f2)])[_0x543325(0x269)]((_0x512a5c,_0x23c49e)=>{const _0x2178ed=_0x543325;return{'id':_0x5e26b1[_0x2178ed(0x124)](_0x69852e,_0x23c49e)[_0x2178ed(0x134)](_0x5e26b1['sRgYy'])[_0x2178ed(0x243)](_0x5e26b1['hxLDy']),'name':_0x69852e(_0x23c49e)[_0x2178ed(0x134)](_0x5e26b1[_0x2178ed(0x1b4)])[_0x2178ed(0x239)]()};})[_0x543325(0x12d)](),_0xeb5c9f=_0xa08b76[Math[_0x543325(0x203)](_0x5e26b1[_0x543325(0x221)](Math['random'](),_0xa08b76[_0x543325(0x139)]))],{id:_0x15a3d5,name:_0x4083ca}=_0xeb5c9f;return $[_0x543325(0x1d1)](_0x543325(0x266)+_0x15a3d5+_0x543325(0x1c2)+_0x4083ca),_0x15a3d5;}catch(_0xcaf7d0){this['ckStatus']=![],$['log'](_0x543325(0x216)+_0xcaf7d0);}}async[_0x200784(0x1ab)](){const _0x1248af=_0x200784,_0x725338={'PdlUA':function(_0x9b0fcd,_0x2b7ee8){return _0x9b0fcd(_0x2b7ee8);},'JXTNI':_0x1248af(0x255),'LllOo':'.ebook-home-title','bdmzq':function(_0x4be425,_0x51f0b9){return _0x4be425*_0x51f0b9;},'iEqzU':function(_0x4a8f85,_0xf68802){return _0x4a8f85(_0xf68802);},'yiDsO':_0x1248af(0x233),'fhvCV':_0x1248af(0x254)};try{const _0x4d270a=Math[_0x1248af(0x203)](_0x725338[_0x1248af(0x1ec)](Math[_0x1248af(0x1fe)](),0x1f5))+0x1,_0x3ae76d={'url':_0x1248af(0x16c)+_0x4d270a,'type':_0x1248af(0x12d)};let _0x511b1b=await this['fetch'](_0x3ae76d);const _0x307e53=$[_0x1248af(0x15b)]['load'](_0x511b1b),_0x25a963=_0x725338[_0x1248af(0x16b)](_0x307e53,_0x725338['yiDsO']),_0xc9f5e8=_0x25a963[_0x1248af(0x134)](_0x725338['fhvCV'])[_0x1248af(0x269)]((_0x1e75d3,_0xcc263)=>{const _0x11f98c=_0x1248af;return{'id':_0x725338[_0x11f98c(0x14f)](_0x307e53,_0xcc263)[_0x11f98c(0x243)]('href')['replace'](_0x725338[_0x11f98c(0x133)],''),'name':_0x725338[_0x11f98c(0x14f)](_0x307e53,_0xcc263)['find'](_0x725338[_0x11f98c(0x17c)])['text']()};})[_0x1248af(0x12d)](),_0x15de83=_0xc9f5e8[Math[_0x1248af(0x203)](_0x725338[_0x1248af(0x1ec)](Math[_0x1248af(0x1fe)](),_0xc9f5e8[_0x1248af(0x139)]))],{id:_0x3abbf3,name:_0x326ecb}=_0x15de83;return $[_0x1248af(0x1d1)](_0x1248af(0x1b7)+_0x3abbf3+_0x1248af(0x1c2)+_0x326ecb),_0x3abbf3;}catch(_0xa2ac3e){this[_0x1248af(0x1b0)]=![],$[_0x1248af(0x1d1)]('⛔️\x20获取电子书列表失败!\x20'+_0xa2ac3e);}}async[_0x200784(0x193)](){const _0x44b6d7=_0x200784,_0x1bb398={'JcnUC':function(_0x11af5c,_0x347344){return _0x11af5c(_0x347344);},'nbMDP':'data-id','fbEod':_0x44b6d7(0x276),'Wtibq':function(_0x8cc1df,_0x10db01){return _0x8cc1df*_0x10db01;},'TpNAA':_0x44b6d7(0x12d),'FXrQc':function(_0x47f1da,_0x22d753){return _0x47f1da(_0x22d753);},'ZoJVh':_0x44b6d7(0x195)};try{const _0x283148=Math[_0x44b6d7(0x203)](_0x1bb398['Wtibq'](Math[_0x44b6d7(0x1fe)](),0x1f))+0x1,_0x536d11={'url':_0x44b6d7(0x204)+_0x283148,'type':_0x1bb398[_0x44b6d7(0x17f)]};let _0x415894=await this[_0x44b6d7(0x1d8)](_0x536d11);const _0x5256c6=$[_0x44b6d7(0x15b)][_0x44b6d7(0x274)](_0x415894),_0x285d1e=_0x1bb398['FXrQc'](_0x5256c6,'.askProduct-list'),_0x182314=_0x285d1e[_0x44b6d7(0x134)](_0x1bb398[_0x44b6d7(0x270)])['map']((_0x41a76a,_0x1a76ef)=>{const _0x53aab8=_0x44b6d7;return{'id':_0x1bb398[_0x53aab8(0x174)](_0x5256c6,_0x1a76ef)[_0x53aab8(0x243)](_0x1bb398['nbMDP'])||'','name':_0x1bb398[_0x53aab8(0x174)](_0x5256c6,_0x1a76ef)['find'](_0x1bb398[_0x53aab8(0x248)])['text']()||'','answer':_0x1bb398[_0x53aab8(0x174)](parseInt,_0x1bb398['JcnUC'](_0x5256c6,_0x1a76ef)[_0x53aab8(0x134)](_0x53aab8(0x14d))[_0x53aab8(0x239)]())||''};})[_0x44b6d7(0x1ee)]((_0x116f65,_0xa00709)=>_0xa00709['answer']>0x0)[_0x44b6d7(0x12d)](),_0x1c6b19=_0x182314[Math[_0x44b6d7(0x203)](_0x1bb398['Wtibq'](Math[_0x44b6d7(0x1fe)](),_0x182314['length']))];if(_0x1c6b19?.['id']&&_0x1c6b19?.[_0x44b6d7(0x24c)]){const {id:_0x42337d,name:_0x45e1d1}=_0x1c6b19;return $['log'](_0x44b6d7(0x167)+_0x42337d+_0x44b6d7(0x1c2)+_0x45e1d1),_0x1c6b19;}return null;}catch(_0xd777a7){this[_0x44b6d7(0x1b0)]=![],$[_0x44b6d7(0x1d1)]('⛔️\x20获取问答列表失败!\x20'+_0xd777a7);}}async['getAskDetail'](_0x2ddb2f){const _0x54cd43=_0x200784,_0x23ea9b={'fPaZR':function(_0x570ee7,_0x3a336d){return _0x570ee7(_0x3a336d);},'AtVQt':_0x54cd43(0x253),'YOwfj':'get','ZoTSK':function(_0x3ebd84,_0x24f1d8){return _0x3ebd84(_0x24f1d8);},'FJKXW':_0x54cd43(0x150),'AMriv':'.answer-item','OjvwE':function(_0x128b09,_0x1cda5a){return _0x128b09*_0x1cda5a;}};try{const _0x1ab0a6={'url':_0x54cd43(0x1d4)+_0x2ddb2f['id'],'type':_0x23ea9b[_0x54cd43(0x141)]};let _0x3e0abf=await this['fetch'](_0x1ab0a6);const _0x19bd25=$[_0x54cd43(0x15b)][_0x54cd43(0x274)](_0x3e0abf),_0x2b8f53=_0x23ea9b[_0x54cd43(0x1e8)](_0x19bd25,_0x23ea9b[_0x54cd43(0x1d5)]),_0x3984e7=_0x2b8f53[_0x54cd43(0x134)](_0x23ea9b['AMriv'])[_0x54cd43(0x269)]((_0x223ff5,_0x52276a)=>{const _0x2bdcd9=_0x54cd43;return{'id':_0x23ea9b['fPaZR'](_0x19bd25,_0x52276a)[_0x2bdcd9(0x243)](_0x23ea9b[_0x2bdcd9(0x259)])||''};})['get'](),_0x54f696=_0x3984e7[Math[_0x54cd43(0x203)](_0x23ea9b[_0x54cd43(0x265)](Math['random'](),_0x2ddb2f[_0x54cd43(0x210)]))];if(_0x54f696){const {id:_0x31642a}=_0x54f696;return $[_0x54cd43(0x1d1)](_0x54cd43(0x1f4)+_0x31642a),_0x31642a;}return null;}catch(_0xd1cf52){this['ckStatus']=![],$[_0x54cd43(0x1d1)](_0x54cd43(0x19d)+_0xd1cf52);}}async['likeOrNotLike'](_0x505843,_0xa5b57a,_0x81c717){const _0x29211e=_0x200784,_0x9a4563={'BvDhO':_0x29211e(0x25a),'zsuts':'get','DYqXr':_0x29211e(0x1bb),'hedcy':function(_0x50755b,_0x41d722){return _0x50755b===_0x41d722;},'uOsQJ':function(_0x1a0c10,_0x12072c){return _0x1a0c10===_0x12072c;},'WUgbU':function(_0x12a328,_0xf7e8e9){return _0x12a328===_0xf7e8e9;},'jzbyB':'aliyun-public-like','OvqYB':function(_0x1bbe4a,_0x535bb7){return _0x1bbe4a===_0x535bb7;}};try{const _0x1ce33f={'url':_0x9a4563[_0x29211e(0x148)],'type':_0x9a4563[_0x29211e(0x14e)],'params':{'bizCategory':_0x9a4563['DYqXr'],'actionCode':_0xa5b57a,'objectId':_0x505843,'status':_0x81c717,'uccCsrfToken':await this[_0x29211e(0x1ba)](),'callback':getCallback()}};await this[_0x29211e(0x1d8)](_0x1ce33f),$[_0x29211e(0x1d1)]('✅\x20'+(_0x9a4563[_0x29211e(0x235)](_0xa5b57a,_0x29211e(0x11f))?'文章'+(_0x9a4563[_0x29211e(0x1a4)](_0x81c717,0x1)?'取消':'')+'点赞':'文章'+(_0x9a4563[_0x29211e(0x187)](_0x81c717,0x1)?'取消':'')+'收藏')+'：\x20'+_0x505843);}catch(_0x17014c){this[_0x29211e(0x1b0)]=![],$[_0x29211e(0x1d1)](_0x29211e(0x24a)+(_0x9a4563[_0x29211e(0x1a4)](_0xa5b57a,_0x9a4563[_0x29211e(0x1cf)])?'文章'+(_0x9a4563[_0x29211e(0x235)](_0x81c717,0x1)?'取消':'')+'点赞':'文章'+(_0x9a4563[_0x29211e(0x12f)](_0x81c717,0x1)?'取消':'')+'收藏')+_0x29211e(0x19e)+_0x17014c);}}async[_0x200784(0x181)](_0x3383f2,_0x5ecd06){const _0x3a77ac=_0x200784,_0x5f5213={'ReGsA':'Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2016_6\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Mobile/15E148\x20AliApp(Aliyun/6.7.1)\x20WindVane/8.7.2\x201170x2532\x20WK'};try{const _0x5b2273={'url':'https://developer.aliyun.com/csrfToken','type':_0x3a77ac(0x12d),'headers':{'Cookie':this['token'],'User-Agent':_0x5f5213[_0x3a77ac(0x219)],'Referer':_0x3a77ac(0x241)+_0x5ecd06+'/'+_0x3383f2}},_0x533d84=await this['fetch'](_0x5b2273);return _0x533d84?.[_0x3a77ac(0x14a)];}catch(_0x2d1932){this[_0x3a77ac(0x1b0)]=![],$[_0x3a77ac(0x1d1)]('⛔️\x20获取\x20csrf\x20失败!\x20'+_0x2d1932);}}async['voteAnswer'](_0x303084,_0x397db6,_0x2ba651,_0x5a936d){const _0x43ef23=_0x200784,_0x2443c9={'imxuc':_0x43ef23(0x26f),'ULAST':_0x43ef23(0x236)};try{const _0x6676ae={'url':_0x43ef23(0x197),'type':_0x2443c9['imxuc'],'dataType':_0x2443c9['ULAST'],'headers':{'Cookie':this['token'],'User-Agent':_0x43ef23(0x1c5),'Referer':_0x43ef23(0x1d4)+_0x303084},'params':{'p_csrf':_0x2ba651},'body':{'id':_0x397db6,'votes':_0x5a936d}};await this[_0x43ef23(0x1d8)](_0x6676ae),$['log'](_0x43ef23(0x188)+_0x303084+'-'+_0x397db6);}catch(_0x2f7f1f){this[_0x43ef23(0x1b0)]=![],$[_0x43ef23(0x1d1)]('⛔️\x20回答点赞失败!\x20'+_0x2f7f1f);}}async['addBookComment'](_0x3a26f2,_0x415f10){const _0x5e9fd0=_0x200784,_0x2a13ad={'ckIhk':_0x5e9fd0(0x211)};try{const _0x47c724={'url':'https://developer.aliyun.com/developer/api/ebook/mark/add','type':_0x5e9fd0(0x26f),'dataType':_0x5e9fd0(0x190),'headers':{'Cookie':this[_0x5e9fd0(0x14a)],'User-Agent':_0x5e9fd0(0x1c5),'Referer':_0x5e9fd0(0x164)+_0x3a26f2},'params':{'p_csrf':_0x415f10},'body':{'eBookId':_0x3a26f2,'score':0xa,'content':_0x2a13ad[_0x5e9fd0(0x16d)]}},_0x1e2612=await this[_0x5e9fd0(0x1d8)](_0x47c724);_0x1e2612?.[_0x5e9fd0(0x13c)]==_0x5e9fd0(0x1fa)?$[_0x5e9fd0(0x1d1)]('✅\x20评价电子书：\x20'+_0x3a26f2):$[_0x5e9fd0(0x1d1)](_0x5e9fd0(0x229)+_0x1e2612?.[_0x5e9fd0(0x246)]);}catch(_0x400bd4){this['ckStatus']=![],$[_0x5e9fd0(0x1d1)](_0x5e9fd0(0x229)+_0x400bd4);}}async[_0x200784(0x191)](){const _0x1ac5ae=_0x200784,_0x5d17f4={'MJJWm':_0x1ac5ae(0x1e1),'ilseh':'get','hIzZe':function(_0x4b3779,_0x3ecaa4){return _0x4b3779===_0x3ecaa4;},'UMWtk':_0x1ac5ae(0x200)};try{const _0x20c08d={'url':_0x5d17f4['MJJWm'],'type':_0x5d17f4['ilseh'],'params':{'pageNum':0x1,'pageSize':0xa,'type':0x1}},_0x4de381=await this[_0x1ac5ae(0x1d8)](_0x20c08d),{list:_0xd646c8}=_0x4de381?.[_0x1ac5ae(0x1cb)];if(_0xd646c8[_0x1ac5ae(0x139)])return $[_0x1ac5ae(0x1d1)]('✅\x20开始取消文章的点赞与收藏记录'),_0xd646c8;return[];}catch(_0xcb3a5){this[_0x1ac5ae(0x1b0)]=![],$[_0x1ac5ae(0x1d1)](_0x1ac5ae(0x24a)+(_0x5d17f4[_0x1ac5ae(0x12b)](type,_0x1ac5ae(0x11f))?_0x1ac5ae(0x1d2):_0x5d17f4[_0x1ac5ae(0x1f9)])+'失败!\x20'+_0xcb3a5);}}async[_0x200784(0x26e)](_0xe8259){const _0x52b054=_0x200784,_0x4b0bcf={'raspW':_0x52b054(0x214),'QGHTM':_0x52b054(0x12d),'HoXiE':function(_0x2edf97,_0x1b12fc){return _0x2edf97(_0x1b12fc);},'BuWdS':_0x52b054(0x261),'SPREG':_0x52b054(0x131),'Xrvxc':function(_0x563562){return _0x563562();}};try{const _0x14f1b4={'url':_0x4b0bcf['raspW'],'type':_0x4b0bcf['QGHTM'],'params':{'content':_0x4b0bcf[_0x52b054(0x278)](encodeURIComponent,'感谢博主的分享'),'objectId':_0xe8259,'bizCategory':_0x4b0bcf[_0x52b054(0x18a)],'commentType':0x0,'sourceAppCode':_0x52b054(0x198),'sourceBizCategory':_0x4b0bcf[_0x52b054(0x1f6)],'uccCsrfToken':await this[_0x52b054(0x1ba)](),'callback':_0x4b0bcf[_0x52b054(0x22c)](getCallback)}};await this['fetch'](_0x14f1b4),$['log'](_0x52b054(0x14c)+_0xe8259);}catch(_0x50f209){this[_0x52b054(0x1b0)]=![],$[_0x52b054(0x1d1)](_0x52b054(0x256)+_0x50f209);}}async[_0x200784(0x1a3)](){const _0x3cfcd6=_0x200784,_0x3087dc={'ryino':_0x3cfcd6(0x1bf),'WOHjZ':_0x3cfcd6(0x12d)};try{const _0x131822={'url':_0x3087dc[_0x3cfcd6(0x24d)],'type':_0x3087dc['WOHjZ']};let _0x13b8ba=await this[_0x3cfcd6(0x1d8)](_0x131822);return _0x13b8ba?.[_0x3cfcd6(0x1cb)];}catch(_0x3a73c7){$[_0x3cfcd6(0x1d1)](_0x3cfcd6(0x220)+_0x3a73c7);}}async[_0x200784(0x1b1)](){const _0x134aa5=_0x200784,_0x50246d={'gHoez':_0x134aa5(0x12d)};try{const _0x1df9fb={'url':_0x134aa5(0x1e6),'type':_0x50246d[_0x134aa5(0x168)]};let _0x51e11e=await this[_0x134aa5(0x1d8)](_0x1df9fb);return $['log'](_0x134aa5(0x129)+_0x51e11e?.['data']),_0x51e11e?.['data'];}catch(_0x4936ad){$[_0x134aa5(0x1d1)](_0x134aa5(0x22f)+_0x4936ad);}}async['collect'](){const _0x1a7820=_0x200784,_0x4f0d95={'poxvi':_0x1a7820(0x17d),'ZeoZV':_0x1a7820(0x12d)};try{const _0x31b9f5={'url':_0x4f0d95[_0x1a7820(0x205)],'type':_0x4f0d95['ZeoZV']};let _0x3fe25e=await this[_0x1a7820(0x1d8)](_0x31b9f5);return $['log'](_0x1a7820(0x13f)+_0x3fe25e?.['data']),_0x3fe25e?.[_0x1a7820(0x1cb)];}catch(_0x90ba6){$['log'](_0x1a7820(0x132)+_0x90ba6);}}async[_0x200784(0x1ba)](){const _0x2bd25b=_0x200784,_0x2150f7={'etoCN':_0x2bd25b(0x1ac),'nEgrv':function(_0xa3e4ab){return _0xa3e4ab();},'Nhgts':function(_0x31b96e,_0xefdca7){return _0x31b96e+_0xefdca7;}};try{const _0x1ee1e0={'url':_0x2150f7['etoCN'],'type':_0x2bd25b(0x12d),'params':{'uccCsrfToken':'','callback':_0x2150f7[_0x2bd25b(0x1e2)](getCallback)}};let _0x5cc1d0=await this[_0x2bd25b(0x1d8)](_0x1ee1e0);const _0x26938e=_0x5cc1d0[_0x2bd25b(0x212)]('{'),_0x2990ee=_0x5cc1d0['lastIndexOf']('}'),_0x2b819a=_0x5cc1d0[_0x2bd25b(0x18b)](_0x26938e,_0x2150f7[_0x2bd25b(0x19c)](_0x2990ee,0x1)),_0x341f9f=JSON[_0x2bd25b(0x155)](_0x2b819a);return _0x341f9f[_0x2bd25b(0x1cb)][_0x2bd25b(0x1db)];}catch(_0x348c72){$['log'](_0x2bd25b(0x11e)+_0x348c72);}}}function getCallback(){const _0x476147=_0x200784,_0x426389={'IahRK':function(_0x25a4f8,_0x462e06){return _0x25a4f8+_0x462e06;}};return _0x426389[_0x476147(0x223)](_0x476147(0x238),Date['now']())+'_'+Math[_0x476147(0x165)](0x186a0*Math[_0x476147(0x1fe)]());}async function getCookie(){const _0xf17ecc=_0x200784,_0x2e623c={'LXYkO':_0xf17ecc(0x1ad),'IdxyG':function(_0x1e08a8,_0x3d4608){return _0x1e08a8(_0x3d4608);}};if($request&&$request['method']===_0x2e623c['LXYkO'])return;const _0x57755b=_0x2e623c[_0xf17ecc(0x1a8)](ObjectKeys2LowerCase,$request['headers']),_0x1a9c04=_0x57755b['cookie'],_0x4b4891=$[_0xf17ecc(0x194)]($response[_0xf17ecc(0x206)]);if(!_0x4b4891?.['data']){$[_0xf17ecc(0x156)]($[_0xf17ecc(0x24c)],_0xf17ecc(0x249),'');return;}const {nickname:_0x3db3f3,avatar:_0x52691e}=_0x4b4891?.[_0xf17ecc(0x1cb)],_0x938660={'userId':_0x3db3f3,'avatar':_0x52691e,'token':_0x1a9c04,'userName':_0x3db3f3};userCookie=userCookie?JSON['parse'](userCookie):[];const _0x241f54=userCookie[_0xf17ecc(0x185)](_0x400980=>_0x400980[_0xf17ecc(0x240)]==_0x938660['userId']);userCookie[_0x241f54]?userCookie[_0x241f54]=_0x938660:userCookie[_0xf17ecc(0x1c4)](_0x938660),$[_0xf17ecc(0x18c)](userCookie,ckName),$[_0xf17ecc(0x156)]($[_0xf17ecc(0x24c)],'🎉'+_0x938660['userName']+_0xf17ecc(0x262),'');}async function loadModule(){const _0x2297fd=_0x200784,_0x301879={'YjGPq':function(_0x4a67cc){return _0x4a67cc();}};try{return $[_0x2297fd(0x15b)]=await _0x301879[_0x2297fd(0x21d)](loadCheerio),$[_0x2297fd(0x15b)]?!![]:![];}catch(_0x383c21){throw new Error(_0x2297fd(0x268)+_0x383c21);}}function _0x5709(){const _0x318b39=['DaMYC','attr','❌未检测到ck，请添加环境变量','JbFWL','message','\x20>>\x20Check\x20ck\x20error!','fbEod','❌获取Cookie失败!','⛔️\x20','getTasks','name','ryino','replace','aliyunWeb_time','codeServer','⛔️\x20main\x20run\x20error\x20=>\x20','aliyun_linux','data-id','.ebook-home-item','/ebook/','⛔️\x20文章点赞失败!\x20','avatar','https://developer.aliyun.com/developer/api','AtVQt','https://ucc.aliyun.com/uccPagingComponent/likeOrNotLike','qZdAD','true','setHours','⛔️\x20获取签到任务列表失败!\x20','index','XbYgL','yq-comment-type-article','更新token成功!','application/json;charset=UTF-8','debug','OjvwE','✅\x20随机获取文章id：\x20','共找到','❌loadModule\x20run\x20error\x20=>\x20','map','fOMqX','cMwkq','/sign/receiveSignInBonus','viapi','addComment','post','ZoJVh','gmtEnableEnd','\x20积分','我的社区','load','setdata','.askProduct-item-title-text\x20h3','bkhQk','HoXiE','590EpAGJB','allSettled','SoNoq','ulp.michelin.com.cn',':开始下载Cheerio模块','vTqSo','getUserSpaceSignInDetail','codeOpen','⛔️\x20获取UccCsrfToken失败!\x20','aliyun-public-like','includes','aliyun-public-favorite','wxCode','objectId','UpECS','❌getWxToken\x20run\x20error\x20=>\x20','voteAnswer','xMOeB','7350NjUTJi','✅\x20待领取积分：','all','hIzZe','11aixsol','get','hixnr','OvqYB','default','developer-ecology-group','⛔️\x20收取积分失败!\x20','JXTNI','find','3420171actMRU','finally','hlcEW','⛔️\x20请求发起失败！','length','computenest','HpLwS','code','ifnQU','1062280wpGUNc','✅\x20收取积分：','\x0a==================\x20任务\x20==================\x0a','YOwfj','receiveSignInBonus','acUHg','vztYR','5mWMRDr','false','is_debug','BvDhO','pwYjv','token','notifyList','✅\x20文章评论：\x20','.askProduct-item-info-answer','zsuts','PdlUA','.answer-list','assessSignInBonusQualification','DXbLN','codeServer_fun','⛔️\x20抽奖\x20-\x20','parse','msg','ImMyS','🔷账号','DtKPS','string','Cheerio','wait','isNode','获得待领取积分:\x20','./sendNotify','devops','ZHQXH','WScRs','codeFuc','https://developer.aliyun.com/ebook/','ceil','PEPbN','✅\x20随机获取问答id：\x20','gHoez','/task/actionLog','getAskDetail','iEqzU','https://developer.aliyun.com/ebook/index/__0_0_0_','ckIhk','mTafO','✅\x20抽奖\x20-\x20','Jzmxq','now','⛔️\x20查询领奖条件失败!\x20','modelscope','JcnUC','toStr','/sign/getUserSpaceSignInDetail','FTBiG','keys','https://servicewechat.com/wx14413dafd16b9540/130/page-frame.html','云存储','queryStr','LllOo','/score/pending/receiveAllPendingScore?appCode=developer','getArticles','TpNAA','JCChu','getCsrfToken','activityCode','1262440ghIvRI','FtRCe','findIndex','appid','WUgbU','✅\x20回答点赞：\x20',',\x20待领取积分:\x20','BuWdS','substring','setjson','随机延迟','then','join','json','getFavors','qbZiM','getAsks','toObj','.askProduct-item','用户需要去登录','https://developer.aliyun.com/developer/api/my/ask/voteAnswer','developer-ecology',':缓存中存在Cheerio模块,跳过下载','❌获取code授权失败！请检查服务器运行是否正常\x20=>\x20尝试读取数据持久化\x20','ztWEI','Nhgts','⛔️\x20随机获取问题问答失败!\x20','失败!\x20','HKuzF','❌checkCodeServer\x20run\x20error\x20=>\x20','数据库','.community-list','interactData','uOsQJ','sIgFQ','fXAnB','\x0a-----------','IdxyG','host','✅\x20签到\x20-\x20','getEbooks','https://ucc.aliyun.com/uccPagingComponent/getUser','OPTIONS','XLCFW','TOMwX','ckStatus','getUserTotalPendingScore','云原生','notifyMsg','ucKSr','done','⛔️\x20抽奖失败!\x20','✅\x20随机电子书id：\x20','http','storage','getUccCsrfToken','yq-article','likeOrNotLike','.community-detail-content','actionCode','/my/score/getUserScore?appCode=developer','91kubakP','startsWith',',\x20标题：','timeout','push','Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2016_6\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Mobile/15E148\x20AliApp(Aliyun/6.7.1)\x20WindVane/8.7.2\x201170x2532\x20WK','1264KzBnXT','龙蜥操作系统','getdata','BoAsE','848457DHGdEe','data','pOVAG','race','fromEntries','jzbyB','IeOoA','log','文章点赞','阿里云社区','https://developer.aliyun.com/ask/','FJKXW','Cheerio_code','Bearer\x20','fetch','database','ecs','uccCsrfToken','jgUnh','codeServer_address','baseUrl','Dmbsi','getUser','https://developer.aliyun.com/developer/api/my/subscribe/listUserFavor','nEgrv','@codeServer.fun','getRandomTime','------------\x0a','/score/pending/getUserTotalPendingScore?appCode=developer','ask','ZoTSK','aliyunWeb_data','undefined','@codeServer.address','bdmzq','eABqt','filter','弹性计算','JWshE','🎉\x20领取积分:\x20','jkGjj','access_token','✅\x20随机获取问题问答id：\x20','BZMRD','SPREG','wHWIn','hEvjA','UMWtk','200','catch','toString','title','random','taskGroupId','文章收藏','taskList','signin','floor','https://developer.aliyun.com/ask?pageNum=','poxvi','body','PRcdO','lastIndexOf','chJsS','Content-Type','3793710OwRkHP','云效DevOps','cloudnative','NURjt','collect','answer','很棒的一本书','indexOf','QXMZr','https://ucc.aliyun.com/uccPagingComponent/addComment','userName','⛔️\x20获取文章列表失败!\x20','actions','entries','ReGsA','set','https://mirror.ghproxy.com/https://raw.githubusercontent.com/Yuheng0101/X/main/Utils/cheerio.js','yitian','YjGPq','❌账号','polardb','⛔️\x20查询待收获积分列表失败!\x20','eLTTn','env','IahRK','zLNAJ','egMYe','qoejs','JIShz','当前请求已超时','⛔️\x20评价电子书失败!\x20','concat','headers','Xrvxc','/sign/assessSignInBonusQualification','split','⛔️\x20查询待领取积分失败!\x20','toLowerCase','视觉智能','[发送请求]\x20缺少\x20url\x20参数','.ebook-home-list','计算巢','hedcy','form','❌请求发起失败！原因为：','jsonp_','text','CmoWe','https://ulp.michelin.com.cn/bff/wechat/login/','✅获取code授权成功！当前code数量为','url','ttsEC','PolarDB开源','userId','https://developer.aliyun.com/'];_0x5709=function(){return _0x318b39;};return _0x5709();}async function getWxToken(_0x38a5a1){const _0x157f04=_0x200784,_0x10c95a={'eTqHv':'json','tXzyY':_0x157f04(0x27c),'acUHg':'Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2015_4_1\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Mobile/15E148\x20MicroMessenger/8.0.31(0x18001f37)\x20NetType/WIFI\x20Language/zh_CN'};try{const _0x497924={'url':_0x157f04(0x23b)+_0x38a5a1,'dataType':_0x10c95a['eTqHv'],'headers':{'Host':_0x10c95a['tXzyY'],'User-Agent':_0x10c95a[_0x157f04(0x143)],'Referer':_0x157f04(0x179)}};let _0x38036f=await Request(_0x497924),_0x2a8f5f=_0x157f04(0x1d7)+_0x38036f?.[_0x157f04(0x1cb)]?.[_0x157f04(0x14a)]?.[_0x157f04(0x1f3)];return _0x2a8f5f;}catch(_0xd8f3c1){$[_0x157f04(0x1d1)](_0x157f04(0x125)+_0xd8f3c1);}}async function checkCodeServer(){const _0x3eb8cc=_0x200784,_0x1d9fb1={'bkhQk':function(_0x495ae5,_0x3dd898){return _0x495ae5(_0x3dd898);},'eABqt':_0x3eb8cc(0x153),'sIgFQ':function(_0x550049,_0x30cec6){return _0x550049(_0x30cec6);},'IeOoA':function(_0x1389d1,_0x4972ac){return _0x1389d1(_0x4972ac);},'qZdAD':function(_0x43c4e9,_0xe3ee8f){return _0x43c4e9(_0xe3ee8f);}};try{$[_0x3eb8cc(0x163)]=($[_0x3eb8cc(0x15d)]()?process[_0x3eb8cc(0x222)][_0x1d9fb1[_0x3eb8cc(0x1ed)]]:$[_0x3eb8cc(0x1c8)](_0x3eb8cc(0x1e3)))||'';let _0x566570=$[_0x3eb8cc(0x163)]?(_0x1d9fb1[_0x3eb8cc(0x1a5)](eval,$['codeFuc']),await _0x1d9fb1[_0x3eb8cc(0x1d0)](WxCode,$[_0x3eb8cc(0x186)])):(await Request({'url':$['codeServer']+'/?wxappid='+$[_0x3eb8cc(0x186)]}))?.[_0x3eb8cc(0x22e)]('|')||[];_0x566570=_0x566570[_0x3eb8cc(0x1ee)](_0x486694=>_0x486694[_0x3eb8cc(0x1fc)]()[_0x3eb8cc(0x139)]===0x20),_0x1d9fb1[_0x3eb8cc(0x25b)](debug,_0x566570),!_0x566570['length']?$[_0x3eb8cc(0x1d1)](_0x3eb8cc(0x19a)):$['log'](_0x3eb8cc(0x23c)+_0x566570[_0x3eb8cc(0x139)]);let _0x498ba1=await Promise[_0x3eb8cc(0x12a)](_0x566570['map'](async _0x6ee49d=>{const _0x1b7e51=_0x3eb8cc,_0x261b47=await _0x1d9fb1[_0x1b7e51(0x277)](getWxToken,_0x6ee49d);return{'token':_0x261b47};}));return _0x498ba1=_0x498ba1['filter'](_0x3d2a7a=>Object[_0x3eb8cc(0x178)](_0x3d2a7a)[_0x3eb8cc(0x139)]!==0x0),_0x498ba1;}catch(_0x58a9a4){$[_0x3eb8cc(0x1d1)](_0x3eb8cc(0x1a0)+_0x58a9a4);}}async function checkEnv(){const _0x5c1b00=_0x200784,_0x30beeb={'CmoWe':function(_0x275377){return _0x275377();},'hEvjA':'未找到CK'};try{let _0x573a8c=[];if($[_0x5c1b00(0x122)])_0x573a8c=await _0x30beeb[_0x5c1b00(0x23a)](checkCodeServer)||[];else{if(!userCookie||!userCookie['length']){console['log'](_0x30beeb[_0x5c1b00(0x1f8)]);return;}}if(!_0x573a8c['length']){const _0x1da704=envSplitor[_0x5c1b00(0x134)](_0x1287b2=>userCookie[_0x5c1b00(0x120)](_0x1287b2))||envSplitor[0x0];userCookie=$[_0x5c1b00(0x194)](userCookie)||userCookie[_0x5c1b00(0x22e)](_0x1da704),_0x573a8c=userCookie;}return userList[_0x5c1b00(0x1c4)](..._0x573a8c[_0x5c1b00(0x269)](_0x106d6d=>new UserInfo(_0x106d6d))[_0x5c1b00(0x1ee)](Boolean)),userCount=userList['length'],console[_0x5c1b00(0x1d1)](_0x5c1b00(0x267)+userCount+'个账号'),!![];}catch(_0x5502d7){throw new Error('❌checkEnv\x20run\x20error\x20=>\x20'+_0x5502d7);}}async function Request(_0x3b0f0b){const _0x4c2b9c=_0x200784,_0x4c1f7b={'JWshE':_0x4c2b9c(0x232),'FtRCe':'form','sLJlW':function(_0xb72eaa,_0xf256b1){return _0xb72eaa in _0xf256b1;},'UvMmb':'body','mTafO':_0x4c2b9c(0x12d),'hlcEW':function(_0x47f8a8,_0xd0f1a){return _0x47f8a8===_0xd0f1a;},'DtKPS':function(_0x49a255,_0x418116){return _0x49a255+_0x418116;},'XbYgL':_0x4c2b9c(0x190),'HpLwS':_0x4c2b9c(0x20a),'BZMRD':_0x4c2b9c(0x263),'YPtxA':function(_0x42d3e5,_0x14cbf3){return _0x42d3e5==_0x14cbf3;},'YlyOz':function(_0x4b1f82,_0x393941){return _0x4b1f82===_0x393941;}};if(typeof _0x3b0f0b==='string')_0x3b0f0b={'url':_0x3b0f0b};try{if(!_0x3b0f0b?.['url'])throw new Error(_0x4c1f7b[_0x4c2b9c(0x1f0)]);let {url:_0x5090fa,type:_0x2330cd,headers:headers={},body:_0x452158,params:_0x59d5ab,dataType:dataType=_0x4c1f7b[_0x4c2b9c(0x184)],resultType:resultType=_0x4c2b9c(0x1cb)}=_0x3b0f0b;const _0x3d7fb0=_0x2330cd?_0x2330cd?.[_0x4c2b9c(0x230)]():_0x4c1f7b['sLJlW'](_0x4c1f7b['UvMmb'],_0x3b0f0b)?'post':_0x4c1f7b['mTafO'],_0x1de63e=_0x5090fa[_0x4c2b9c(0x22a)](_0x4c1f7b['hlcEW'](_0x3d7fb0,_0x4c2b9c(0x26f))?_0x4c1f7b[_0x4c2b9c(0x159)]('?',$[_0x4c2b9c(0x17b)](_0x59d5ab)):''),_0x44241f=_0x3b0f0b[_0x4c2b9c(0x1c3)]?$['isSurge']()?_0x3b0f0b['timeout']/0x3e8:_0x3b0f0b[_0x4c2b9c(0x1c3)]:0x2710;if(_0x4c1f7b['hlcEW'](dataType,_0x4c1f7b[_0x4c2b9c(0x260)]))headers[_0x4c1f7b[_0x4c2b9c(0x13b)]]=_0x4c1f7b[_0x4c2b9c(0x1f5)];const _0x167f7f=_0x452158&&_0x4c1f7b['YPtxA'](dataType,_0x4c1f7b[_0x4c2b9c(0x184)])?$[_0x4c2b9c(0x17b)](_0x452158):$['toStr'](_0x452158),_0x2e5a63={..._0x3b0f0b,..._0x3b0f0b?.['opts']?_0x3b0f0b['opts']:{},'url':_0x1de63e,'headers':headers,..._0x4c1f7b['YlyOz'](_0x3d7fb0,_0x4c2b9c(0x26f))&&{'body':_0x167f7f},..._0x4c1f7b[_0x4c2b9c(0x137)](_0x3d7fb0,_0x4c1f7b[_0x4c2b9c(0x16e)])&&_0x59d5ab&&{'params':_0x59d5ab},'timeout':_0x44241f},_0x58e0c9=$[_0x4c2b9c(0x1b8)][_0x3d7fb0[_0x4c2b9c(0x230)]()](_0x2e5a63)[_0x4c2b9c(0x18e)](_0x5100c7=>resultType==_0x4c2b9c(0x1cb)?$['toObj'](_0x5100c7[_0x4c2b9c(0x206)])||_0x5100c7[_0x4c2b9c(0x206)]:$[_0x4c2b9c(0x194)](_0x5100c7)||_0x5100c7)[_0x4c2b9c(0x1fb)](_0x17e2b2=>$[_0x4c2b9c(0x1d1)](_0x4c2b9c(0x237)+_0x17e2b2));return Promise[_0x4c2b9c(0x1cd)]([new Promise((_0x21e847,_0x19109a)=>setTimeout(()=>_0x19109a(_0x4c2b9c(0x228)),_0x44241f)),_0x58e0c9]);}catch(_0xf7d59){console['log'](_0x4c2b9c(0x237)+_0xf7d59);}};function randomInt(_0x2d4a4c,_0x511ac7){const _0x4e0268=_0x200784,_0xb1704d={'pwYjv':function(_0x33b6cb,_0x451672){return _0x33b6cb+_0x451672;},'NURjt':function(_0x7683de,_0x43f531){return _0x7683de*_0x43f531;},'BoAsE':function(_0x24028b,_0x2cc0e8){return _0x24028b-_0x2cc0e8;}};return Math['round'](_0xb1704d[_0x4e0268(0x149)](_0xb1704d[_0x4e0268(0x20e)](Math[_0x4e0268(0x1fe)](),_0xb1704d[_0x4e0268(0x1c9)](_0x511ac7,_0x2d4a4c)),_0x2d4a4c));};function DoubleLog(_0x11b81f){const _0x55d63f=_0x200784;if(_0x11b81f&&$[_0x55d63f(0x15d)]())console[_0x55d63f(0x1d1)](''+_0x11b81f),$[_0x55d63f(0x1b3)][_0x55d63f(0x1c4)](''+_0x11b81f);else _0x11b81f&&(console[_0x55d63f(0x1d1)](''+_0x11b81f),$[_0x55d63f(0x1b3)][_0x55d63f(0x1c4)](''+_0x11b81f));};function debug(_0x192abc,_0x4f7c0c=_0x200784(0x264)){const _0x1c7c2e=_0x200784,_0x1436a0={'chJsS':function(_0x3a2a00,_0x57ed08){return _0x3a2a00===_0x57ed08;},'vTqSo':_0x1c7c2e(0x25c),'JIShz':function(_0x34aadb,_0x8110fe){return _0x34aadb==_0x8110fe;}};_0x1436a0[_0x1c7c2e(0x209)]($[_0x1c7c2e(0x147)],_0x1436a0[_0x1c7c2e(0x27e)])&&($['log']('\x0a-----------'+_0x4f7c0c+_0x1c7c2e(0x1e5)),$['log'](_0x1436a0[_0x1c7c2e(0x227)](typeof _0x192abc,_0x1c7c2e(0x15a))?_0x192abc:$[_0x1c7c2e(0x175)](_0x192abc)||'debug\x20error\x20=>\x20t='+_0x192abc),$[_0x1c7c2e(0x1d1)](_0x1c7c2e(0x1a7)+_0x4f7c0c+_0x1c7c2e(0x1e5)));};async function SendMsgList(_0x75a34){const _0x58b69d=_0x200784;await Promise[_0x58b69d(0x27a)](_0x75a34?.['map'](_0x102557=>SendMsg(_0x102557[_0x58b69d(0x246)][_0x58b69d(0x18f)]('\x0a'),_0x102557[_0x58b69d(0x257)])));};async function SendMsg(_0x26bab0,_0x1a5854){const _0x5ae83b=_0x200784,_0xd57ad4={'jgUnh':function(_0x3cdf75,_0x21e7c8){return _0x3cdf75<_0x21e7c8;}};_0x26bab0&&(_0xd57ad4[_0x5ae83b(0x1dc)](0x0,Notify)?$[_0x5ae83b(0x15d)]()?await notify['sendNotify']($['name'],_0x26bab0):$[_0x5ae83b(0x156)]($[_0x5ae83b(0x24c)],$[_0x5ae83b(0x1fd)]||'',_0x26bab0,{'media-url':_0x1a5854}):console[_0x5ae83b(0x1d1)](_0x26bab0));};function ObjectKeys2LowerCase(_0x26bfab){const _0x90e22b=_0x200784;return _0x26bfab=Object[_0x90e22b(0x1ce)](Object[_0x90e22b(0x218)](_0x26bfab)['map'](([_0x27597e,_0x3426a8])=>[_0x27597e['toLowerCase'](),_0x3426a8])),new Proxy(_0x26bfab,{'get':function(_0x70a08c,_0x246673,_0x542211){const _0x1a1acf=_0x90e22b;return Reflect['get'](_0x70a08c,_0x246673[_0x1a1acf(0x230)](),_0x542211);},'set':function(_0x28b3c2,_0x3ecf0a,_0x259c28,_0x3908e1){const _0x26f105=_0x90e22b;return Reflect[_0x26f105(0x21a)](_0x28b3c2,_0x3ecf0a[_0x26f105(0x230)](),_0x259c28,_0x3908e1);}});};async function loadCheerio(){const _0xdc261=_0x200784,_0x22e3a6={'WScRs':function(_0x461438,_0x15ef57){return _0x461438(_0x15ef57);},'BGEHS':function(_0x5b9b50){return _0x5b9b50();},'UmtZm':_0xdc261(0x21b),'ttsEC':'Cheerio_code'};let _0x292357=($[_0xdc261(0x15d)]()?process[_0xdc261(0x222)][_0x22e3a6[_0xdc261(0x23e)]]:$['getdata'](_0xdc261(0x1d6)))||'';if(_0x292357&&Object[_0xdc261(0x178)](_0x292357)['length'])return console[_0xdc261(0x1d1)]('✅'+$['name']+_0xdc261(0x199)),_0x22e3a6[_0xdc261(0x162)](eval,_0x292357),createCheerio();return console['log']('🚀'+$[_0xdc261(0x24c)]+_0xdc261(0x27d)),new Promise(async _0x338dea=>{const _0x1971c8=_0xdc261;$['getScript'](_0x22e3a6['UmtZm'])[_0x1971c8(0x18e)](_0x471310=>{const _0xc0ae65=_0x1971c8;$[_0xc0ae65(0x275)](_0x471310,_0xc0ae65(0x1d6)),_0x22e3a6[_0xc0ae65(0x162)](eval,_0x471310);const _0x70431e=_0x22e3a6['BGEHS'](createCheerio);console['log']('✅Cheerio模块加载成功,请继续'),_0x22e3a6['WScRs'](_0x338dea,_0x70431e);});});};!(async()=>{const _0x3c8ec6=_0x200784,_0x131144={'phSuX':function(_0x7a56d4,_0x4da8f7){return _0x7a56d4!=_0x4da8f7;},'QXMZr':_0x3c8ec6(0x1ea),'DXbLN':function(_0x552c5c){return _0x552c5c();},'PRcdO':function(_0x324c1c){return _0x324c1c();},'JbFWL':function(_0x5525a8){return _0x5525a8();}};if(_0x131144['phSuX'](typeof $request,_0x131144[_0x3c8ec6(0x213)]))await _0x131144[_0x3c8ec6(0x152)](getCookie);else{if(!await _0x131144[_0x3c8ec6(0x207)](loadModule))throw new Error('❌加载模块失败，请检查模块路径是否正常');if(!await checkEnv())throw new Error(_0x3c8ec6(0x244));if(userList['length']>0x0)await _0x131144[_0x3c8ec6(0x245)](main);}})()['catch'](_0x7d341e=>$[_0x200784(0x1b3)][_0x200784(0x1c4)](_0x7d341e['message']||_0x7d341e))[_0x200784(0x136)](async()=>{const _0xdb468f=_0x200784;await SendMsgList($[_0xdb468f(0x14b)]),$[_0xdb468f(0x1b5)]({'ok':0x1});});
/** ---------------------------------固定不动区域----------------------------------------- */
// prettier-ignore
//From chavyleung's Env.js
function Env(t, e) { class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise(((e, r) => { s.call(this, t, ((t, s, a) => { t ? r(t) : e(s) })) })) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.encoding = "utf-8", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } getEnv() { return "undefined" != typeof $environment && $environment["surge-version"] ? "Surge" : "undefined" != typeof $environment && $environment["stash-version"] ? "Stash" : "undefined" != typeof module && module.exports ? "Node.js" : "undefined" != typeof $task ? "Quantumult X" : "undefined" != typeof $loon ? "Loon" : "undefined" != typeof $rocket ? "Shadowrocket" : void 0 } isNode() { return "Node.js" === this.getEnv() } isQuanX() { return "Quantumult X" === this.getEnv() } isSurge() { return "Surge" === this.getEnv() } isLoon() { return "Loon" === this.getEnv() } isShadowrocket() { return "Shadowrocket" === this.getEnv() } isStash() { return "Stash" === this.getEnv() } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; if (this.getdata(t)) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise((e => { this.get({ url: t }, ((t, s, r) => e(r))) })) } runScript(t, e) { return new Promise((s => { let r = this.getdata("@chavy_boxjs_userCfgs.httpapi"); r = r ? r.replace(/\n/g, "").trim() : r; let a = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); a = a ? 1 * a : 20, a = e && e.timeout ? e.timeout : a; const [i, o] = r.split("@"), n = { url: `http://${o}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: a }, headers: { "X-Key": i, Accept: "*/*" }, timeout: a }; this.post(n, ((t, e, r) => s(r))) })).catch((t => this.logErr(t))) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), r = !s && this.fs.existsSync(e); if (!s && !r) return {}; { const r = s ? t : e; try { return JSON.parse(this.fs.readFileSync(r)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), r = !s && this.fs.existsSync(e), a = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, a) : r ? this.fs.writeFileSync(e, a) : this.fs.writeFileSync(t, a) } } lodash_get(t, e, s = void 0) { const r = e.replace(/\[(\d+)\]/g, ".$1").split("."); let a = t; for (const t of r) if (a = Object(a)[t], void 0 === a) return s; return a } lodash_set(t, e, s) { return Object(t) !== t || (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce(((t, s, r) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[r + 1]) >> 0 == +e[r + 1] ? [] : {}), t)[e[e.length - 1]] = s), t } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, r] = /^@(.*?)\.(.*?)$/.exec(t), a = s ? this.getval(s) : ""; if (a) try { const t = JSON.parse(a); e = t ? this.lodash_get(t, r, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, r, a] = /^@(.*?)\.(.*?)$/.exec(e), i = this.getval(r), o = r ? "null" === i ? null : i || "{}" : "{}"; try { const e = JSON.parse(o); this.lodash_set(e, a, t), s = this.setval(JSON.stringify(e), r) } catch (e) { const i = {}; this.lodash_set(i, a, t), s = this.setval(JSON.stringify(i), r) } } else s = this.setval(t, e); return s } getval(t) { switch (this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": return $persistentStore.read(t); case "Quantumult X": return $prefs.valueForKey(t); case "Node.js": return this.data = this.loaddata(), this.data[t]; default: return this.data && this.data[t] || null } } setval(t, e) { switch (this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": return $persistentStore.write(t, e); case "Quantumult X": return $prefs.setValueForKey(t, e); case "Node.js": return this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0; default: return this.data && this.data[e] || null } } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { switch (t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"], delete t.headers["content-type"], delete t.headers["content-length"]), t.params && (t.url += "?" + this.queryStr(t.params)), void 0 === t.followRedirect || t.followRedirect || ((this.isSurge() || this.isLoon()) && (t["auto-redirect"] = !1), this.isQuanX() && (t.opts ? t.opts.redirection = !1 : t.opts = { redirection: !1 })), this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": default: this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, ((t, s, r) => { !t && s && (s.body = r, s.statusCode = s.status ? s.status : s.statusCode, s.status = s.statusCode), e(t, s, r) })); break; case "Quantumult X": this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then((t => { const { statusCode: s, statusCode: r, headers: a, body: i, bodyBytes: o } = t; e(null, { status: s, statusCode: r, headers: a, body: i, bodyBytes: o }, i, o) }), (t => e(t && t.error || "UndefinedError"))); break; case "Node.js": let s = require("iconv-lite"); this.initGotEnv(t), this.got(t).on("redirect", ((t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } })).then((t => { const { statusCode: r, statusCode: a, headers: i, rawBody: o } = t, n = s.decode(o, this.encoding); e(null, { status: r, statusCode: a, headers: i, rawBody: o, body: n }, n) }), (t => { const { message: r, response: a } = t; e(r, a, a && s.decode(a.rawBody, this.encoding)) })) } } post(t, e = (() => { })) { const s = t.method ? t.method.toLocaleLowerCase() : "post"; switch (t.body && t.headers && !t.headers["Content-Type"] && !t.headers["content-type"] && (t.headers["content-type"] = "application/x-www-form-urlencoded"), t.headers && (delete t.headers["Content-Length"], delete t.headers["content-length"]), void 0 === t.followRedirect || t.followRedirect || ((this.isSurge() || this.isLoon()) && (t["auto-redirect"] = !1), this.isQuanX() && (t.opts ? t.opts.redirection = !1 : t.opts = { redirection: !1 })), this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": default: this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient[s](t, ((t, s, r) => { !t && s && (s.body = r, s.statusCode = s.status ? s.status : s.statusCode, s.status = s.statusCode), e(t, s, r) })); break; case "Quantumult X": t.method = s, this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then((t => { const { statusCode: s, statusCode: r, headers: a, body: i, bodyBytes: o } = t; e(null, { status: s, statusCode: r, headers: a, body: i, bodyBytes: o }, i, o) }), (t => e(t && t.error || "UndefinedError"))); break; case "Node.js": let r = require("iconv-lite"); this.initGotEnv(t); const { url: a, ...i } = t; this.got[s](a, i).then((t => { const { statusCode: s, statusCode: a, headers: i, rawBody: o } = t, n = r.decode(o, this.encoding); e(null, { status: s, statusCode: a, headers: i, rawBody: o, body: n }, n) }), (t => { const { message: s, response: a } = t; e(s, a, a && r.decode(a.rawBody, this.encoding)) })) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let r = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in r) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? r[e] : ("00" + r[e]).substr(("" + r[e]).length))); return t } queryStr(t) { let e = ""; for (const s in t) { let r = t[s]; null != r && "" !== r && ("object" == typeof r && (r = JSON.stringify(r)), e += `${s}=${r}&`) } return e = e.substring(0, e.length - 1), e } msg(e = t, s = "", r = "", a) { const i = t => { switch (typeof t) { case void 0: return t; case "string": switch (this.getEnv()) { case "Surge": case "Stash": default: return { url: t }; case "Loon": case "Shadowrocket": return t; case "Quantumult X": return { "open-url": t }; case "Node.js": return }case "object": switch (this.getEnv()) { case "Surge": case "Stash": case "Shadowrocket": default: return { url: t.url || t.openUrl || t["open-url"] }; case "Loon": return { openUrl: t.openUrl || t.url || t["open-url"], mediaUrl: t.mediaUrl || t["media-url"] }; case "Quantumult X": return { "open-url": t["open-url"] || t.url || t.openUrl, "media-url": t["media-url"] || t.mediaUrl, "update-pasteboard": t["update-pasteboard"] || t.updatePasteboard }; case "Node.js": return }default: return } }; if (!this.isMute) switch (this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": default: $notification.post(e, s, r, i(a)); break; case "Quantumult X": $notify(e, s, r, i(a)); case "Node.js": }if (!this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), r && t.push(r), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { switch (this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": case "Quantumult X": default: this.log("", `❗️${this.name}, 错误!`, t); break; case "Node.js": this.log("", `❗️${this.name}, 错误!`, t.stack) } } wait(t) { return new Promise((e => setTimeout(e, t))) } done(t = {}) { const e = ((new Date).getTime() - this.startTime) / 1e3; switch (this.log("", `🔔${this.name}, 结束! 🕛 ${e} 秒`), this.log(), this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": case "Quantumult X": default: $done(t); break; case "Node.js": process.exit(1) } } }(t, e) }
